"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[291],{3905:(n,e,t)=>{t.d(e,{Zo:()=>p,kt:()=>m});var a=t(7294);function o(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function s(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?r(Object(t),!0).forEach((function(e){o(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e){if(null==n)return{};var t,a,o=function(n,e){if(null==n)return{};var t,a,o={},r=Object.keys(n);for(a=0;a<r.length;a++)t=r[a],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(a=0;a<r.length;a++)t=r[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}var d=a.createContext({}),i=function(n){var e=a.useContext(d),t=e;return n&&(t="function"==typeof n?n(e):s(s({},e),n)),t},p=function(n){var e=i(n.components);return a.createElement(d.Provider,{value:e},n.children)},c="mdxType",u={inlineCode:"code",wrapper:function(n){var e=n.children;return a.createElement(a.Fragment,{},e)}},h=a.forwardRef((function(n,e){var t=n.components,o=n.mdxType,r=n.originalType,d=n.parentName,p=l(n,["components","mdxType","originalType","parentName"]),c=i(t),h=o,m=c["".concat(d,".").concat(h)]||c[h]||u[h]||r;return t?a.createElement(m,s(s({ref:e},p),{},{components:t})):a.createElement(m,s({ref:e},p))}));function m(n,e){var t=arguments,o=e&&e.mdxType;if("string"==typeof n||o){var r=t.length,s=new Array(r);s[0]=h;var l={};for(var d in e)hasOwnProperty.call(e,d)&&(l[d]=e[d]);l.originalType=n,l[c]="string"==typeof n?n:o,s[1]=l;for(var i=2;i<r;i++)s[i]=t[i];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}h.displayName="MDXCreateElement"},3322:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>i});var a=t(7462),o=(t(7294),t(3905));const r={},s="Rest",l={unversionedId:"rest_ajax_fetch_axios/rest_ajax_fetch_axios",id:"rest_ajax_fetch_axios/rest_ajax_fetch_axios",title:"Rest",description:"\u524d\u8a00",source:"@site/docs/rest_ajax_fetch_axios/rest_ajax_fetch_axios.md",sourceDirName:"rest_ajax_fetch_axios",slug:"/rest_ajax_fetch_axios/",permalink:"/rest_ajax_fetch_axios/",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"nodejs",permalink:"/node.js/"}},d={},i=[{value:"\u524d\u8a00",id:"\u524d\u8a00",level:2},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"api",id:"api",level:2},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb-1",level:2},{value:"\u65b9\u6848",id:"\u65b9\u6848",level:2},{value:"CORS\u8de8\u57df",id:"cors\u8de8\u57df",level:2},{value:"- CORS (\u8de8\u57df\u8d44\u6e90\u5171\u4eab)",id:"--cors-\u8de8\u57df\u8d44\u6e90\u5171\u4eab",level:3},{value:"- \u89e3\u51b3\u65b9\u6848",id:"--\u89e3\u51b3\u65b9\u6848",level:3},{value:"\u8bbe\u7f6e\u54cd\u5e94\u5934",id:"\u8bbe\u7f6e\u54cd\u5e94\u5934",level:3},{value:"\u6d4f\u89c8\u5668\u9884\u68c0\u8bf7\u6c42\uff08preflight request\uff09",id:"\u6d4f\u89c8\u5668\u9884\u68c0\u8bf7\u6c42preflight-request",level:3},{value:"xhr\u4ecb\u7ecd",id:"xhr\u4ecb\u7ecd",level:2},{value:"\u8bfb\u53d6\u54cd\u5e94\u7684\u64cd\u4f5c",id:"\u8bfb\u53d6\u54cd\u5e94\u7684\u64cd\u4f5c",level:3},{value:"fetch",id:"fetch",level:2},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb-2",level:3},{value:"\u57fa\u672c\u7528\u6cd5",id:"\u57fa\u672c\u7528\u6cd5",level:3},{value:"get",id:"get",level:3},{value:"post-\u5e26options\u7684\u65b9\u5f0f",id:"post-\u5e26options\u7684\u65b9\u5f0f",level:3},{value:"\u6ce8\u610f",id:"\u6ce8\u610f",level:3},{value:"\u672c\u5730\u5b58\u50a8",id:"\u672c\u5730\u5b58\u50a8",level:2},{value:"\u767b\u5f55",id:"\u767b\u5f55",level:3},{value:"token",id:"token",level:2},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb-3",level:3},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:3},{value:"fetch\u8865\u5145",id:"fetch\u8865\u5145",level:2},{value:"AbortController\u2014\u7ec8\u6b62\u8bf7\u6c42",id:"abortcontroller\u7ec8\u6b62\u8bf7\u6c42",level:3},{value:"fetch\u7684async\u3001await\u7528\u6cd5",id:"fetch\u7684asyncawait\u7528\u6cd5",level:3},{value:"axios",id:"axios",level:2},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb-4",level:3},{value:"\u57fa\u672c\u4f7f\u7528",id:"\u57fa\u672c\u4f7f\u7528",level:3},{value:"\u914d\u7f6e\u5bf9\u8c61",id:"\u914d\u7f6e\u5bf9\u8c61",level:3},{value:"\u53d6\u6d88\u8bf7\u6c42",id:"\u53d6\u6d88\u8bf7\u6c42",level:3},{value:"\u54cd\u5e94\u7ed3\u6784",id:"\u54cd\u5e94\u7ed3\u6784",level:3},{value:"\u9ed8\u8ba4\u914d\u7f6e",id:"\u9ed8\u8ba4\u914d\u7f6e",level:3},{value:"\u81ea\u5b9a\u4e49\u5b9e\u4f8b\u9ed8\u8ba4\u503c",id:"\u81ea\u5b9a\u4e49\u5b9e\u4f8b\u9ed8\u8ba4\u503c",level:3},{value:"\u62e6\u622a\u5668",id:"\u62e6\u622a\u5668",level:3},{value:"\u79fb\u9664\u62e6\u622a\u5668",id:"\u79fb\u9664\u62e6\u622a\u5668",level:3}],p={toc:i},c="wrapper";function u(n){let{components:e,...t}=n;return(0,o.kt)(c,(0,a.Z)({},p,t,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"rest"},"Rest"),(0,o.kt)("h2",{id:"\u524d\u8a00"},"\u524d\u8a00"),(0,o.kt)("p",null,"\u6211\u4eec\u4e4b\u524d\u7f16\u5199\u7684\u670d\u52a1\u5668\u90fd\u662f\u4f20\u7edf\u7684\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u7684\u7ed3\u6784\u662f\u57fa\u4e8e",(0,o.kt)("inlineCode",{parentName:"p"},"MVC"),"\u6a21\u5f0f\n",(0,o.kt)("strong",{parentName:"p"},"Model")," -- \u6570\u636e\u6a21\u578b\n",(0,o.kt)("strong",{parentName:"p"},"View")," -- \u89c6\u56fe\uff0c\u7528\u6765\u5448\u73b0\n",(0,o.kt)("strong",{parentName:"p"},"Controller")," -- \u63a7\u5236\u5668\uff0c\u590d\u6742\u52a0\u8f7d\u6570\u636e\u5e76\u9009\u62e9\u89c6\u56fe\u6765\u5448\u73b0\u6570\u636e"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u4f20\u7edf\u7684\u670d\u52a1\u5668\u662f\u76f4\u63a5\u4e3a\u5ba2\u6237\u7aef\u8fd4\u56de\u4e00\u4e2a\u9875\u9762",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"\u4f46\u662f\u4f20\u7edf\u7684\u670d\u52a1\u5668\u5e76\u4e0d\u80fd\u9002\u7528\u4e8e\u73b0\u5728\u7684\u5e94\u7528\u573a\u666f")))),(0,o.kt)("p",null,"\u73b0\u5728\u7684\u5e94\u7528\u573a\u666f\uff0c\u4e00\u4e2a\u5e94\u7528\u901a\u5e38\u90fd\u4f1a\u6709\u591a\u4e2a\u5ba2\u6237\u7aef\uff08client\uff09\u5b58\u5728\nweb\u7aef    \u79fb\u52a8\u7aef\uff08app\uff09    pc\u7aef  "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u5982\u679c\u670d\u52a1\u5668\u76f4\u63a5\u8fd4\u56dehtml\u9875\u9762\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u5c31\u53ea\u80fd\u4e3aweb\u7aef\u63d0\u4f9b\u670d\u52a1\n\u5176\u4ed6\u7c7b\u578b\u7684\u5ba2\u6237\u7aef\u8fd8\u9700\u8981\u5355\u72ec\u5f00\u53d1\u670d\u52a1\u5668\uff0c\u8fd9\u6837\u5c31\u63d0\u9ad8\u4e86\u5f00\u53d1\u548c\u7ef4\u62a4\u7684\u6210\u672c")),(0,o.kt)("p",null,"\u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- \u4f20\u7edf\u7684\u670d\u52a1\u5668\u9700\u8981\u505a\u4e24\u4ef6\u4e8b\u60c5\uff0c\u7b2c\u4e00\u4e2a\u52a0\u8f7d\u6570\u636e\uff0c\u7b2c\u4e8c\u4e2a\u8981\u5c06\u6a21\u578b\u6e32\u67d3\u8fdb\u89c6\u56fe\n    - \u89e3\u51b3\u65b9\u6848\u5c31\u5c06\u6e32\u67d3\u89c6\u56fe\u7684\u529f\u80fd\u4ece\u670d\u52a1\u5668\u4e2d\u5265\u79bb\u51fa\u6765\uff0c\n    \u670d\u52a1\u5668\u53ea\u8d1f\u8d23\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u6570\u636e\uff0c\u6e32\u67d3\u89c6\u56fe\u7684\u5de5\u4f5c\u7531\u5ba2\u6237\u7aef\u81ea\u884c\u5b8c\u6210\n    - \u5206\u79bb\u4ee5\u540e\uff0c\u670d\u52a1\u5668\u53ea\u63d0\u4f9b\u6570\u636e\uff0c\u4e00\u4e2a\u670d\u52a1\u5668\u53ef\u4ee5\u540c\u65f6\u4e3a\u591a\u79cd\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\u5668\n    \u540c\u65f6\u5c06\u89c6\u56fe\u6e32\u67d3\u7684\u5de5\u4f5c\u4ea4\u7ed9\u5ba2\u6237\u7aef\u4ee5\u540e\uff0c\u7b80\u5316\u4e86\u670d\u52a1\u5668\u4ee3\u7801\u7684\u7f16\u5199\n")),(0,o.kt)("h2",{id:"\u7b80\u4ecb"},"\u7b80\u4ecb"),(0,o.kt)("p",null,"Rest"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- **REpresentational State Transfer**\n    - **\u8868\u793a\u5c42\u72b6\u6001\u7684\u4f20\u8f93**\n    - **Rest\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u79cd\u670d\u52a1\u5668\u7684\u8bbe\u8ba1\u98ce\u683c**\n    - \u5b83\u7684\u4e3b\u8981\u7279\u70b9\u5c31\u662f\uff0c**\u670d\u52a1\u5668\u53ea\u8fd4\u56de\u6570\u636e**\n    - \u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u4f20\u8f93\u6570\u636e\u65f6\u901a\u5e38\u4f1a\u4f7f\u7528`JSON`\u4f5c\u4e3a\u6570\u636e\u683c\u5f0f\n    - \u8bf7\u6c42\u7684\u65b9\u6cd5\uff1a\n    `GET`    \u52a0\u8f7d\u6570\u636e\n    `POST`   \u65b0\u5efa\u6216\u6dfb\u52a0\u6570\u636e\n    `PUT`    \u6dfb\u52a0\u6216\u4fee\u6539\u6570\u636e\n    `PATCH`  \u4fee\u6539\u6570\u636e\n    `DELETE` \u5220\u9664\u6570\u636e\n    `OPTION` \u7531\u6d4f\u89c8\u5668\u81ea\u52a8\u53d1\u9001\uff0c\u68c0\u67e5\u8bf7\u6c42\u7684\u4e00\u4e9b\u6743\u9650\n    - API\uff08\u63a5\u53e3\uff09 Endpoint\uff08\u7aef\u70b9\uff09\n    GET /user\n    POST /user\n    DELETE /user/:id\n    ...\n")),(0,o.kt)("h2",{id:"api"},"api"),(0,o.kt)("p",null,"\u670d\u52a1\u5668\u53ea\u8d1f\u8d23\u8fd4\u56de\u6570\u636e\uff0c\u6839\u636e\u9700\u6c42\u4f7f\u7528\u4e0d\u540c\u7684\u8bf7\u6c42\u8def\u7531"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const express = require("express")\n\nconst app = express()\n\nconst STU_ARR = [\n    { id: "1", name: "\u5b59\u609f\u7a7a", age: 18, gender: "\u7537", address: "\u82b1\u679c\u5c71" },\n    { id: "2", name: "\u732a\u516b\u6212", age: 28, gender: "\u7537", address: "\u9ad8\u8001\u5e84" },\n    { id: "3", name: "\u6c99\u548c\u5c1a", age: 38, gender: "\u7537", address: "\u6d41\u6c99\u6cb3" }\n]\n\napp.use(express.urlencoded({extended:true}))\n// \u89e3\u6790json\u683c\u5f0f\u8bf7\u6c42\u4f53\u7684\u4e2d\u95f4\u4ef6\napp.use(express.json())\n\n// \u7edf\u4e00\u7684api\n// \u5b9a\u4e49\u5b66\u751f\u4fe1\u606f\u7684\u8def\u7531\napp.get("/students", (req, res) => {\n    console.log("\u6536\u5230students\u7684get\u8bf7\u6c42")\n    // \u8fd4\u56de\u5b66\u751f\u4fe1\u606f\n    res.send({\n        status: "ok",\n        data: STU_ARR\n    })\n})\n// \u67e5\u8be2\u67d0\u4e2a\u5b66\u751f\u7684\u8def\u7531\napp.get("/students/:id", (req, res) => {\n    const id = req.params.id\n    const stu = STU_ARR.find((item) => item.id === id)\n\n    // \u5c06\u6570\u636e\u8fd4\u56de\n    res.send({\n        status: "ok",\n        data: stu\n    })\n})\n\n// \u5b9a\u4e49\u4e00\u4e2a\u6dfb\u52a0\u5b66\u751f\u7684\u8def\u7531\napp.post("/students", (req, res) => {\n    console.log("\u6536\u5230students\u7684post\u8bf7\u6c42", req.body)\n    // \u83b7\u53d6\u5b66\u751f\u7684\u4fe1\u606f\n    const { name, age, gender, address } = req.body\n    // \u521b\u5efa\u5b66\u751f\u4fe1\u606f\n    const stu = {\n        id: +STU_ARR.at(-1).id + 1 + "",\n        name,\n        age: +age,\n        gender,\n        address\n    }\n\n    // \u5c06\u5b66\u751f\u4fe1\u606f\u6dfb\u52a0\u5230\u6570\u7ec4\n    STU_ARR.push(stu)\n\n    // \u6dfb\u52a0\u6210\u529f\n    res.send({\n        status: "ok",\n        data: stu\n    })\n})\n\n// \u5b9a\u4e49\u4e00\u4e2a\u5220\u9664\u5b66\u751f\u7684\u8def\u7531 \u6839\u636eid\u5220\u9664\u5b66\u751f\n// app.delete()\napp.delete("/students/:id", (req, res) => {\n    // \u83b7\u53d6\u5b66\u751f\u7684id\n    const id = req.params.id\n\n    // \u904d\u5386\u6570\u7ec4\n    for (let i = 0; i < STU_ARR.length; i++) {\n        if (STU_ARR[i].id === id) {\n            const delStu = STU_ARR[i]\n            STU_ARR.splice(i, 1)\n            // \u6570\u636e\u5220\u9664\u6210\u529f\n            res.send({\n                status: "ok",\n                data: delStu\n            })\n            return\n        }\n    }\n\n    // \u5982\u679c\u6267\u884c\u5230\u8fd9\u91cc\uff0c\u8bf4\u660e\u5b66\u751f\u4e0d\u5b58\u5728\n    res.status(403).send({\n        status: "error",\n        data: "\u5b66\u751fid\u4e0d\u5b58\u5728"\n    })\n})\n\n// \u5b9a\u4e49\u4e00\u4e2a\u4fee\u6539\u5b66\u751f\u7684\u8def\u7531\n// app.put()\napp.put("/students", (req, res) => {\n    // \u83b7\u53d6\u6570\u636e\n    const { id, name, age, gender, address } = req.body\n\n    // \u6839\u636eid\u67e5\u8be2\u5b66\u751f\n    const updateStu = STU_ARR.find((item) => item.id === id)\n\n    if (updateStu) {\n        updateStu.name = name\n        updateStu.age = age\n        updateStu.gender = gender\n        updateStu.address = address\n\n        res.send({\n            status: "ok",\n            data: updateStu\n        })\n    } else {\n        res.status(403).send({\n            status: "error",\n            data: "\u5b66\u751fid\u4e0d\u5b58\u5728"\n        })\n    }\n})\n')),(0,o.kt)("h1",{id:"ajax"},"Ajax"),(0,o.kt)("h2",{id:"\u7b80\u4ecb-1"},"\u7b80\u4ecb"),(0,o.kt)("p",null,"\u200b                    ",(0,o.kt)("strong",{parentName:"p"},"\u5728js\u4e2d\u5411\u670d\u52a1\u5668\u53d1\u9001\u7684\u8bf7\u6c42\u52a0\u8f7d\u6570\u7684\u6280\u672f\u53ebAJAX")),(0,o.kt)("p",null,"\u200b     \u7f51\u9875\u5e94\u7528\u80fd\u591f\u5feb\u901f\u5730\u5c06\u589e\u91cf\u66f4\u65b0\u5448\u73b0\u5728\u7528\u6237\u754c\u9762\u4e0a\uff0c\u800c\u4e0d\u9700\u8981\u91cd\u8f7d\uff08\u5237\u65b0\uff09\u6574\u4e2a\u9875\u9762\u3002\u8fd9\u4f7f\u5f97\u7a0b\u5e8f\u80fd\u591f\u66f4\u5feb\u5730\u56de\u5e94\u7528\u6237\u7684\u64cd\u4f5c\u3002"),(0,o.kt)("p",null,"\u200b                    ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/zh-CN/docs/Web/Guide/AJAX"},"AJAX"))),(0,o.kt)("p",null,"\u200b                        ","-"," A \u5f02\u6b65  J JavaScript A \u548c X xml"),(0,o.kt)("p",null,"\u200b                        ","-"," ",(0,o.kt)("strong",{parentName:"p"},"\u5f02\u6b65\u7684js\u548cxm"),"l"),(0,o.kt)("p",null,"\u200b                        ","-"," \u5b83\u7684\u4f5c\u7528\u5c31\u662f\u901a\u8fc7js\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\u6765\u52a0\u8f7d\u6570\u636e"),(0,o.kt)("p",null,"\u200b                        ","-"," ",(0,o.kt)("inlineCode",{parentName:"p"},"xml"),"\u662f\u65e9\u671fAJAX\u4f7f\u7528\u7684\u6570\u636e\u683c\u5f0f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},"            <student>\n             <name>\u5b59\u609f\u7a7a</name>    \n            </student>\n")),(0,o.kt)("p",null,"\u200b                        ","-"," \u76ee\u524d\u6570\u636e\u683c\u5f0f\u90fd\u4f7f\u7528",(0,o.kt)("inlineCode",{parentName:"p"},"json")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'   {"name" :"\u5b59\u609f\u7a7a"}\n')),(0,o.kt)("h2",{id:"\u65b9\u6848"},"\u65b9\u6848"),(0,o.kt)("p",null,"\u200b                        ","-"," \u53ef\u4ee5\u9009\u62e9\u7684\u65b9\u6848\uff1a"),(0,o.kt)("p",null,"\u200b                            \u2460 ",(0,o.kt)("strong",{parentName:"p"},"XMLHTTPRequest\uff08xhr\uff09")),(0,o.kt)("p",null,"\u200b                            \u2461 ",(0,o.kt)("strong",{parentName:"p"},"Fetch")),(0,o.kt)("p",null,"\u200b                            \u2462 ",(0,o.kt)("strong",{parentName:"p"},"Axios")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'        <script>\n            // \u70b9\u51fb\u6309\u94ae\u4ee5\u540e\uff0c\u5c31\u53bb\u81ea\u52a8\u53bb\u52a0\u8f7d\u670d\u52a1\u5668\u7684\u6570\u636e\n            const btn = document.getElementById("btn")\n            btn.onclick = () => {\n                // \u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\u4e86\n                // https://restfulapi.net/http-status-codes/\n                /* \n                    - CORS (\u8de8\u57df\u8d44\u6e90\u5171\u4eab)\n                        - \u8de8\u57df\u8bf7\u6c42\n                            - \u5982\u679c\u4e24\u4e2a\u7f51\u7ad9\u7684\u5b8c\u6574\u7684\u57df\u540d\u4e0d\u76f8\u540c\n                                a\u7f51\u7ad9\uff1ahttp://haha.com \n                                b\u7f51\u7ad9\uff1ahttp://heihei.com\n                            - \u8de8\u57df\u9700\u8981\u68c0\u67e5\u4e09\u4e2a\u4e1c\u897f\uff1a\n                                \u534f\u8bae \u57df\u540d \u7aef\u53e3\u53f7\n                                http://localhost:5000\n                                http://127.0.0.1:5000\n                                - \u4e09\u4e2a\u53ea\u8981\u6709\u4e00\u4e2a\u4e0d\u540c\uff0c\u5c31\u7b97\u8de8\u57df\n                            - \u5f53\u6211\u4eec\u901a\u8fc7AJAX\u53bb\u53d1\u9001\u8de8\u57df\u8bf7\u6c42\u65f6\uff0c\n                                \u6d4f\u89c8\u5668\u4e3a\u4e86\u670d\u52a1\u5668\u7684\u5b89\u5168\uff0c\u4f1a\u963b\u6b62JS\u8bfb\u53d6\u5230\u670d\u52a1\u5668\u7684\u6570\u636e\n\n                        - \u89e3\u51b3\u65b9\u6848\n                            - \u5728\u670d\u52a1\u5668\u4e2d\u8bbe\u7f6e\u4e00\u4e2a\u5141\u8bb8\u8de8\u57df\u7684\u5934\n                                Access-Control-Allow-Origin\n                                    - \u5141\u8bb8\u90a3\u4e9b\u5ba2\u6237\u7aef\u8bbf\u95ee\u6211\u4eec\u7684\u670d\u52a1\u5668\n                                https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\n                        \n                */\n\n                // xhr\n                // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684xhr\u5bf9\u8c61\uff0cxhr\u8868\u793a\u8bf7\u6c42\u4fe1\u606f\n                const xhr = new XMLHttpRequest()\n                \n                // \u8bbe\u7f6e\u8bf7\u6c42\u7684\u4fe1\u606f\n                xhr.open("GET", "http://localhost:3000/students")\n\n                // \u53d1\u9001\u8bf7\u6c42\n                xhr.send()\n\n                // \u8bfb\u53d6\u54cd\u5e94\u8981\u600e\u4e48\u64cd\u4f5c\uff1f\n                \n            }\n        <\/script>\n')),(0,o.kt)("h2",{id:"cors\u8de8\u57df"},"CORS\u8de8\u57df"),(0,o.kt)("h3",{id:"--cors-\u8de8\u57df\u8d44\u6e90\u5171\u4eab"},"-"," ",(0,o.kt)("a",{parentName:"h3",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"},"CORS")," (\u8de8\u57df\u8d44\u6e90\u5171\u4eab)"),(0,o.kt)("p",null,"\u200b                        ","-"," \u8de8\u57df\u8bf7\u6c42"),(0,o.kt)("p",null,"\u200b                            ","-"," \u5982\u679c\u4e24\u4e2a\u7f51\u7ad9\u7684\u5b8c\u6574\u7684\u57df\u540d\u4e0d\u76f8\u540c"),(0,o.kt)("p",null,"\u200b                                a\u7f51\u7ad9\uff1a",(0,o.kt)("a",{parentName:"p",href:"http://haha.com"},"http://haha.com")),(0,o.kt)("p",null,"\u200b                                b\u7f51\u7ad9\uff1a",(0,o.kt)("a",{parentName:"p",href:"http://heihei.com"},"http://heihei.com")),(0,o.kt)("p",null,"\u200b                            ","-"," \u8de8\u57df\u9700\u8981\u68c0\u67e5\u4e09\u4e2a\u4e1c\u897f\uff1a"),(0,o.kt)("p",null,"\u200b                                \u534f\u8bae \u57df\u540d \u7aef\u53e3\u53f7"),(0,o.kt)("p",null,"\u200b                                ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:5000"},"http://localhost:5000")),(0,o.kt)("p",null,"\u200b                                ",(0,o.kt)("a",{parentName:"p",href:"http://127.0.0.1:5000"},"http://127.0.0.1:5000")),(0,o.kt)("p",null,"\u200b                                ","-"," \u4e09\u4e2a\u53ea\u8981\u6709\u4e00\u4e2a\u4e0d\u540c\uff0c\u5c31\u7b97\u8de8\u57df"),(0,o.kt)("p",null,"\u200b                            ","-"," \u5f53\u6211\u4eec\u901a\u8fc7AJAX\u53bb\u53d1\u9001\u8de8\u57df\u8bf7\u6c42\u65f6\uff0c"),(0,o.kt)("p",null,"\u200b                                ",(0,o.kt)("strong",{parentName:"p"},"\u6d4f\u89c8\u5668\u4e3a\u4e86\u670d\u52a1\u5668\u7684\u5b89\u5168\uff0c\u4f1a\u963b\u6b62JS\u8bfb\u53d6\u5230\u670d\u52a1\u5668\u7684\u6570\u636e")),(0,o.kt)("h3",{id:"--\u89e3\u51b3\u65b9\u6848"},"-"," \u89e3\u51b3\u65b9\u6848"),(0,o.kt)("p",null,"\u200b                            ","-"," \u5728\u670d\u52a1\u5668\u4e2d\u8bbe\u7f6e\u4e00\u4e2a",(0,o.kt)("strong",{parentName:"p"},"\u5141\u8bb8\u8de8\u57df\u7684\u5934")),(0,o.kt)("p",null,"\u200b                                ",(0,o.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Origin")),(0,o.kt)("p",null,"\u200b                                    ","-"," \u5141\u8bb8\u90a3\u4e9b\u5ba2\u6237\u7aef\u8bbf\u95ee\u6211\u4eec\u7684\u670d\u52a1\u5668"),(0,o.kt)("p",null,"\u200b                                ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"},"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS")),(0,o.kt)("h3",{id:"\u8bbe\u7f6e\u54cd\u5e94\u5934"},(0,o.kt)("a",{parentName:"h3",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"},"\u8bbe\u7f6e\u54cd\u5e94\u5934")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'app.use((req, res, next) => {\n res.setHeader("Access-Control-Allow-Origin", "*")\n    res.setHeader("Access-Control-Allow-Methods", "GET,POST")\n    res.setHeader("Access-Control-Allow-Headers", "Content-type")\n    // Access-Control-Allow-Origin \u8bbe\u7f6e\u6307\u5b9a\u503c\u65f6\u53ea\u80fd\u8bbe\u7f6e\u4e00\u4e2a\n    // res.setHeader("Access-Control-Allow-Origin", "http://127.0.0.1:5500")\n    // Access-Control-Allow-Methods \u5141\u8bb8\u7684\u8bf7\u6c42\u7684\u65b9\u5f0f\n    // Access-Control-Allow-Headers \u5141\u8bb8\u4f20\u9012\u7684\u8bf7\u6c42\u5934\n    \n    // \u590d\u6742\u8bf7\u6c42\uff0c\u6d4f\u89c8\u5668\u9884\u68c0\u6d4b\n    // \u6d4f\u89c8\u5668\u9884\u68c0\u6d4b\u7684OPTIONS\u8bf7\u6c42\uff0c\u540e\u53f0\u8981\u505a\u51fa\u54cd\u5e94\uff0c\u4e0d\u7136\u4f1a\u8fdb\u5165\u540e\u7eed\u7684\u4e2d\u95f4\u4ef6\n    if (req.method === \'OPTIONS\') res.end()\n    next()\n})\n')),(0,o.kt)("h3",{id:"\u6d4f\u89c8\u5668\u9884\u68c0\u8bf7\u6c42preflight-request"},(0,o.kt)("a",{parentName:"h3",href:"https://zh.javascript.info/fetch-crossorigin#step-1-yu-jian-qing-qiu-preflightrequest"},"\u6d4f\u89c8\u5668\u9884\u68c0\u8bf7\u6c42\uff08preflight request\uff09")),(0,o.kt)("p",null,"\u800c\u8de8\u57df\u8bf7\u6c42\u6709\u65f6\u5019\u4f1a\u81ea\u52a8\u53d1\u8d77\u4e24\u6b21\u8bf7\u6c42\uff0c\u7b2c\u4e00\u6b21\u4e3a\u9884\u68c0\u8bf7\u6c42\uff0c\u5373OPTIONS\u8bf7\u6c42\n\u4e00\u822c\u6765\u8bf4\u4f7f\u7528 application/json \u7684 post \u8bf7\u6c42\u662f\u5fc5\u7136\u4f1a\u5e26\u5165OPTIONS\u8bf7\u6c42\nOPTIONS\u8bf7\u6c42\u4e5f\u88ab\u79f0\u4e3a\u9884\u68c0\u8bf7\u6c42\uff0c\u4e3b\u8981\u7528\u4e8e\u83b7\u77e5\u670d\u52a1\u7aef\u652f\u6301\u7684HTTP\u8bf7\u6c42\u65b9\u6cd5\u3002\u8de8\u57df\u8d44\u6e90\u5171\u4eab(CORS)\u6807\u51c6\u65b0\u589e\u4e86\u4e00\u7ec4 HTTP \u9996\u90e8\u5b57\u6bb5\uff0c\u914d\u5408\u9884\u68c0\u8bf7\u6c42\u53ef\u83b7\u77e5\u670d\u52a1\u5668\u5141\u8bb8\u54ea\u4e9b\u6e90\u7ad9\u901a\u8fc7\u6d4f\u89c8\u5668\u6709\u6743\u9650\u8bbf\u95ee\u54ea\u4e9b\u8d44\u6e90\u3002"),(0,o.kt)("p",null,"\u4f46\u662f\u5728\u6709\u4e9bget\u8bf7\u6c42\u4e2d\u4e5f\u4f1aOPTIONS\u8bf7\u6c42\uff0c\u8fd9\u91cc\u8865\u5145\u4e0b\u56de\u53d1\u751foptions\u7684\u60c5\u51b5\n\u5f53\u53d1\u751f\u4ee5\u4e0b\u60c5\u51b5\u65f6\uff0c\u5ba2\u6237\u7aef\u5c31\u4f1a\u81ea\u52a8\u53d1\u8d77OPTIONS\u9884\u68c0\u8bf7\u6c42"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u4f7f\u7528\u4ee5\u4e0b\u4efb\u4e00HTTP \u65b9\u6cd5\uff1a",(0,o.kt)("strong",{parentName:"li"},"PUT/DELETE/CONNECT/OPTIONS/TRACE/PATCH")),(0,o.kt)("li",{parentName:"ol"},"\u8bbe\u7f6e\u4e86\u4ee5\u4e0b\u5934\u90e8\u5b57\u6bb5\u4ee5\u5916\u7684\u81ea\u5b9a\u4e49\u5b57\u6bb5\uff1a",(0,o.kt)("strong",{parentName:"li"},"Accept/Accept-Language/Content-Language/Content-Type/DPR/Downlink/Save-Data/Viewport-Width/Width")),(0,o.kt)("li",{parentName:"ol"},"Content-Type \u7684\u503c\u4e0d\u5c5e\u4e8e\u4e0b\u5217\u4e4b\u4e00: ",(0,o.kt)("strong",{parentName:"li"},"application/x-www-form-urlencoded\u3001multipart/form-data\u3001text/plain")),(0,o.kt)("li",{parentName:"ol"},"\u8bf7\u6c42\u4e2d\u7684\u4efb\u610fXMLHttpRequestUpload \u5bf9\u8c61\u5747\u6ca1\u6709\u6ce8\u518c\u4efb\u4f55\u4e8b\u4ef6\u76d1\u542c\u5668\uff1bXMLHttpRequestUpload \u5bf9\u8c61\u53ef\u4ee5\u4f7f\u7528 XMLHttpRequest.upload \u5c5e\u6027\u8bbf\u95ee"),(0,o.kt)("li",{parentName:"ol"},"\u8bf7\u6c42\u4e2d\u6ca1\u6709\u4f7f\u7528 ReadableStream \u5bf9\u8c61\n\u89e3\u51b3\u65b9\u6cd5\uff1a\u8c03\u6574\u8bf7\u6c42\u65b9\u6cd5\u3001\u53bb\u9664\u81ea\u5b9a\u4e49header\u3001\u4fee\u6539Content-Type\uff0c\u57fa\u672c\u53ef\u4ee5\u907f\u514d\u8be5\u8bf7\u6c42\u53d1\u51faOPTIONS\u9884\u68c0\u8bf7\u6c42\u3002")),(0,o.kt)("h2",{id:"xhr\u4ecb\u7ecd"},"xhr\u4ecb\u7ecd"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'                // xhr\n                // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684xhr\u5bf9\u8c61\uff0cxhr\u8868\u793a\u8bf7\u6c42\u4fe1\u606f\n                const xhr = new XMLHttpRequest()\n                \n                // \u8bbe\u7f6e\u8bf7\u6c42\u7684\u4fe1\u606f\n                xhr.open("GET", "http://localhost:3000/students")\n\n                // \u53d1\u9001\u8bf7\u6c42\n                xhr.send()\n')),(0,o.kt)("h3",{id:"\u8bfb\u53d6\u54cd\u5e94\u7684\u64cd\u4f5c"},"\u8bfb\u53d6\u54cd\u5e94\u7684\u64cd\u4f5c"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'    <body>\n        <h1>AJAX\u6d4b\u8bd5</h1>\n        <hr />\n        <button id="btn">\u70b9\u6211\u52a0\u8f7d\u6570\u636e</button>\n\n        <div id="root"></div>\n\n        <script>\n            const btn = document.getElementById("btn")\n            const root = document.getElementById("root")\n            btn.onclick = () => {\n                // \u521b\u5efa\u4e00\u4e2axhr\u5bf9\u8c61\n                const xhr = new XMLHttpRequest()\n\n                // \u8bbe\u7f6e\u54cd\u5e94\u4f53\u7684\u7c7b\u578b\uff0c\u8bbe\u7f6e\u540e\u4f1a\u81ea\u52a8\u5bf9\u6570\u636e\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\n                xhr.responseType = "json"\n\n                // \u53ef\u4ee5\u4e3axhr\u5bf9\u8c61\u7ed1\u5b9a\u4e00\u4e2aload\u4e8b\u4ef6\n                xhr.onload = function () {\n                    // xhr.status \u8868\u793a\u54cd\u5e94\u72b6\u6001\u7801\n                    // console.log(xhr.status)\n                    if (xhr.status === 200) {\n                        // xhr.response \u8868\u793a\u54cd\u5e94\u4fe1\u606f\n                        // const result = JSON.parse(xhr.response)\n                        // console.log(result.status, result.data)\n                        // \u8bfb\u53d6\u54cd\u5e94\u4fe1\u606f\n                        // console.log(xhr.response)\n                        const result = xhr.response\n                        // \u5224\u65ad\u6570\u636e\u662f\u5426\u6b63\u786e\n                        if (result.status === "ok") {\n                            // \u521b\u5efa\u4e00\u4e2aul\n                            const ul = document.createElement("ul")\n                            // \u5c06ul\u63d2\u5165\u5230root\u4e2d\n                            root.appendChild(ul)\n                            // \u904d\u5386\u6570\u636e\n                            for (let stu of result.data) {\n                                ul.insertAdjacentHTML(\n                                    "beforeend",\n                                    `<li>${stu.id} - ${stu.name} - ${stu.age} - ${stu.gender} - ${stu.address}</li>`\n                                )\n                            }\n                        }\n                    }\n                }\n\n                // \u8bbe\u7f6e\u8bf7\u6c42\u7684\u4fe1\u606f\n                xhr.open("get", "http://localhost:3000/students")\n                // \u53d1\u9001\u8bf7\u6c42\n                xhr.send()\n            }\n        <\/script>\n    </body>\n')),(0,o.kt)("h2",{id:"fetch"},"fetch"),(0,o.kt)("h3",{id:"\u7b80\u4ecb-2"},"\u7b80\u4ecb"),(0,o.kt)("p",null,"\u200b                    ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/fetch"},"fetch")),(0,o.kt)("p",null,"\u200b                        ","-"," fetch\u662fxhr\u7684\u5347\u7ea7\u7248\uff0c\u91c7\u7528\u7684\u662f",(0,o.kt)("strong",{parentName:"p"},"Promise API")),(0,o.kt)("p",null,"\u200b                        ","-"," \u4f5c\u7528\u548cAJAX\u662f\u4e00\u6837\u7684\uff0c\u4f46\u662f\u4f7f\u7528\u8d77\u6765\u66f4\u52a0\u53cb\u597d"),(0,o.kt)("p",null,"\u200b                        ","-"," fetch\u539f\u751fjs\u5c31\u652f\u6301\u7684\u4e00\u79cdajax\u8bf7\u6c42\u7684\u65b9\u5f0f"),(0,o.kt)("h3",{id:"\u57fa\u672c\u7528\u6cd5"},"\u57fa\u672c\u7528\u6cd5"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"}," fetch(resource)\n fetch(resource, options)\n")),(0,o.kt)("h3",{id:"get"},"get"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'                fetch("http://localhost:3000/students")\n                    .then((res) => {\n                        if(res.status === 200){\n                            // res.json() \u53ef\u4ee5\u7528\u6765\u8bfb\u53d6json\u683c\u5f0f\u7684\u6570\u636e\n                            return res.json()\n                        }else{\n                            throw new Error("\u52a0\u8f7d\u5931\u8d25\uff01")\n                        }\n                    })\n                    .then(res => {\n                        // \u83b7\u53d6\u5230\u6570\u636e\u540e\uff0c\u5c06\u6570\u636e\u6e32\u67d3\u5230\u9875\u9762\u4e2d\n                        if(res.status === "ok"){\n                            console.log(res.data)\n                        }\n                    })\n                    .catch((err) => {\n                        console.log("\u51fa\u9519\u4e86\uff01", err)\n                    })\n')),(0,o.kt)("h3",{id:"post-\u5e26options\u7684\u65b9\u5f0f"},"post-\u5e26options\u7684\u65b9\u5f0f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'                fetch("http://localhost:3000/students", {\n                    method: "post",\n                    \n                    headers:{\n                        // application/x-www-form-urlencoded // \u8868\u5355\u9879\n                        "Content-type":"application/json" // json\u7c7b\u578b\n                    },\n\n                    // \u901a\u8fc7body\u53bb\u53d1\u9001\u6570\u636e\u65f6\uff0c\u5fc5\u987b\u901a\u8fc7\u8bf7\u6c42\u5934\u6765\u6307\u5b9a\u6570\u636e\u7684\u7c7b\u578b\n                    body: JSON.stringify({\n                        name: "\u767d\u9aa8\u7cbe",\n                        age: 16,\n                        gender: "\u5973",\n                        address: "\u767d\u9aa8\u6d1e"\n                    })\n                })\n')),(0,o.kt)("h3",{id:"\u6ce8\u610f"},"\u6ce8\u610f"),(0,o.kt)("p",null,"\u200b fecth\u662f\u539f\u751fjs\u81ea\u5e26\u7684\uff0c\u6240\u4ee5\u6ca1\u6709\u90a3\u4e48\u667a\u80fd\uff0c\u9700\u8981\u624b\u52a8\u914d\u7f6e\u4e00\u4e9b\u53c2\u6570"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'    // Access-Control-Allow-Methods \u5141\u8bb8\u7684\u8bf7\u6c42\u7684\u65b9\u5f0f\n    // Access-Control-Allow-Headers \u5141\u8bb8\u4f20\u9012\u7684\u8bf7\u6c42\u5934    \n res.setHeader("Access-Control-Allow-Methods", "GET,POST,PUT,DELETE,PATCH")\n    res.setHeader("Access-Control-Allow-Headers", "Content-type") // \u5185\u5bb9\u7c7b\u578b\n')),(0,o.kt)("h2",{id:"\u672c\u5730\u5b58\u50a8"},"\u672c\u5730\u5b58\u50a8"),(0,o.kt)("p",null,"\u4f1a\u8bdd\u5b58\u50a8\uff1a",(0,o.kt)("strong",{parentName:"p"},"sessionStorage")),(0,o.kt)("p",null,"\u200b    \u9875\u9762\u5173\u95ed\u800c\u5931\u6548"),(0,o.kt)("p",null,"\u672c\u5730\u5b58\u50a8\uff1a",(0,o.kt)("strong",{parentName:"p"},"localStorage")),(0,o.kt)("p",null,"\u200b    \u957f\u4e45\u5b58\u50a8\uff0c\u9700\u8981\u624b\u52a8\u5220\u9664"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"\u65b9\u6cd5"),(0,o.kt)("th",{parentName:"tr",align:null},"\u4f5c\u7528"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"setItem()"),(0,o.kt)("td",{parentName:"tr",align:null},"\u7528\u6765\u5b58\u50a8\u6570\u636e")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"getItem()"),(0,o.kt)("td",{parentName:"tr",align:null},"\u83b7\u53d6\u6570\u636e")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"removeItem()"),(0,o.kt)("td",{parentName:"tr",align:null},"\u5220\u9664\u6570\u636e")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"clear()"),(0,o.kt)("td",{parentName:"tr",align:null},"\u6e05\u7a7a\u6570\u636e")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'            // sessionStorage.setItem("name", "\u5b59\u609f\u7a7a")\n            // sessionStorage.setItem("age", "18")\n            // sessionStorage.setItem("gender", "\u7537")\n            // sessionStorage.setItem("address", "\u82b1\u679c\u5c71")\n\n            localStorage.setItem("name", "\u5b59\u609f\u7a7a")\n            localStorage.setItem("age", "18")\n            localStorage.setItem("gender", "\u7537")\n            localStorage.setItem("address", "\u82b1\u679c\u5c71")\n\n            // const name = sessionStorage.getItem("name")\n\n            // console.log(name)\n\n            // sessionStorage.removeItem("name")\n\n            sessionStorage.clear()\n')),(0,o.kt)("h3",{id:"\u767b\u5f55"},"\u767b\u5f55"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'// \u5b9a\u4e49\u4e00\u4e2a\u767b\u5f55\u7684\u8def\u7531\napp.post("/login", (req, res) => {\n    // \u83b7\u53d6\u7528\u6237\u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\n    const { username, password } = req.body\n    // \u9a8c\u8bc1\u7528\u6237\u540d\u548c\u5bc6\u7801\n    if (username === "admin" && password === "123123") {\n        // \u767b\u5f55\u6210\u529f\n        res.send({\n            status: "ok",\n            data: { id: "12345", username: "admin", nickname: "\u8d85\u7ea7\u7ba1\u7406\u5458" }\n        })\n    } else {\n        // \u767b\u5f55\u5931\u8d25\n        res.status(403).send({\n            status: "error",\n            data: "\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"\n        })\n    }\n})\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'        <style>\n            table {\n                border-collapse: collapse;\n                width: 50%;\n            }\n\n            td,\n            th {\n                font-size: 20px;\n                text-align: center;\n                border: 1px solid #000;\n            }\n\n            caption {\n                font-size: 30px;\n                font-weight: bold;\n            }\n        </style>\n    </head>\n    <body>\n        <div id="root">\n            <h1>\u8bf7\u767b\u5f55\u4ee5\u540e\u518d\u505a\u64cd\u4f5c</h1>\n            <h2 id="info"></h2>\n            <form>\n                <div>\n                    <input id="username" type="text" />\n                </div>\n                <div>\n                    <input id="password" type="password" />\n                </div>\n                <div>\n                    <button id="login-btn" type="button">\u767b\u5f55</button>\n                </div>\n            </form>\n        </div>\n\n        <script>\n            \n            /* \n                \u95ee\u9898\uff1a\n                    - \u73b0\u5728\u662f\u767b\u5f55\u4ee5\u540e\u76f4\u63a5\u5c06\u7528\u6237\u4fe1\u606f\u5b58\u50a8\u5230\u4e86localStorage\n                    - \u4e3b\u8981\u5b58\u5728\u4e24\u4e2a\u95ee\u9898\uff1a\n                        1.\u6570\u636e\u5b89\u5168\u95ee\u9898\n                        2.\u670d\u52a1\u5668\u4e0d\u77e5\u9053\u4f60\u6709\u6ca1\u6709\u767b\u5f55\n            */\n\n            // \u70b9\u51fblogin-btn\u540e\u5b9e\u73b0\u767b\u5f55\u529f\u80fd\n            const loginBtn = document.getElementById("login-btn")\n            const root = document.getElementById("root")\n\n            function loadData() {\n                fetch("http://localhost:3000/students")\n                    .then((res) => {\n                        if (res.status === 200) {\n                            // res.json() \u53ef\u4ee5\u7528\u6765\u8bfb\u53d6json\u683c\u5f0f\u7684\u6570\u636e\n                            return res.json()\n                        } else {\n                            throw new Error("\u52a0\u8f7d\u5931\u8d25\uff01")\n                        }\n                    })\n                    .then((res) => {\n                        // \u83b7\u53d6\u5230\u6570\u636e\u540e\uff0c\u5c06\u6570\u636e\u6e32\u67d3\u5230\u9875\u9762\u4e2d\n                        if (res.status === "ok") {\n                            // \u521b\u5efa\u4e00\u4e2atable\n                            const dataDiv = document.getElementById("data")\n                            const table = document.createElement("table")\n                            dataDiv.appendChild(table)\n                            table.insertAdjacentHTML(\n                                "beforeend",\n                                "<caption>\u5b66\u751f\u5217\u8868</caption>"\n                            )\n                            table.insertAdjacentHTML(\n                                "beforeend",\n                                `\n                                <thead>\n                                    <tr>\n                                        <th>\u5b66\u53f7</th>    \n                                        <th>\u59d3\u540d</th>    \n                                        <th>\u5e74\u9f84</th>    \n                                        <th>\u6027\u522b</th>    \n                                        <th>\u5730\u5740</th>    \n                                    </tr> \n                                </thead>\n                            `\n                            )\n\n                            const tbody = document.createElement("tbody")\n                            table.appendChild(tbody)\n\n                            // \u904d\u5386\u6570\u636e\n                            for (let stu of res.data) {\n                                tbody.insertAdjacentHTML(\n                                    "beforeend",\n                                    `\n                                    <tr>\n                                        <td>${stu.id}</td>    \n                                        <td>${stu.name}</td>    \n                                        <td>${stu.age}</td>    \n                                        <td>${stu.gender}</td>    \n                                        <td>${stu.address}</td>    \n                                    </tr>\n                                `\n                                )\n                            }\n                        }\n                    })\n                    .catch((err) => {\n                        console.log("\u51fa\u9519\u4e86\uff01", err)\n                    })\n            }\n\n            // \u5224\u65ad\u7528\u6237\u662f\u5426\u767b\u5f55\n            if (localStorage.getItem("nickname")) {\n                // \u7528\u6237\u5df2\u7ecf\u767b\u5f55\n                // \u767b\u5f55\u6210\u529f\n                root.innerHTML = `\n                            <h1>\u6b22\u8fce ${localStorage.getItem(\n                                "nickname"\n                            )} \u56de\u6765\uff01</h1>\n                            <hr>\n                            <button id="load-btn" onclick="loadData()">\u52a0\u8f7d\u6570\u636e</button>\n                            <hr>\n                            <div id="data"></div>\n                        `\n            } else {\n                loginBtn.onclick = () => {\n                    // \u83b7\u53d6\u7528\u6237\u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\n                    const username = document\n                        .getElementById("username")\n                        .value.trim()\n                    const password = document\n                        .getElementById("password")\n                        .value.trim()\n\n                    // \u8c03\u7528fetch\u53d1\u9001\u8bf7\u6c42\u6765\u5b8c\u6210\u767b\u5f55\n                    fetch("http://localhost:3000/login", {\n                        method: "POST",\n                        headers: {\n                            "Content-type": "application/json"\n                        },\n                        body: JSON.stringify({ username, password })\n                    })\n                        .then((res) => res.json())\n                        .then((res) => {\n                            if (res.status !== "ok") {\n                                throw new Error("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef")\n                            }\n\n                            // \u767b\u5f55\u6210\u529f\u4ee5\u540e\uff0c\u9700\u8981\u4fdd\u6301\u7528\u6237\u7684\u767b\u5f55\u7684\u72b6\u6001\uff0c\u9700\u8981\u5c06\u7528\u6237\u7684\u4fe1\u606f\u5b58\u50a8\u5230\u67d0\u4e2a\u5730\u65b9\n                            // \u9700\u8981\u5c06\u7528\u6237\u4fe1\u606f\u5b58\u50a8\u5230\u672c\u5730\u5b58\u50a8\n                            /* \n                            \u6240\u8c13\u7684\u672c\u5730\u5b58\u50a8\u5c31\u662f\u6307\u6d4f\u89c8\u5668\u81ea\u8eab\u7684\u5b58\u50a8\u7a7a\u95f4\uff0c\n                                \u53ef\u4ee5\u5c06\u7528\u6237\u7684\u6570\u636e\u5b58\u50a8\u5230\u6d4f\u89c8\u5668\u5185\u90e8\n                                sessionStorage \u4e2d\u5b58\u50a8\u7684\u6570\u636e \u9875\u9762\u4e00\u5173\u95ed\u5c31\u4f1a\u4e22\u5931\n                                localStorage \u5b58\u50a8\u7684\u65f6\u95f4\u6bd4\u8f83\u957f\n                        */\n\n                            // sessionStorage\n                            // localStorage\n                            // console.log(res)\n                            // \u767b\u5f55\u6210\u529f\uff0c\u5411\u672c\u5730\u5b58\u50a8\u4e2d\u63d2\u5165\u7528\u6237\u7684\u4fe1\u606f\n                            localStorage.setItem("username", res.data.username)\n                            localStorage.setItem("userId", res.data.id)\n                            localStorage.setItem("nickname", res.data.nickname)\n\n                            // \u767b\u5f55\u6210\u529f\n                            root.innerHTML = `\n                            <h1>\u6b22\u8fce ${res.data.nickname} \u56de\u6765\uff01</h1>\n                            <hr>\n                            <button id="load-btn" onclick="loadData()">\u52a0\u8f7d\u6570\u636e</button>\n                            <hr>\n                            <div id="data"></div>\n                        `\n                        })\n                        .catch((err) => {\n                            console.log("\u51fa\u9519\u4e86\uff01", err)\n                            // \u8fd9\u91cc\u662f\u767b\u5f55\u5931\u8d25\n                            document.getElementById("info").innerText =\n                                "\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"\n                        })\n                }\n            }\n        <\/script>\n    </body>\n')),(0,o.kt)("h2",{id:"token"},"token"),(0,o.kt)("h3",{id:"\u7b80\u4ecb-3"},"\u7b80\u4ecb"),(0,o.kt)("p",null,"\u200b                \u95ee\u9898\uff1a"),(0,o.kt)("p",null,"\u200b                    ","-"," \u73b0\u5728\u662f\u767b\u5f55\u4ee5\u540e\u76f4\u63a5\u5c06\u7528\u6237\u4fe1\u606f\u5b58\u50a8\u5230\u4e86localStorage"),(0,o.kt)("p",null,"\u200b                    ","-"," \u4e3b\u8981\u5b58\u5728\u4e24\u4e2a\u95ee\u9898\uff1a"),(0,o.kt)("p",null,"\u200b                        1.\u6570\u636e\u5b89\u5168\u95ee\u9898"),(0,o.kt)("p",null,"\u200b                        2.\u670d\u52a1\u5668\u4e0d\u77e5\u9053\u4f60\u6709\u6ca1\u6709\u767b\u5f55"),(0,o.kt)("p",null,"\u200b                    ","-"," \u89e3\u51b3\u95ee\u9898\uff1a"),(0,o.kt)("p",null,"\u200b                        \u5982\u4f55\u544a\u8bc9\u670d\u52a1\u5668\u5ba2\u6237\u7aef\u7684\u767b\u5f55\u72b6\u6001"),(0,o.kt)("p",null,"\u200b                            ","-"," ",(0,o.kt)("strong",{parentName:"p"},"rest\u98ce\u683c\u7684\u670d\u52a1\u5668\u662f\u65e0\u72b6\u6001\u7684\u670d\u52a1\u5668"),"\uff0c\u6240\u4ee5\u6ce8\u610f\u4e0d\u8981\u5728\u670d\u52a1\u5668\u4e2d\u5b58\u50a8\u7528\u6237\u7684\u6570\u636e"),(0,o.kt)("p",null,"\u200b                            ","-"," \u670d\u52a1\u5668\u4e2d\u4e0d\u80fd\u5b58\u50a8\u7528\u6237\u4fe1\u606f\uff0c\u53ef\u4ee5\u5c06\u7528\u6237\u4fe1\u606f\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u4fdd\u5b58"),(0,o.kt)("p",null,'\u200b                                \u6bd4\u5982\uff1a{id:"xxx", username:"xxx", email:"xxx"}'),(0,o.kt)("p",null,"\u200b                                \u5ba2\u6237\u7aef\u6bcf\u6b21\u8bbf\u95ee\u670d\u52a1\u5668\u65f6\uff0c\u76f4\u63a5\u5c06\u7528\u6237\u4fe1\u606f\u53d1\u56de\uff0c\u670d\u52a1\u5668\u5c31\u53ef\u4ee5\u6839\u636e\u7528\u6237\u4fe1\u606f\u6765\u8bc6\u522b\u7528\u6237\u7684\u8eab\u4efd"),(0,o.kt)("p",null,"\u200b                            ","-"," \u4f46\u662f\u5982\u679c\u5c06\u6570\u636e\u76f4\u63a5\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u540c\u6837\u4f1a\u6709\u6570\u636e\u5b89\u5168\u7684\u95ee\u9898\uff0c"),(0,o.kt)("p",null,"\u200b                                \u6240\u4ee5\u6211\u4eec\u5fc5\u987b\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\uff0c\u52a0\u5bc6\u4ee5\u540e\u5728\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u4fdd\u5b58\uff0c\u8fd9\u6837\u5373\u53ef\u907f\u514d\u6570\u636e\u7684\u6cc4\u9732"),(0,o.kt)("p",null,"\u200b                            ","-"," \u5728node\u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528",(0,o.kt)("inlineCode",{parentName:"p"},"jsonwebtoken"),"\u8fd9\u4e2a\u5305\u6765\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6"),(0,o.kt)("p",null,"\u200b                                ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"https://www.npmjs.com/package/jsonwebtoken"},"jsonwebtoken"),"\uff08jwt\uff09")," --\x3e \u901a\u8fc7\u5bf9json\u52a0\u5bc6\u540e\uff0c\u751f\u6210\u4e00\u4e2aweb\u4e2d\u4f7f\u7528\u7684\u4ee4\u724c"),(0,o.kt)("p",null,"\u200b                            ","-"," \u4f7f\u7528\u6b65\u9aa4\uff1a"),(0,o.kt)("p",null,"\u200b                                1.\u5b89\u88c5"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"                                ```\n  yarn add jsonwebtoken\n                                ```\n")),(0,o.kt)("p",null,"\u200b                                2.\u5f15\u5165"),(0,o.kt)("p",null,"\u200b                                3...."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'// \u5f15\u5165jwt\nconst jwt = require("jsonwebtoken")\n\n// \u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\nconst obj = {\n    name: "swk",\n    age: 18,\n    gender: "\u7537"\n}\n\n// \u4f7f\u7528jwt\u6765\u5bf9json\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\nconst token = jwt.sign(obj, "hellohellohowyou", {\n    expiresIn: "1"\n})\ntry {\n    //\u670d\u52a1\u5668\u6536\u5230\u5ba2\u6237\u7aef\u7684token\u540e\n    const decodeData = jwt.verify(token, "hellohellohowyou")\n\n    console.log(decodeData)\n} catch (e) {\n    // \u8bf4\u660etoken\u89e3\u7801\u5931\u8d25\uff0c\u8bf4\u660etoken\n    console.log("\u65e0\u6548\u7684token")\n}\n')),(0,o.kt)("h3",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'app.use((req, res, next) => {\n    // \u8bbe\u7f6e\u54cd\u5e94\u5934\n    res.setHeader("Access-Control-Allow-Origin", "*")\n    res.setHeader("Access-Control-Allow-Methods", "GET,POST,PUT,DELETE,PATCH")\n    res.setHeader("Access-Control-Allow-Headers", "Content-type,Authorization")\n    // Access-Control-Allow-Origin \u8bbe\u7f6e\u6307\u5b9a\u503c\u65f6\u53ea\u80fd\u8bbe\u7f6e\u4e00\u4e2a\n    // res.setHeader("Access-Control-Allow-Origin", "http://127.0.0.1:5500")\n    // Access-Control-Allow-Methods \u5141\u8bb8\u7684\u8bf7\u6c42\u7684\u65b9\u5f0f\n    // Access-Control-Allow-Headers \u5141\u8bb8\u4f20\u9012\u7684\u8bf7\u6c42\u5934\n    next()\n})\n')),(0,o.kt)("p",null,"\u9700\u8981\u9a8c\u8bc1\u6743\u9650\u7684\u8def\u7531"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'// \u5f15\u5165jwt\nconst jwt = require("jsonwebtoken")\n\n// \u5b9a\u4e49\u4e00\u4e2a\u767b\u5f55\u7684\u8def\u7531\napp.post("/login", (req, res) => {\n    // \u83b7\u53d6\u7528\u6237\u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\n    const { username, password } = req.body\n    // \u9a8c\u8bc1\u7528\u6237\u540d\u548c\u5bc6\u7801\n    if (username === "admin" && password === "123123") {\n        // \u767b\u5f55\u6210\u529f\uff0c\u751f\u6210token\n        const token = jwt.sign(\n            {\n                id: "12345",\n                username: "admin",\n                nickname: "\u8d85\u7ea7\u7ba1\u7406\u5458"\n            },\n            "chaojianquanmima",\n            {\n                expiresIn: "1d"\n            }\n        )\n\n        // \u767b\u5f55\u6210\u529f\n        res.send({\n            status: "ok",\n            data: {\n                token,\n                nickname: "\u8d85\u7ea7\u7ba1\u7406\u5458"\n            }\n        })\n    } else {\n        // \u767b\u5f55\u5931\u8d25\n        res.status(403).send({\n            status: "error",\n            data: "\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"\n        })\n    }\n})\n\n// \u7edf\u4e00\u7684api\n// \u5b9a\u4e49\u5b66\u751f\u4fe1\u606f\u7684\u8def\u7531\napp.get("/students", (req, res) => {\n    try {\n        // \u8fd9\u4e2a\u8def\u7531\u5fc5\u987b\u5728\u7528\u6237\u767b\u5f55\u540e\u624d\u80fd\u8bbf\u95ee\n        // \u9700\u8981\u68c0\u67e5\u7528\u6237\u662f\u5426\u767b\u5f55\n        // \u8bfb\u53d6\u8bf7\u6c42\u5934\n        const token = req.get("Authorization").split(" ")[1]\n\n        // \u5bf9token\u8fdb\u884c\u89e3\u7801\n        const decodeToken = jwt.verify(token, "chaojianquanmima")\n        console.log(decodeToken)\n        // \u89e3\u7801\u6210\u529f\uff0ctoken\u6709\u6548\n        // \u8fd4\u56de\u5b66\u751f\u4fe1\u606f\n        res.send({\n            status: "ok",\n            data: STU_ARR\n        })\n    } catch (e) {\n        // \u89e3\u7801\u9519\u8bef\uff0c\u7528\u6237token\u65e0\u6548\n        res.status(403).send({\n            status: "error",\n            data: "token\u65e0\u6548"\n        })\n    }\n})\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'            // \u70b9\u51fblogin-btn\u540e\u5b9e\u73b0\u767b\u5f55\u529f\u80fd\n            const loginBtn = document.getElementById("login-btn")\n            const root = document.getElementById("root")\n\n            function loadData() {\n\n                // \u5f53\u6211\u4eec\u8bbf\u95ee\u7684\u662f\u9700\u8981\u6743\u9650\u7684api\u65f6\uff0c\u5fc5\u987b\u5728\u8bf7\u6c42\u4e2d\u9644\u52a0\u6743\u9650\u7684\u4fe1\u606f\n                // token\u4e00\u822c\u90fd\u662f\u901a\u8fc7\u8bf7\u6c42\u5934\u6765\u53d1\u9001\n                const token = localStorage.getItem("token")\n                fetch("http://localhost:3000/students", {\n                    headers:{\n                        // "Bearer xxxxxx"\n                        "Authorization":`Bearer ${token}`\n                    }\n                })\n                    .then((res) => {\n                        if (res.status === 200) {\n                            // res.json() \u53ef\u4ee5\u7528\u6765\u8bfb\u53d6json\u683c\u5f0f\u7684\u6570\u636e\n                            return res.json()\n                        } else {\n                            throw new Error("\u52a0\u8f7d\u5931\u8d25\uff01")\n                        }\n                    })\n                    .then((res) => {\n                        // \u83b7\u53d6\u5230\u6570\u636e\u540e\uff0c\u5c06\u6570\u636e\u6e32\u67d3\u5230\u9875\u9762\u4e2d\n                        if (res.status === "ok") {\n                            // \u521b\u5efa\u4e00\u4e2atable\n                            const dataDiv = document.getElementById("data")\n                            const table = document.createElement("table")\n                            dataDiv.appendChild(table)\n                            table.insertAdjacentHTML(\n                                "beforeend",\n                                "<caption>\u5b66\u751f\u5217\u8868</caption>"\n                            )\n                            table.insertAdjacentHTML(\n                                "beforeend",\n                                `\n                                <thead>\n                                    <tr>\n                                        <th>\u5b66\u53f7</th>    \n                                        <th>\u59d3\u540d</th>    \n                                        <th>\u5e74\u9f84</th>    \n                                        <th>\u6027\u522b</th>    \n                                        <th>\u5730\u5740</th>    \n                                    </tr> \n                                </thead>\n                            `\n                            )\n\n                            const tbody = document.createElement("tbody")\n                            table.appendChild(tbody)\n\n                            // \u904d\u5386\u6570\u636e\n                            for (let stu of res.data) {\n                                tbody.insertAdjacentHTML(\n                                    "beforeend",\n                                    `\n                                    <tr>\n                                        <td>${stu.id}</td>    \n                                        <td>${stu.name}</td>    \n                                        <td>${stu.age}</td>    \n                                        <td>${stu.gender}</td>    \n                                        <td>${stu.address}</td>    \n                                    </tr>\n                                `\n                                )\n                            }\n                        }\n                    })\n                    .catch((err) => {\n                        console.log("\u51fa\u9519\u4e86\uff01", err)\n                    })\n            }\n\n            // \u5224\u65ad\u7528\u6237\u662f\u5426\u767b\u5f55\n            if (localStorage.getItem("token")) {\n                // \u7528\u6237\u5df2\u7ecf\u767b\u5f55\n                // \u767b\u5f55\u6210\u529f\n                root.innerHTML = `\n                            <h1>\u6b22\u8fce ${localStorage.getItem(\n                                "nickname"\n                            )} \u56de\u6765\uff01</h1>\n                            <hr>\n                            <button id="load-btn" onclick="loadData()">\u52a0\u8f7d\u6570\u636e</button>\n                            <button onclick="localStorage.clear()">\u6ce8\u9500</button>\n                            <hr>\n                            <div id="data"></div>\n                        `\n            } else {\n                loginBtn.onclick = () => {\n                    // \u83b7\u53d6\u7528\u6237\u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\n                    const username = document\n                        .getElementById("username")\n                        .value.trim()\n                    const password = document\n                        .getElementById("password")\n                        .value.trim()\n\n                    // \u8c03\u7528fetch\u53d1\u9001\u8bf7\u6c42\u6765\u5b8c\u6210\u767b\u5f55\n                    fetch("http://localhost:3000/login", {\n                        method: "POST",\n                        headers: {\n                            "Content-type": "application/json"\n                        },\n                        body: JSON.stringify({ username, password })\n                    })\n                        .then((res) => res.json())\n                        .then((res) => {\n                            if (res.status !== "ok") {\n                                throw new Error("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef")\n                            }\n\n                            // \u767b\u5f55\u6210\u529f\u4ee5\u540e\uff0c\u9700\u8981\u4fdd\u6301\u7528\u6237\u7684\u767b\u5f55\u7684\u72b6\u6001\uff0c\u9700\u8981\u5c06\u7528\u6237\u7684\u4fe1\u606f\u5b58\u50a8\u5230\u67d0\u4e2a\u5730\u65b9\n                            // \u767b\u5f55\u6210\u529f\uff0c\u5411\u672c\u5730\u5b58\u50a8\u4e2d\u63d2\u5165\u7528\u6237\u7684\u4fe1\u606f\n                            localStorage.setItem("token", res.data.token)\n                            localStorage.setItem("nickname", res.data.nickname)\n\n                            // \u767b\u5f55\u6210\u529f\n                            root.innerHTML = `\n                            <h1>\u6b22\u8fce ${res.data.nickname} \u56de\u6765\uff01</h1>\n                            <hr>\n                            <button id="load-btn" onclick="loadData()">\u52a0\u8f7d\u6570\u636e</button>\n                            <button onclick="localStorage.clear()">\u6ce8\u9500</button>\n                            <hr>\n                            <div id="data"></div>\n                        `\n                        })\n                        .catch((err) => {\n                            console.log("\u51fa\u9519\u4e86\uff01", err)\n                            // \u8fd9\u91cc\u662f\u767b\u5f55\u5931\u8d25\n                            document.getElementById("info").innerText =\n                                "\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"\n                        })\n                }\n            }\n')),(0,o.kt)("h2",{id:"fetch\u8865\u5145"},"fetch\u8865\u5145"),(0,o.kt)("h3",{id:"abortcontroller\u7ec8\u6b62\u8bf7\u6c42"},(0,o.kt)("a",{parentName:"h3",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/AbortController/AbortController"},"AbortController"),"\u2014\u7ec8\u6b62\u8bf7\u6c42"),(0,o.kt)("h3",{id:"fetch\u7684asyncawait\u7528\u6cd5"},"fetch\u7684async\u3001await\u7528\u6cd5"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'    <body>\n        <button id="btn01">\u70b9\u6211\u4e00\u4e0b</button>\n\n        <button id="btn02">\u53d6\u6d88</button>\n        <button id="btn03">\u6309\u94ae3\u53f7</button>\n        <script>\n            // \u83b7\u53d6\u6309\u94ae\n            const btn01 = document.getElementById("btn01")\n            const btn02 = document.getElementById("btn02")\n            const btn03 = document.getElementById("btn03")\n\n            let controller;\n\n            btn01.onclick = () => {\n                // \u521b\u5efa\u4e00\u4e2aAbortController\n                controller = new AbortController()\n                // setTimeout(()=>{\n                //     controller.abort()\n                // }, 3000)\n\n                // \u7ec8\u6b62\u8bf7\u6c42\n                // \u70b9\u51fb\u6309\u94ae\u5411test\u53d1\u9001\u8bf7\u6c42\n                fetch("http://localhost:3000/test", {\n                    signal: controller.signal\n                })\n                    .then((res) => console.log(res))\n                    .catch((err) => console.log("\u51fa\u9519\u4e86", err))\n            }\n\n            btn02.onclick = () => {\n                controller && controller.abort()\n            }\n\n            btn03.onclick = async () => {\n                // fetch("http://localhost:3000/test").then()...\n                // \u6ce8\u610f\uff1a\u5c06promise\u6539\u5199\u4e3aawait\u65f6\uff0c\u4e00\u5b9a\u8981\u5199try-catch\n\n                try {\n                    const res = await fetch("http://localhost:3000/students")\n                    const data = await res.json()\n                    console.log(data)\n                } catch (e) {\n                    console.log("\u51fa\u9519\u4e86", e)\n                }\n            }\n        <\/script>\n    </body>\n')),(0,o.kt)("h2",{id:"axios"},"axios"),(0,o.kt)("h3",{id:"\u7b80\u4ecb-4"},"\u7b80\u4ecb"),(0,o.kt)("p",null,"\u200b  \u57fa\u4e8epromise\u53ef\u4ee5\u7528\u4e8e\u6d4f\u89c8\u5668\u548cnode.js\u7684\u7f51\u7edc\u8bf7\u6c42\u5e93"),(0,o.kt)("p",null,"\u200b  ",(0,o.kt)("a",{parentName:"p",href:"https://www.axios-http.cn/docs/intro"},"Axios")," \u662f\u4e00\u4e2a\u57fa\u4e8e ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"promise"))," \u7f51\u7edc\u8bf7\u6c42\u5e93\uff0c\u4f5c\u7528\u4e8e",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.org/"},(0,o.kt)("inlineCode",{parentName:"a"},"node.js"))," \u548c\u6d4f\u89c8\u5668\u4e2d\u3002 \u5b83\u662f ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"isomorphic"))," \u7684(\u5373\u540c\u4e00\u5957\u4ee3\u7801\u53ef\u4ee5\u8fd0\u884c\u5728\u6d4f\u89c8\u5668\u548cnode.js\u4e2d)\u3002\u5728\u670d\u52a1\u7aef\u5b83\u4f7f\u7528\u539f\u751f node.js ",(0,o.kt)("inlineCode",{parentName:"p"},"http")," \u6a21\u5757, \u800c\u5728\u5ba2\u6237\u7aef (\u6d4f\u89c8\u7aef) \u5219\u4f7f\u7528 ",(0,o.kt)("strong",{parentName:"p"},"XMLHttpRequests"),"\u3002"),(0,o.kt)("h3",{id:"\u57fa\u672c\u4f7f\u7528"},"\u57fa\u672c\u4f7f\u7528"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u6ce8\u610f")),(0,o.kt)("p",null,"\u200b ",(0,o.kt)("strong",{parentName:"p"},"axios"),"\u5f88\u667a\u80fd\uff0c\u76f8\u6bd4\u8f83\u4e0e",(0,o.kt)("strong",{parentName:"p"},"fetch"),"\uff0c\u80fd\u81ea\u52a8\u5e2e\u5fd9\u5904\u7406\u8bf7\u6c42\u5934\uff0c",(0,o.kt)("strong",{parentName:"p"},"json"),"\u8f6c\u6362\u6570\u636e\u554a\u3002"),(0,o.kt)("p",null,"\u200b ",(0,o.kt)("strong",{parentName:"p"},"\u9ed8\u8ba4\u72b6\u6001\u7801200\u2014300"),"\uff0c\u53ef\u4ee5\u66f4\u6539\u3002\u72b6\u6001\u7801\u4e0d\u7b26\u5408\u90fd\u8d70",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"catch"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"><\/script>\n    </head>\n    <body>\n        <button id="btn1">\u6309\u94ae1</button>\n        <button id="btn2">\u6309\u94ae2</button>\n\n        <script>\n            document.getElementById("btn1").onclick = () => {\n                // \u76f4\u63a5\u8c03\u7528axios\u53d1\u9001\u8bf7\u6c42\n                // axios(config)\n                axios({\n                    method: "post",\n                    url: "http://localhost:3000/students",\n                    data: {\n                        name: "\u5510\u50e7",\n                        age: 18,\n                        gender: "\u7537",\n                        address: "\u5973\u513f\u56fd"\n                    } // \u8bf7\u6c42\u53c2\u6570\n\n                    // data:"name=swk&age=18"\n                })\n                    .then((result) => {\n                        // result\u662faxios\u5c01\u88c5\u8fc7\n                        console.log(result.data)\n                    })\n                    .catch((err) => {\n                        console.log("\u51fa\u9519\u4e86\uff01", err)\n                    })\n            }\n\n\n            document.getElementById("btn2").onclick = () => {\n                // \u76f4\u63a5\u8c03\u7528axios\u53d1\u9001\u8bf7\u6c42\n                // axios(config)\n                axios({\n                    method: "get",\n                    url: "http://localhost:3000/students",\n                   \n                })\n                    .then((result) => {\n                        // axios\u9ed8\u8ba4\u53ea\u4f1a\u5728\u54cd\u5e94\u72b6\u6001\u4e3a2xx\u65f6\u624d\u4f1a\u8c03\u7528then\n                        // result\u662faxios\u5c01\u88c5\u8fc7\n                        console.log(result.data)\n                    })\n                    .catch((err) => {\n                        console.log("\u51fa\u9519\u4e86\uff01", err)\n                    })\n            }\n        <\/script>\n    </body>\n')),(0,o.kt)("h3",{id:"\u914d\u7f6e\u5bf9\u8c61"},(0,o.kt)("a",{parentName:"h3",href:"https://www.axios-http.cn/docs/req_config"},"\u914d\u7f6e\u5bf9\u8c61")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'        <script>\n            document.getElementById("btn1").onclick = () => {\n                // \u76f4\u63a5\u8c03\u7528axios\u53d1\u9001\u8bf7\u6c42\n                // axios(config)\n                axios({\n                    // baseURL \u6307\u5b9a\u670d\u52a1\u5668\u7684\u6839\u76ee\u5f55\uff08\u8def\u5f84\u7684\u524d\u7f00\uff09\n                    baseURL:"http://localhost:3000",\n                    // \u8bf7\u6c42\u5730\u5740\n                    url:"test",\n\n                    // \u8bf7\u6c42\u65b9\u6cd5\uff0c\u9ed8\u8ba4\u662fget\n                    method:"get",\n\n                    // \u6307\u5b9a\u8bf7\u6c42\u5934\n                    // headers:{"Content-type":"application/json"}\n\n                    // \u8bf7\u6c42\u4f53\n                    // data:"name=\u5510\u50e7&age=16"\n                    data: {\n                        name: "\u5510\u50e7",\n                        age: 18,\n                        gender: "\u7537",\n                        address: "\u5973\u513f\u56fd"\n                    },\n\n                    // params \u7528\u6765\u6307\u5b9a\u8def\u5f84\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\n                    params:{\n                        id:1,\n                        name:"swk"\n                    },\n\n                    //timeout \u8fc7\u671f\u65f6\u95f4\n                    timeout:1000,\n\n                    // \u7528\u6765\u7ec8\u6b62\u8bf7\u6c42\n                    // signal\n\n                    // transformRequest \u53ef\u4ee5\u7528\u6765\u5904\u7406\u8bf7\u6c42\u6570\u636e\uff08data\uff09\n                    // \u5b83\u9700\u8981\u4e00\u4e2a\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0c\u6570\u7ec4\u53ef\u4ee5\u63a5\u6536\u591a\u4e2a\u51fd\u6570\uff0c\u8bf7\u6c42\u53d1\u9001\u65f6\u591a\u4e2a\u51fd\u6570\u4f1a\u6309\u7167\u987a\u5e8f\u6267\u884c\n                    // \u51fd\u6570\u5728\u6267\u884c\u65f6\uff0c\u4f1a\u63a5\u6536\u5230\u4e24\u4e2a\u53c2\u6570data\u548cheaders\n                    // transformRequest:[function(data, headers){\n                    //     // \u53ef\u4ee5\u5728\u51fd\u6570\u4e2d\u5bf9data\u548cheaders\u8fdb\u884c\u4fee\u6539\n                    //     data.name = "\u732a\u516b\u6212"\n                    //     headers["Content-Type"] = "application/json"\n                    //     return data\n                    // }, function(data, headers){\n                    //     // \u6700\u540e\u4e00\u4e2a\u51fd\u6570\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u624d\u80fd\u4f7f\u5f97\u6570\u636e\u6709\u6548\n                    //     return JSON.stringify(data)\n                    // }]\n                    \n                })\n                    .then((result) => {\n                        // result\u662faxios\u5c01\u88c5\u8fc7\n                        console.log(result.data)\n                    })\n                    .catch((err) => {\n                        console.log("\u51fa\u9519\u4e86\uff01", err)\n                    })\n            }\n        <\/script>\n    </body>\n')),(0,o.kt)("h3",{id:"\u53d6\u6d88\u8bf7\u6c42"},(0,o.kt)("a",{parentName:"h3",href:"https://www.axios-http.cn/docs/cancellation"},"\u53d6\u6d88\u8bf7\u6c42")),(0,o.kt)("p",null,"Axios \u652f\u6301\u4ee5 fetch API \u65b9\u5f0f\u2014\u2014 ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/AbortController"},(0,o.kt)("inlineCode",{parentName:"a"},"AbortController"))," \u53d6\u6d88\u8bf7\u6c42\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const controller = new AbortController();\n\naxios.get('/foo/bar', {\n   signal: controller.signal\n}).then(function(response) {\n   //...\n});\n// \u53d6\u6d88\u8bf7\u6c42\ncontroller.abort()\n")),(0,o.kt)("h3",{id:"\u54cd\u5e94\u7ed3\u6784"},(0,o.kt)("a",{parentName:"h3",href:"https://www.axios-http.cn/docs/res_schema"},"\u54cd\u5e94\u7ed3\u6784")),(0,o.kt)("p",null,"\u4e00\u4e2a\u8bf7\u6c42\u7684\u54cd\u5e94\u5305\u542b\u4ee5\u4e0b\u4fe1\u606f\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"{\n  // `data` \u7531\u670d\u52a1\u5668\u63d0\u4f9b\u7684\u54cd\u5e94\n  data: {},\n\n  // `status` \u6765\u81ea\u670d\u52a1\u5668\u54cd\u5e94\u7684 HTTP \u72b6\u6001\u7801\n  status: 200,\n\n  // `statusText` \u6765\u81ea\u670d\u52a1\u5668\u54cd\u5e94\u7684 HTTP \u72b6\u6001\u4fe1\u606f\n  statusText: 'OK',\n\n  // `headers` \u662f\u670d\u52a1\u5668\u54cd\u5e94\u5934\n  // \u6240\u6709\u7684 header \u540d\u79f0\u90fd\u662f\u5c0f\u5199\uff0c\u800c\u4e14\u53ef\u4ee5\u4f7f\u7528\u65b9\u62ec\u53f7\u8bed\u6cd5\u8bbf\u95ee\n  // \u4f8b\u5982: `response.headers['content-type']`\n  headers: {},\n\n  // `config` \u662f `axios` \u8bf7\u6c42\u7684\u914d\u7f6e\u4fe1\u606f\n  config: {},\n\n  // `request` \u662f\u751f\u6210\u6b64\u54cd\u5e94\u7684\u8bf7\u6c42\n  // \u5728node.js\u4e2d\u5b83\u662f\u6700\u540e\u4e00\u4e2aClientRequest\u5b9e\u4f8b (in redirects)\uff0c\n  // \u5728\u6d4f\u89c8\u5668\u4e2d\u5219\u662f XMLHttpRequest \u5b9e\u4f8b\n  request: {}\n}\n")),(0,o.kt)("h3",{id:"\u9ed8\u8ba4\u914d\u7f6e"},(0,o.kt)("a",{parentName:"h3",href:"https://www.axios-http.cn/docs/config_defaults"},"\u9ed8\u8ba4\u914d\u7f6e")),(0,o.kt)("p",null,"\u53ef\u4ee5\u6307\u5b9a\u9ed8\u8ba4\u914d\u7f6e\uff0c\u5b83\u5c06\u4f5c\u7528\u4e8e\u6bcf\u4e2a\u8bf7\u6c42\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'    <script>\n            axios.defaults.baseURL = "http://localhost:3000"\n            axios.defaults.headers.common[\n                "Authorization"\n            ] = `Bearer ${localStorage.getItem("token")}`\n\n            document.getElementById("btn1").onclick = () => {\n                axios({\n                    url: "students",\n                    method: "post",\n                    data: {\n                        name: "\u5510\u50e7",\n                        age: 18,\n                        gender: "\u7537",\n                        address: "\u5973\u513f\u56fd"\n                    },\n                    timeout: 1000\n                })\n                    .then((result) => {\n                        // result\u662faxios\u5c01\u88c5\u8fc7\n                        console.log(result.data)\n                    })\n                    .catch((err) => {\n                        console.log("\u51fa\u9519\u4e86\uff01", err)\n                    })\n            }\n        <\/script>\n    </body>\n')),(0,o.kt)("h3",{id:"\u81ea\u5b9a\u4e49\u5b9e\u4f8b\u9ed8\u8ba4\u503c"},(0,o.kt)("a",{parentName:"h3",href:"https://www.axios-http.cn/docs/config_defaults"},"\u81ea\u5b9a\u4e49\u5b9e\u4f8b\u9ed8\u8ba4\u503c")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'            axios.defaults.baseURL = "http://localhost:3000"\n            axios.defaults.headers.common[\n                "Authorization"\n            ] = `Bearer ${localStorage.getItem("token")}`\n\n            // axios\u5b9e\u4f8b\u76f8\u5f53\u4e8e\u662faxios\u7684\u4e00\u4e2a\u526f\u672c\uff0c\u5b83\u7684\u529f\u80fd\u548caxios\u4e00\u6837\n            // axios\u7684\u9ed8\u8ba4\u914d\u7f6e\u5728\u5b9e\u4f8b\u4e5f\u540c\u6837\u4f1a\u751f\u6548\n            //  \u4f46\u662f\u6211\u53ef\u4ee5\u5355\u72ec\u4fee\u6539axios\u5b9e\u4f8b\u7684\u9ed8\u8ba4\u914d\u7f6e\n            // const instance = axios.create({\n            //     baseURL:"http://localhost:4000"\n            // })\n\n            // const instance = axios.create()\n            // instance.defaults.baseURL = "xxx"\n\n\n            document.getElementById("btn1").onclick = () => {\n                instance\n                    .get("students")\n                    .then((res) => console.log(res.data))\n                    .catch((err) => {\n                        console.log("\u51fa\u9519\u4e86", err)\n                    })\n            }\n')),(0,o.kt)("h3",{id:"\u62e6\u622a\u5668"},(0,o.kt)("a",{parentName:"h3",href:"https://www.axios-http.cn/docs/interceptors"},"\u62e6\u622a\u5668")),(0,o.kt)("p",null,"\u5728\u8bf7\u6c42\u6216\u54cd\u5e94\u88ab then \u6216 catch \u5904\u7406\u524d\u62e6\u622a\u5b83\u4eec\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u6dfb\u52a0\u8bf7\u6c42\u62e6\u622a\u5668\naxios.interceptors.request.use(function (config) {\n    // \u5728\u53d1\u9001\u8bf7\u6c42\u4e4b\u524d\u505a\u4e9b\u4ec0\u4e48\n    return config;\n  }, function (error) {\n    // \u5bf9\u8bf7\u6c42\u9519\u8bef\u505a\u4e9b\u4ec0\u4e48\n    return Promise.reject(error);\n  });\n\n// \u6dfb\u52a0\u54cd\u5e94\u62e6\u622a\u5668\naxios.interceptors.response.use(function (response) {\n    // 2xx \u8303\u56f4\u5185\u7684\u72b6\u6001\u7801\u90fd\u4f1a\u89e6\u53d1\u8be5\u51fd\u6570\u3002\n    // \u5bf9\u54cd\u5e94\u6570\u636e\u505a\u70b9\u4ec0\u4e48\n    return response;\n  }, function (error) {\n    // \u8d85\u51fa 2xx \u8303\u56f4\u7684\u72b6\u6001\u7801\u90fd\u4f1a\u89e6\u53d1\u8be5\u51fd\u6570\u3002\n    // \u5bf9\u54cd\u5e94\u9519\u8bef\u505a\u70b9\u4ec0\u4e48\n    return Promise.reject(error);\n  });\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'   axios.defaults.baseURL = "http://localhost:3000"\n\n            const myAxios = axios.create()\n\n            // axios\u7684\u62e6\u622a\u5668\u53ef\u4ee5\u5bf9\u8bf7\u6c42\u6216\u54cd\u5e94\u8fdb\u884c\u62e6\u622a\uff0c\u5728\u8bf7\u6c42\u53d1\u9001\u524d\u548c\u54cd\u5e94\u8bfb\u53d6\u524d\u5904\u7406\u6570\u636e\n            // \u62e6\u622a\u5668\u53ea\u5bf9\u5f53\u524d\u7684\u5b9e\u4f8b\u6709\u6548\n            // \u6dfb\u52a0\u8bf7\u6c42\u62e6\u622a\u5668\n            axios.interceptors.request.use(\n                function (config) {\n                    // console.log("\u62e6\u622a\u5668\u6267\u884c\u4e86")\n                    // config \u8868\u793aaxios\u4e2d\u7684\u914d\u7f6e\u5bf9\u8c61\n                    // config.data.name = "\u732a\u54c8\u54c8"\n                    config.headers["Authorization"] = `Bearer ${localStorage.getItem("token")}`\n\n                    // \u5728\u53d1\u9001\u8bf7\u6c42\u4e4b\u524d\u505a\u4e9b\u4ec0\u4e48\n                    return config\n                },\n                function (error) {\n                    // \u5bf9\u8bf7\u6c42\u9519\u8bef\u505a\u4e9b\u4ec0\u4e48\n                    return Promise.reject(error)\n                }\n            )\n\n            document.getElementById("btn1").onclick = () => {\n                myAxios({\n                    url: "students",\n                    method: "post",\n                    data: { name: "\u732a\u516b\u6212" }\n                })\n                    .then((res) => console.log(res.data))\n                    .catch((err) => {\n                        console.log("\u51fa\u9519\u4e86", err)\n                    })\n            }\n')),(0,o.kt)("h3",{id:"\u79fb\u9664\u62e6\u622a\u5668"},"\u79fb\u9664\u62e6\u622a\u5668"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const myInterceptor = axios.interceptors.request.use(function () {/*...*/});\naxios.interceptors.request.eject(myInterceptor);\n")))}u.isMDXComponent=!0}}]);