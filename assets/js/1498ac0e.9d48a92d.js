"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[612],{3905:(n,e,t)=>{t.d(e,{Zo:()=>u,kt:()=>c});var l=t(7294);function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,l)}return t}function s(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a(Object(t),!0).forEach((function(e){r(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function o(n,e){if(null==n)return{};var t,l,r=function(n,e){if(null==n)return{};var t,l,r={},a=Object.keys(n);for(l=0;l<a.length;l++)t=a[l],e.indexOf(t)>=0||(r[t]=n[t]);return r}(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(l=0;l<a.length;l++)t=a[l],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}var p=l.createContext({}),i=function(n){var e=l.useContext(p),t=e;return n&&(t="function"==typeof n?n(e):s(s({},e),n)),t},u=function(n){var e=i(n.components);return l.createElement(p.Provider,{value:e},n.children)},m="mdxType",k={inlineCode:"code",wrapper:function(n){var e=n.children;return l.createElement(l.Fragment,{},e)}},d=l.forwardRef((function(n,e){var t=n.components,r=n.mdxType,a=n.originalType,p=n.parentName,u=o(n,["components","mdxType","originalType","parentName"]),m=i(t),d=r,c=m["".concat(p,".").concat(d)]||m[d]||k[d]||a;return t?l.createElement(c,s(s({ref:e},u),{},{components:t})):l.createElement(c,s({ref:e},u))}));function c(n,e){var t=arguments,r=e&&e.mdxType;if("string"==typeof n||r){var a=t.length,s=new Array(a);s[0]=d;var o={};for(var p in e)hasOwnProperty.call(e,p)&&(o[p]=e[p]);o.originalType=n,o[m]="string"==typeof n?n:r,s[1]=o;for(var i=2;i<a;i++)s[i]=t[i];return l.createElement.apply(null,s)}return l.createElement.apply(null,t)}d.displayName="MDXCreateElement"},4061:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>p,contentTitle:()=>s,default:()=>k,frontMatter:()=>a,metadata:()=>o,toc:()=>i});var l=t(7462),r=(t(7294),t(3905));const a={},s="nodejs",o={unversionedId:"node.js/node.js",id:"node.js/node.js",title:"nodejs",description:"\u7b80\u4ecb",source:"@site/docs/node.js/node.js.md",sourceDirName:"node.js",slug:"/node.js/",permalink:"/node.js/",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",next:{title:"Rest",permalink:"/rest_ajax_fetch_axios/"}},p={},i=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"nvm\u5b89\u88c5",id:"nvm\u5b89\u88c5",level:2},{value:"\u540c\u6b65\u5f02\u6b65",id:"\u540c\u6b65\u5f02\u6b65",level:2},{value:"\u8fdb\u7a0b\u548c\u7ebf\u7a0b",id:"\u8fdb\u7a0b\u548c\u7ebf\u7a0b",level:3},{value:"\u540c\u6b65",id:"\u540c\u6b65",level:3},{value:"\u5f02\u6b65",id:"\u5f02\u6b65",level:3},{value:"Promise",id:"promise",level:2},{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd",level:3},{value:"\u521b\u5efaPromise",id:"\u521b\u5efapromise",level:3},{value:"\u4ecePromise\u4e2d\u8bfb\u53d6\u6570\u636e",id:"\u4ecepromise\u4e2d\u8bfb\u53d6\u6570\u636e",level:3},{value:"Promise\u4e2d\u7ef4\u62a4\u4e86\u4e24\u4e2a\u9690\u85cf\u5c5e\u6027\uff1a",id:"promise\u4e2d\u7ef4\u62a4\u4e86\u4e24\u4e2a\u9690\u85cf\u5c5e\u6027",level:3},{value:"\u6d41\u7a0b\uff1a",id:"\u6d41\u7a0b",level:3},{value:"cath,finally",id:"cathfinally",level:3},{value:"Promise\u8fdb\u9636",id:"promise\u8fdb\u9636",level:2},{value:"\u8be6\u89e3",id:"\u8be6\u89e3",level:3},{value:"\u9759\u6001\u65b9\u6cd5",id:"\u9759\u6001\u65b9\u6cd5",level:3},{value:"\u5b8f\u4efb\u52a1\u5fae\u4efb\u52a1",id:"\u5b8f\u4efb\u52a1\u5fae\u4efb\u52a1",level:2},{value:"<strong>Promise\u7684\u6267\u884c\u539f\u7406</strong>",id:"promise\u7684\u6267\u884c\u539f\u7406",level:3},{value:"\u7ec3\u4e60",id:"\u7ec3\u4e60",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:3},{value:"\u624b\u5199Promise",id:"\u624b\u5199promise",level:2},{value:"\u6ce8\u610f",id:"\u6ce8\u610f",level:3},{value:"\u7b54\u7591",id:"\u7b54\u7591",level:2},{value:"async\u3001await",id:"asyncawait",level:2},{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd-1",level:2},{value:"CommonJS\u89c4\u8303",id:"commonjs\u89c4\u8303",level:2},{value:"- \u5f15\u5165\u6a21\u5757",id:"--\u5f15\u5165\u6a21\u5757",level:3},{value:"\u66b4\u9732\u6a21\u5757\u5185\u5bb9",id:"\u66b4\u9732\u6a21\u5757\u5185\u5bb9",level:3},{value:"ES6\u6a21\u5757\u5316\u89c4\u8303",id:"es6\u6a21\u5757\u5316\u89c4\u8303",level:2},{value:"\u5bfc\u51fa",id:"\u5bfc\u51fa",level:3},{value:"\u5bfc\u5165",id:"\u5bfc\u5165",level:3},{value:"ES6 \u6a21\u5757\u4e0e CommonJS \u6a21\u5757\u7684\u5dee\u5f02",id:"es6-\u6a21\u5757\u4e0e-commonjs-\u6a21\u5757\u7684\u5dee\u5f02",level:2},{value:"\u6838\u5fc3\u6a21\u5757",id:"\u6838\u5fc3\u6a21\u5757",level:2},{value:"process",id:"process",level:3},{value:"path",id:"path",level:3},{value:"fs",id:"fs",level:3},{value:"\u540c\u6b65\u548c\u5f02\u6b65\u8bfb\u53d6\u7248fs",id:"\u540c\u6b65\u548c\u5f02\u6b65\u8bfb\u53d6\u7248fs",level:4},{value:"promise\u7248fs",id:"promise\u7248fs",level:4},{value:"async\u3001awiat\u8bed\u6cd5\u7cd6\u7248fs",id:"asyncawiat\u8bed\u6cd5\u7cd6\u7248fs",level:4},{value:"fs\u7684\u5b9e\u4f8b\u65b9\u6cd5",id:"fs\u7684\u5b9e\u4f8b\u65b9\u6cd5",level:4},{value:"npm",id:"npm",level:2},{value:"<strong>package.json</strong>",id:"packagejson",level:3},{value:"<strong>\u547d\u4ee4</strong>",id:"\u547d\u4ee4",level:3},{value:"npm\u955c\u50cf",id:"npm\u955c\u50cf",level:3},{value:"yarn pnpm",id:"yarn-pnpm",level:2},{value:"yarn\uff08\u4e2a\u4eba\u4e60\u60ef\u7528yarn\uff09",id:"yarn\u4e2a\u4eba\u4e60\u60ef\u7528yarn",level:3},{value:"\u547d\u4ee4",id:"\u547d\u4ee4-1",level:4},{value:"pnpm",id:"pnpm",level:3},{value:"http\u662f\u65e0\u72b6\u6001\u8bf7\u6c42",id:"http\u662f\u65e0\u72b6\u6001\u8bf7\u6c42",level:2},{value:"\u4e24\u9053\u9762\u8bd5\u9898",id:"\u4e24\u9053\u9762\u8bd5\u9898",level:2},{value:"1.\u5f53\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u5730\u5740\u4ee5\u540e\u53d1\u751f\u4e86\u4ec0\u4e48\uff1f",id:"1\u5f53\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u5730\u5740\u4ee5\u540e\u53d1\u751f\u4e86\u4ec0\u4e48",level:3},{value:"2.\u5ba2\u6237\u7aef\u5982\u4f55\u548c\u670d\u52a1\u5668\u5efa\u7acb\uff08\u65ad\u5f00\uff09\u8fde\u63a5",id:"2\u5ba2\u6237\u7aef\u5982\u4f55\u548c\u670d\u52a1\u5668\u5efa\u7acb\u65ad\u5f00\u8fde\u63a5",level:3},{value:"TCP/IP \u534f\u8bae\u65cf\uff08\u4e86\u89e3\uff09\u2014\u2014 \u7f51\u7edc\u901a\u4fe1",id:"tcpip-\u534f\u8bae\u65cf\u4e86\u89e3-\u7f51\u7edc\u901a\u4fe1",level:2},{value:"http\u534f\u8bae",id:"http\u534f\u8bae-1",level:2},{value:"\u62a5\u6587",id:"\u62a5\u6587",level:3},{value:"\u8bf7\u6c42\u62a5\u6587",id:"\u8bf7\u6c42\u62a5\u6587",level:3},{value:"\u54cd\u5e94\u62a5\u6587",id:"\u54cd\u5e94\u62a5\u6587",level:3},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb-1",level:2},{value:"\u8def\u7531",id:"\u8def\u7531",level:2},{value:"\u4e2d\u95f4\u4ef6",id:"\u4e2d\u95f4\u4ef6",level:2},{value:"\u4ec0\u4e48\u662fExpress\u4e2d\u95f4\u4ef6",id:"\u4ec0\u4e48\u662fexpress\u4e2d\u95f4\u4ef6",level:3},{value:"\u4e2d\u95f4\u4ef6",id:"\u4e2d\u95f4\u4ef6-1",level:3},{value:"next",id:"next",level:3},{value:"nodemon",id:"nodemon",level:2},{value:"\u9759\u6001\u8d44\u6e90",id:"\u9759\u6001\u8d44\u6e90",level:2},{value:"query\u67e5\u8be2\u5b57\u7b26\u4e32",id:"query\u67e5\u8be2\u5b57\u7b26\u4e32",level:2},{value:"params",id:"params",level:2},{value:"post\u8def\u7531",id:"post\u8def\u7531",level:2},{value:"\u89e3\u6790\u8bf7\u6c42\u4f53",id:"\u89e3\u6790\u8bf7\u6c42\u4f53",level:3},{value:"\u6a21\u677f\u5f15\u64ce-ejs",id:"\u6a21\u677f\u5f15\u64ce-ejs",level:2},{value:"\u914d\u7f6e404\u8def\u7531",id:"\u914d\u7f6e404\u8def\u7531",level:3},{value:"\u7ec3\u4e60-\u670d\u52a1\u5668\u8868\u683c\u8bfb\u5199\u5220\u6539",id:"\u7ec3\u4e60-\u670d\u52a1\u5668\u8868\u683c\u8bfb\u5199\u5220\u6539",level:2},{value:"index.js",id:"indexjs",level:3},{value:"student.ejs",id:"studentejs",level:3},{value:"updata.ejs",id:"updataejs",level:3},{value:"router",id:"router",level:2},{value:"\u7528\u6cd5",id:"\u7528\u6cd5",level:3},{value:"next",id:"next-1",level:3},{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd-2",level:2},{value:"<strong>cookie</strong>",id:"cookie-1",level:3},{value:"<strong>\u6b65\u9aa4</strong>",id:"\u6b65\u9aa4",level:3},{value:"\u6709\u6548\u671f",id:"\u6709\u6548\u671f",level:2},{value:"set",id:"set",level:3},{value:"get",id:"get",level:3},{value:"del",id:"del",level:3},{value:"cookie\u7684\u4e0d\u8db3",id:"cookie\u7684\u4e0d\u8db3",level:2},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb-2",level:2},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:2},{value:"\u6301\u4e45\u5316",id:"\u6301\u4e45\u5316",level:3},{value:"\u914d\u7f6e\u5bf9\u8c61-session",id:"\u914d\u7f6e\u5bf9\u8c61-session",level:3},{value:"\u9500\u6bc1session",id:"\u9500\u6bc1session",level:3},{value:"session.save\u7acb\u5373\u5b58\u50a8",id:"sessionsave\u7acb\u5373\u5b58\u50a8",level:2},{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd-3",level:2},{value:"\u5904\u7406csrf\u653b\u51fb",id:"\u5904\u7406csrf\u653b\u51fb",level:2},{value:"token\u65b9\u5f0f",id:"token\u65b9\u5f0f",level:3},{value:"\u68c0\u67e5referer\u7684\u65b9\u5f0f",id:"\u68c0\u67e5referer\u7684\u65b9\u5f0f",level:3}],u={toc:i},m="wrapper";function k(n){let{components:e,...a}=n;return(0,r.kt)(m,(0,l.Z)({},u,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"nodejs"},"nodejs"),(0,r.kt)("h2",{id:"\u7b80\u4ecb"},"\u7b80\u4ecb"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"http://dev.nodejs.cn/learn"},"\u4e2d\u6587\u5b98\u7f51")," "),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://nodejs.dev/en/"},"nodejs\u82f1\u6587\u6587\u6863\uff1a")),(0,r.kt)("p",null,"Node.js \u662f\u4e00\u4e2a\u5f00\u6e90\u548c\u8de8\u5e73\u53f0\u7684 JavaScript \u8fd0\u884c\u65f6\u73af\u5883\u3002 \u5b83\u51e0\u4e4e\u662f\u4efb\u4f55\u7c7b\u578b\u9879\u76ee\u7684\u6d41\u884c\u5de5\u5177\uff01"),(0,r.kt)("p",null,"Node.js \u5728\u6d4f\u89c8\u5668\u4e4b\u5916\u8fd0\u884c ",(0,r.kt)("strong",{parentName:"p"},"V8 JavaScript \u5f15\u64ce"),"\uff08Google Chrome \u7684\u5185\u6838\uff09\u3002 \u8fd9\u4f7f\u5f97 Node.js \u7684\u6027\u80fd\u975e\u5e38\u597d\u3002"),(0,r.kt)("p",null,"Node.js \u5e94\u7528\u7a0b\u5e8f\u5728",(0,r.kt)("strong",{parentName:"p"},"\u5355\u4e2a\u8fdb\u7a0b"),"\u4e2d\u8fd0\u884c\uff0c\u65e0\u9700\u4e3a\u6bcf\u4e2a\u8bf7\u6c42\u521b\u5efa\u65b0\u7684\u7ebf\u7a0b\u3002 Node.js \u5728\u5176\u6807\u51c6\u5e93\u4e2d\u63d0\u4f9b\u4e86\u4e00\u7ec4",(0,r.kt)("strong",{parentName:"p"},"\u5f02\u6b65"),"\u7684 I/O \u539f\u8bed\uff0c\u4ee5\u9632\u6b62 JavaScript \u4ee3\u7801\u963b\u585e\uff0c\u901a\u5e38\uff0cNode.js \u4e2d\u7684\u5e93\u662f\u4f7f\u7528",(0,r.kt)("strong",{parentName:"p"},"\u975e\u963b\u585e"),"\u8303\u5f0f\u7f16\u5199\u7684\uff0c\u4f7f\u5f97\u963b\u585e\u884c\u4e3a\u6210\u4e3a\u5f02\u5e38\u800c\u4e0d\u662f\u5e38\u6001\u3002"),(0,r.kt)("p",null,"\u5f53 Node.js \u6267\u884c I/O \u64cd\u4f5c\u65f6\uff08\u6bd4\u5982\u4ece\u7f51\u7edc\u8bfb\u53d6\u3001\u8bbf\u95ee\u6570\u636e\u5e93\u6216\u6587\u4ef6\u7cfb\u7edf\uff09\uff0cNode.js \u5c06\u5728\u54cd\u5e94\u8fd4\u56de\u65f6\u6062\u590d\u64cd\u4f5c\uff08\u800c\u4e0d\u662f\u963b\u585e\u7ebf\u7a0b\u548c\u6d6a\u8d39 CPU \u5468\u671f\u7b49\u5f85\uff09\u3002"),(0,r.kt)("p",null,"\u8fd9\u5141\u8bb8 Node.js \u4f7f\u7528\u5355\u4e2a\u670d\u52a1\u5668\u5904\u7406\u6570\u5343\u4e2a\u5e76\u53d1\u8fde\u63a5\uff0c\u800c\u4e0d\u4f1a\u5f15\u5165\u7ba1\u7406\u7ebf\u7a0b\u5e76\u53d1\uff08\u8fd9\u53ef\u80fd\u662f\u9519\u8bef\u7684\u91cd\u8981\u6765\u6e90\uff09\u7684\u8d1f\u62c5\u3002"),(0,r.kt)("p",null,"Node.js \u5177\u6709\u72ec\u7279\u7684\u4f18\u52bf\uff0c\u56e0\u4e3a\u6570\u767e\u4e07\u4e3a\u6d4f\u89c8\u5668\u7f16\u5199 JavaScript \u7684\u524d\u7aef\u5f00\u53d1\u8005\u73b0\u5728\u65e0\u9700\u5b66\u4e60\u5b8c\u5168\u4e0d\u540c\u7684\u8bed\u8a00\uff0c\u5c31\u53ef\u4ee5\u7f16\u5199\u9664\u5ba2\u6237\u7aef\u4ee3\u7801\u4e4b\u5916\u7684\u670d\u52a1\u5668\u7aef\u4ee3\u7801\u3002"),(0,r.kt)("p",null,"\u5728 Node.js \u4e2d\uff0c\u53ef\u4ee5\u6beb\u65e0\u95ee\u9898\u5730\u4f7f\u7528\u65b0\u7684 ECMAScript \u6807\u51c6\uff0c\u56e0\u4e3a\u4f60\u4e0d\u5fc5\u7b49\u5f85\u6240\u6709\u7528\u6237\u66f4\u65b0\u4ed6\u4eec\u7684\u6d4f\u89c8\u5668\uff0c\u4f60\u8d1f\u8d23\u901a\u8fc7\u66f4\u6539 Node.js \u7248\u672c\u6765\u51b3\u5b9a\u4f7f\u7528\u54ea\u4e2a ECMAScript \u7248\u672c\uff0c\u4f60\u8fd8\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c\u5e26\u6709\u6807\u5fd7\u7684 Node.js \u6765\u542f\u7528\u7279\u5b9a\u7684\u5b9e\u9a8c\u6027\u529f\u80fd\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u603b\u7ed3")),(0,r.kt)("p",null,"\u200b    ","-"," \u8fd0\u884c\u5728\u670d\u52a1\u5668\u7aef\u7684js"),(0,r.kt)("p",null,"\u200b    ","-"," \u7528\u6765\u7f16\u5199\u670d\u52a1\u5668"),(0,r.kt)("p",null,"\u200b    ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u7279\u70b9"),"\uff1a"),(0,r.kt)("p",null,"\u200b        ","-"," \u5355\u7ebf\u7a0b\u3001\u5f02\u6b65\u3001\u975e\u963b\u585e"),(0,r.kt)("p",null,"\u200b        ","-"," \u7edf\u4e00API"),(0,r.kt)("h2",{id:"nvm\u5b89\u88c5"},"nvm\u5b89\u88c5"),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u547d\u4ee4")),(0,r.kt)("p",null,"\u200b            ",(0,r.kt)("strong",{parentName:"p"},"nvm list")," - ",(0,r.kt)("strong",{parentName:"p"},"\u663e\u793a\u5df2\u5b89\u88c5\u7684node\u7248\u672c")),(0,r.kt)("p",null,"\u200b            ",(0,r.kt)("strong",{parentName:"p"},"nvm install \u7248\u672c")," - ",(0,r.kt)("strong",{parentName:"p"},"\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684node")),(0,r.kt)("p",null,"\u200b\t\t\t",(0,r.kt)("strong",{parentName:"p"},"nvm uninstall \u7248\u672c - \u5378\u8f7d\u6307\u5b9a\u7248\u672c\u7684node")),(0,r.kt)("p",null,"\u200b            \u914d\u7f6envm\u7684",(0,r.kt)("strong",{parentName:"p"},"\u955c\u50cf\u670d\u52a1\u5668")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"-> nvm node_mirror https://npmmirror.com/mirrors/node/\n")),(0,r.kt)("p",null,"\u200b            ",(0,r.kt)("strong",{parentName:"p"},"nvm use \u7248\u672c")," - ",(0,r.kt)("strong",{parentName:"p"},"\u6307\u5b9a\u8981\u4f7f\u7528\u7684node\u7248\u672c")),(0,r.kt)("p",null,"\u200b    ",(0,r.kt)("strong",{parentName:"p"},"node.js\u548cJavaScript\u6709\u4ec0\u4e48\u533a\u522b")),(0,r.kt)("p",null,"\u200b        ECMAScript\uff08node\u6709\uff09 DOM\uff08node\u6ca1\u6709\uff09 BOM\uff08node\u6ca1\u6709\uff09"),(0,r.kt)("h2",{id:"\u540c\u6b65\u5f02\u6b65"},"\u540c\u6b65\u5f02\u6b65"),(0,r.kt)("h3",{id:"\u8fdb\u7a0b\u548c\u7ebf\u7a0b"},"\u8fdb\u7a0b\u548c\u7ebf\u7a0b"),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u8fdb\u7a0b"),"\uff08\u5382\u623f\uff09"),(0,r.kt)("p",null,"\u200b            ","-"," \u7a0b\u5e8f\u7684",(0,r.kt)("strong",{parentName:"p"},"\u8fd0\u884c\u7684\u73af\u5883")),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u7ebf\u7a0b"),"\uff08\u5de5\u4eba\uff09"),(0,r.kt)("p",null,"\u200b            ","-"," \u7ebf\u7a0b\u662f",(0,r.kt)("strong",{parentName:"p"},"\u5b9e\u9645\u8fdb\u884c\u8fd0\u7b97\u7684\u4e1c\u897f")),(0,r.kt)("h3",{id:"\u540c\u6b65"},"\u540c\u6b65"),(0,r.kt)("p",null,"\u200b        ","-"," \u901a\u5e38\u60c5\u51b5\u4ee3\u7801\u90fd\u662f\u81ea\u4e0a\u5411\u4e0b\u4e00\u884c\u4e00\u884c\u6267\u884c\u7684"),(0,r.kt)("p",null,"\u200b        ","-"," \u524d\u8fb9\u7684\u4ee3\u7801\u4e0d\u6267\u884c\u540e\u8fb9\u7684\u4ee3\u7801\u4e5f\u4e0d\u4f1a\u6267\u884c"),(0,r.kt)("p",null,"\u200b        ","-"," \u540c\u6b65\u7684\u4ee3\u7801\u6267\u884c\u4f1a\u51fa\u73b0\u963b\u585e\u7684\u60c5\u51b5"),(0,r.kt)("p",null,"\u200b        ","-"," \u4e00\u884c\u4ee3\u7801\u6267\u884c\u6162\u4f1a\u5f71\u54cd\u5230\u6574\u4e2a\u7a0b\u5e8f\u7684\u6267\u884c"),(0,r.kt)("p",null,"\u200b    \u89e3\u51b3\u540c\u6b65\u95ee\u9898\uff1a"),(0,r.kt)("p",null,"\u200b        ","-"," java python"),(0,r.kt)("p",null,"\u200b            ","-"," \u901a\u8fc7\u591a\u7ebf\u7a0b\u6765\u89e3\u51b3"),(0,r.kt)("p",null,"\u200b        ","-"," node.js"),(0,r.kt)("p",null,"\u200b            ","-"," \u901a\u8fc7\u5f02\u6b65\u65b9\u5f0f\u6765\u89e3\u51b3"),(0,r.kt)("h3",{id:"\u5f02\u6b65"},"\u5f02\u6b65"),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u4e00\u6bb5\u4ee3\u7801\u7684\u6267\u884c\u4e0d\u4f1a\u5f71\u54cd\u5230\u5176\u4ed6\u7684\u7a0b\u5e8f")),(0,r.kt)("p",null,"\u200b        ","-"," \u5f02\u6b65\u7684\u95ee\u9898\uff1a"),(0,r.kt)("p",null,"\u200b            ",(0,r.kt)("strong",{parentName:"p"},"\u5f02\u6b65\u7684\u4ee3\u7801\u65e0\u6cd5\u901a\u8fc7return\u6765\u8bbe\u7f6e\u8fd4\u56de\u503c")),(0,r.kt)("p",null,"\u200b        ","-"," \u7279\u70b9\uff1a"),(0,r.kt)("p",null,"\u200b            1.",(0,r.kt)("strong",{parentName:"p"},"\u4e0d\u4f1a\u963b\u585e\u5176\u4ed6\u4ee3\u7801\u7684\u6267\u884c")),(0,r.kt)("p",null,"\u200b            2.",(0,r.kt)("strong",{parentName:"p"},"\u9700\u8981\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u6765\u8fd4\u56de\u7ed3\u679c")),(0,r.kt)("p",null,"\u200b        ","-"," \u57fa\u4e8e\u56de\u8c03\u51fd\u6570\u7684\u5f02\u6b65\u5e26\u6765\u7684\u95ee\u9898"),(0,r.kt)("p",null,"\u200b            \\1. \u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u5dee"),(0,r.kt)("p",null,"\u200b            \\2. \u53ef\u8c03\u8bd5\u6027\u5dee"),(0,r.kt)("p",null,"\u200b        ","-"," \u89e3\u51b3\u95ee\u9898\uff1a"),(0,r.kt)("p",null,"\u200b            ","-"," \u9700\u8981\u4e00\u4e2a\u4e1c\u897f\uff0c\u53ef\u4ee5\u4ee3\u66ff\u56de\u8c03\u51fd\u6570\u6765\u7ed9\u6211\u4eec\u8fd4\u56de\u7ed3\u679c"),(0,r.kt)("p",null,"\u200b            ","-"," Promise\u6a2a\u7a7a\u51fa\u4e16"),(0,r.kt)("p",null,"\u200b                ","-"," ",(0,r.kt)("strong",{parentName:"p"},"Promise"),"\u662f\u4e00\u4e2a\u53ef\u4ee5",(0,r.kt)("strong",{parentName:"p"},"\u7528\u6765\u5b58\u50a8\u6570\u636e\u7684\u5bf9\u8c61")),(0,r.kt)("p",null,"\u200b                    Promise\u5b58\u50a8\u6570\u636e\u7684\u65b9\u5f0f\u6bd4\u8f83\u7279\u6b8a\uff0c"),(0,r.kt)("p",null,"\u200b                    \u8fd9\u79cd\u7279\u6b8a\u65b9\u5f0f\u4f7f\u5f97Promise\u53ef\u4ee5\u7528\u6765",(0,r.kt)("strong",{parentName:"p"},"\u5b58\u50a8\u5f02\u6b65\u8c03\u7528\u7684\u6570\u636e")),(0,r.kt)("p",null,"\u200b    ","-"," \u73b0\u5b9e\u751f\u6d3b"),(0,r.kt)("p",null,"\u200b        1.\u70b9\u83dc"),(0,r.kt)("p",null,"\u200b        2.\u53a8\u5e08\u505a\u83dc"),(0,r.kt)("p",null,"\u200b        3.\u5403"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'function sum(a, b, cb) {\n    setTimeout(() => {\n        cb(a + b)\n    }, 1000)\n}\n\nfunction sum2(a, b){\n    const begin = Date.now()\n\n    // \u8ba9\u7a0b\u5e8f\u505c10\u79d2\n    while(Date.now() - begin < 10000){}\n}\n\nconsole.log("111111")\n\nsum(123, 456, (result)=>{\n    sum(result, 7, (result)=>{\n        sum(result, 8, result => {\n            sum(result, 9, result => {\n                sum(result, 10, result => {\n                    console.log(result)\n                })\n            })\n        })\n    })\n})\n\nconsole.log("222222")\n')),(0,r.kt)("h2",{id:"promise"},"Promise"),(0,r.kt)("h3",{id:"\u4ecb\u7ecd"},"\u4ecb\u7ecd"),(0,r.kt)("p",null,"\u5f02\u6b65\u8c03\u7528\u5fc5\u987b\u8981\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u6765\u8fd4\u56de\u6570\u636e\uff0c"),(0,r.kt)("p",null,"\u200b        \u5f53\u6211\u4eec\u8fdb\u884c\u4e00\u4e9b\u590d\u6742\u7684\u8c03\u7528\u7684\u65f6\uff0c\u4f1a\u51fa\u73b0\u201c\u56de\u8c03\u5730\u72f1\u201d"),(0,r.kt)("p",null,"\u95ee\u9898\uff1a"),(0,r.kt)("p",null,"\u200b        \u5f02\u6b65\u5fc5\u987b\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u6765\u8fd4\u56de\u7ed3\u679c\uff0c\u56de\u8c03\u51fd\u6570\u4e00\u591a\u5c31\u5f88\u75db\u82e6"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Promise")),(0,r.kt)("p",null,"\u200b        ","-"," Promise\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u89e3\u51b3\u5f02\u6b65\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u7684\u95ee\u9898"),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"Promise\u5c31\u662f\u4e00\u4e2a\u7528\u6765\u5b58\u50a8\u6570\u636e\u7684\u5bb9\u5668")),(0,r.kt)("p",null,"\u200b            \u5b83\u62e5\u6709\u7740\u4e00\u5957\u7279\u6b8a\u7684\u5b58\u53d6\u6570\u636e\u7684\u65b9\u5f0f"),(0,r.kt)("p",null,"\u200b            \u8fd9\u4e2a\u65b9\u5f0f\u4f7f\u5f97\u5b83\u91cc\u8fb9",(0,r.kt)("strong",{parentName:"p"},"\u53ef\u4ee5\u5b58\u50a8\u5f02\u6b65\u8c03\u7528\u7684\u7ed3\u679c")),(0,r.kt)("h3",{id:"\u521b\u5efapromise"},"\u521b\u5efaPromise"),(0,r.kt)("p",null,"\u521b\u5efaPromise\u65f6\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u6784\u9020\u51fd\u6570\u4e2d\u9700\u8981\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570"),"\u3002"),(0,r.kt)("p",null,"Promise\u6784\u9020\u51fd\u6570\u7684",(0,r.kt)("strong",{parentName:"p"},"\u56de\u8c03\u51fd\u6570"),"\uff0c\u5b83\u4f1a\u5728\u521b\u5efaPromise\u65f6\u8c03\u7528\uff0c\u8c03\u7528\u65f6\u4f1a\u6709",(0,r.kt)("strong",{parentName:"p"},"\u4e24\u4e2a\u53c2\u6570\u4f20\u9012"),"\u8fdb\u53bb"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"resolve")," \u548c ",(0,r.kt)("strong",{parentName:"p"},"reject")," \u662f\u4e24\u4e2a\u51fd\u6570\uff0c\u901a\u8fc7\u8fd9\u4e24\u4e2a\u51fd\u6570\u53ef\u4ee5",(0,r.kt)("strong",{parentName:"p"},"\u5411Promise\u4e2d\u5b58\u50a8\u6570\u636e"),"\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"resolve\u5728\u6267\u884c\u6b63\u5e38\u65f6\u5b58\u50a8\u6570\u636e"),"\uff0c",(0,r.kt)("strong",{parentName:"p"},"reject\u5728\u6267\u884c\u9519\u8bef\u65f6\u5b58\u50a8\u6570\u636e"),"\u3002"),(0,r.kt)("p",null,"\u901a\u8fc7\u51fd\u6570\u6765\u5411Promise\u4e2d\u6dfb\u52a0\u6570\u636e\uff0c\u597d\u5904\u5c31\u662f\u53ef\u4ee5\u7528\u6765\u6dfb\u52a0\u5f02\u6b65\u8c03\u7528\u7684\u6570\u636e"),(0,r.kt)("h3",{id:"\u4ecepromise\u4e2d\u8bfb\u53d6\u6570\u636e"},"\u4ecePromise\u4e2d\u8bfb\u53d6\u6570\u636e"),(0,r.kt)("p",null,"\u200b        ","-"," \u53ef\u4ee5\u901a\u8fc7Promise\u7684",(0,r.kt)("strong",{parentName:"p"},"\u5b9e\u4f8b\u65b9\u6cd5then"),"\u6765\u8bfb\u53d6Promise\u4e2d\u5b58\u50a8\u7684\u6570\u636e"),(0,r.kt)("p",null,"\u200b        ","-"," then\u9700\u8981\u4e24\u4e2a\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u56de\u8c03\u51fd\u6570\u7528\u6765\u83b7\u53d6Promise\u4e2d\u7684\u6570\u636e"),(0,r.kt)("p",null,"\u200b            \u901a\u8fc7",(0,r.kt)("strong",{parentName:"p"},"resolve\u5b58\u50a8\u7684\u6570\u636e\uff0c\u4f1a\u8c03\u7528\u7b2c\u4e00\u4e2a\u51fd\u6570\u8fd4\u56de"),"\uff0c"),(0,r.kt)("p",null,"\u200b                \u53ef\u4ee5\u5728\u7b2c\u4e00\u4e2a\u51fd\u6570\u4e2d\u7f16\u5199\u5904\u7406\u6570\u636e\u7684\u4ee3\u7801"),(0,r.kt)("p",null,"\u200b            \u901a\u8fc7",(0,r.kt)("strong",{parentName:"p"},"reject\u5b58\u50a8\u7684\u6570\u636e\u6216\u8005\u51fa\u73b0\u5f02\u5e38\u65f6\uff0c\u4f1a\u8c03\u7528\u7b2c\u4e8c\u4e2a\u51fd\u6570\u8fd4\u56de"),"\uff0c"),(0,r.kt)("p",null,"\u200b                \u53ef\u4ee5\u5728\u7b2c\u4e8c\u4e2a\u51fd\u6570\u4e2d\u7f16\u5199\u5904\u7406\u5f02\u5e38\u7684\u4ee3\u7801"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const promise = new Promise((resolve, reject) => {\n    // setTimeout(() => {\n    //     resolve("\u54c8\u54c8")\n    // }, 2000)\n\n    // throw new Error("\u54c8\u54c8\uff0c\u51fa\u9519\u4e86")\n\n    resolve("resolve\u8fd4\u56de\u7684\u6570\u636e")\n    // reject("reject\u8fd4\u56de\u7684\u6570\u636e")\n})\n\nconsole.log(promise)\n\npromise.then((result) => {\n     console.log("1", result)\n}, (reason) => {\n     console.log("2", reason)\n})\n')),(0,r.kt)("h3",{id:"promise\u4e2d\u7ef4\u62a4\u4e86\u4e24\u4e2a\u9690\u85cf\u5c5e\u6027"},"Promise\u4e2d\u7ef4\u62a4\u4e86\u4e24\u4e2a\u9690\u85cf\u5c5e\u6027\uff1a"),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"PromiseResult")),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u7528\u6765\u5b58\u50a8\u6570\u636e")),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"PromiseState")),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u8bb0\u5f55Promise\u7684\u72b6\u6001\uff08\u4e09\u79cd\u72b6\u6001\uff09")),(0,r.kt)("p",null,"\u200b                ",(0,r.kt)("strong",{parentName:"p"},"pending"),"   \uff08\u8fdb\u884c\u4e2d\uff09"),(0,r.kt)("p",null,"\u200b                ",(0,r.kt)("strong",{parentName:"p"},"fulfilled"),"\uff08\u5b8c\u6210\uff09 \u901a\u8fc7resolve\u5b58\u50a8\u6570\u636e\u65f6"),(0,r.kt)("p",null,"\u200b                ",(0,r.kt)("strong",{parentName:"p"},"rejected"),"\uff08\u62d2\u7edd\uff0c\u51fa\u9519\u4e86\uff09 \u51fa\u9519\u4e86\u6216\u901a\u8fc7reject\u5b58\u50a8\u6570\u636e\u65f6"),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"state\u53ea\u80fd\u4fee\u6539\u4e00\u6b21\uff0c\u4fee\u6539\u4ee5\u540e\u6c38\u8fdc\u4e0d\u4f1a\u5728\u53d8"),"\u3002"),(0,r.kt)("p",null,"\u200b    "),(0,r.kt)("h3",{id:"\u6d41\u7a0b"},"\u6d41\u7a0b\uff1a"),(0,r.kt)("p",null,"\u200b            \u5f53Promise\u521b\u5efa\u65f6\uff0c",(0,r.kt)("strong",{parentName:"p"},"PromiseState\u521d\u59cb\u503c\u4e3apending"),"\uff0c"),(0,r.kt)("p",null,"\u200b                \u5f53\u901a\u8fc7",(0,r.kt)("strong",{parentName:"p"},"resolve\u5b58\u50a8\u6570\u636e\u65f6 PromiseState \u53d8\u4e3afulfilled\uff08\u5b8c\u6210\uff09")),(0,r.kt)("p",null,"\u200b                    PromiseResult\u53d8\u4e3a\u5b58\u50a8\u7684\u6570\u636e"),(0,r.kt)("p",null,"\u200b                \u5f53\u901a\u8fc7",(0,r.kt)("strong",{parentName:"p"},"reject\u5b58\u50a8\u6570\u636e\u6216\u51fa\u9519\u65f6 PromiseState \u53d8\u4e3arejected\uff08\u62d2\u7edd\uff0c\u51fa\u9519\u4e86\uff09")),(0,r.kt)("p",null,"\u200b                    PromiseResult\u53d8\u4e3a\u5b58\u50a8\u7684\u6570\u636e \u6216 \u5f02\u5e38\u5bf9\u8c61"),(0,r.kt)("p",null,"\u200b            \u5f53\u6211\u4eec\u901a\u8fc7then\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u76f8\u5f53\u4e8e\u4e3aPromise\u8bbe\u7f6e\u4e86\u56de\u8c03\u51fd\u6570\uff0c"),(0,r.kt)("p",null,"\u200b                \u5982\u679c",(0,r.kt)("strong",{parentName:"p"},"PromiseState\u53d8\u4e3afulfilled"),"\uff0c\u5219\u8c03\u7528then\u7684\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u6765\u8fd4\u56de\u6570\u636e"),(0,r.kt)("p",null,"\u200b                \u5982\u679c",(0,r.kt)("strong",{parentName:"p"},"PromiseState\u53d8\u4e3arejected"),"\uff0c\u5219\u8c03\u7528then\u7684\u7b2c\u4e8c\u4e2a\u56de\u8c03\u51fd\u6570\u6765\u8fd4\u56de\u6570\u636e"),(0,r.kt)("h3",{id:"cathfinally"},"cath,finally"),(0,r.kt)("p",null,"\u200b    ",(0,r.kt)("strong",{parentName:"p"},"catch"),"() \u7528\u6cd5\u548cthen\u7c7b\u4f3c\uff0c\u4f46\u662f\u53ea\u9700\u8981\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570"),(0,r.kt)("p",null,"\u200b        catch()\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u53ea\u4f1a",(0,r.kt)("strong",{parentName:"p"},"\u5728Promise\u88ab\u62d2\u7edd\u65f6\u624d\u8c03\u7528")),(0,r.kt)("p",null,"\u200b        catch() ",(0,r.kt)("strong",{parentName:"p"},"\u76f8\u5f53\u4e8e then(null, reason => {})")),(0,r.kt)("p",null,"\u200b        catch() \u5c31\u662f\u4e00\u4e2a",(0,r.kt)("strong",{parentName:"p"},"\u4e13\u95e8\u5904\u7406Promise\u5f02\u5e38\u7684\u65b9\u6cd5")),(0,r.kt)("p",null,"\u200b    ",(0,r.kt)("strong",{parentName:"p"},"finally"),"() "),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u65e0\u8bba\u662f\u6b63\u5e38\u5b58\u50a8\u6570\u636e\u8fd8\u662f\u51fa\u73b0\u5f02\u5e38\u4e86\uff0cfinally\u603b\u4f1a\u6267\u884c")),(0,r.kt)("p",null,"\u200b        ","-"," \u4f46\u662ffinally\u7684",(0,r.kt)("strong",{parentName:"p"},"\u56de\u8c03\u51fd\u6570\u4e2d\u4e0d\u4f1a\u63a5\u6536\u5230\u6570\u636e")),(0,r.kt)("p",null,"\u200b        ","-"," finally()\u901a\u5e38\u7528\u6765\u7f16\u5199\u4e00\u4e9b\u65e0\u8bba\u6210\u529f\u4e0e\u5426\u90fd\u8981\u6267\u884c\u4ee3\u7801"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const promise2 = new Promise((resolve, reject) => {\n resolve("\u54c8\u54c8")\n})\n\n// console.log(promise2)\npromise2.then(result => {\n console.log(result)\n}, reason => {\n console.log("\u51fa\u9519\u4e86")\n})\n\npromise2.catch(reason => {\n  console.log(222222)\n})\n\npromise2.finally(()=>{\n console.log("\u6ca1\u6709\u4ec0\u4e48\u80fd\u591f\u963b\u6321\u6211\u6267\u884c\u7684\uff01")\n})\n\nconsole.log(1111111)\n')),(0,r.kt)("h2",{id:"promise\u8fdb\u9636"},"Promise\u8fdb\u9636"),(0,r.kt)("h3",{id:"\u8be6\u89e3"},"\u8be6\u89e3"),(0,r.kt)("p",null,"Promise\u5c31\u662f\u4e00\u4e2a\u7528\u6765",(0,r.kt)("strong",{parentName:"p"},"\u5b58\u50a8\u6570\u636e\u7684\u5bf9\u8c61")),(0,r.kt)("p",null,"\u4f46\u662f\u7531\u4e8ePromise\u5b58\u53d6\u7684\u65b9\u5f0f\u7684\u7279\u6b8a\uff0c\u6240\u4ee5",(0,r.kt)("strong",{parentName:"p"},"\u53ef\u4ee5\u76f4\u63a5\u5c06\u5f02\u6b65\u8c03\u7528\u7684\u7ed3\u679c\u5b58\u50a8\u5230Promise\u4e2d")),(0,r.kt)("p",null,"\u5bf9Promise\u8fdb\u884c",(0,r.kt)("strong",{parentName:"p"},"\u94fe\u5f0f\u8c03\u7528"),"\u65f6"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u540e\u8fb9\u7684\u65b9\u6cd5\uff08then\u548ccatch\uff09\u8bfb\u53d6\u7684\u4e0a\u4e00\u6b65\u7684\u6267\u884c\u7ed3\u679c")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5982\u679c\u4e0a\u4e00\u6b65\u7684\u6267\u884c\u7ed3\u679c\u4e0d\u662f\u5f53\u524d\u60f3\u8981\u7684\u7ed3\u679c\uff0c\u5219\u8df3\u8fc7\u5f53\u524d\u7684\u65b9\u6cd5")),(0,r.kt)("p",null,"\u5f53Promise\u51fa\u73b0\u5f02\u5e38\u65f6\uff0c\u800c\u6574\u4e2a\u8c03\u7528\u94fe\u4e2d\u6ca1\u6709\u51fa\u73b0catch\uff0c\u5219\u5f02\u5e38\u4f1a\u5411\u5916\u629b\u51fa"),(0,r.kt)("p",null," promise\u4e2d\u7684"),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"then")," (return new Promise())"),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"catch")),(0,r.kt)("p",null,"\u200b        ","-"," \u8fd9\u4e09\u4e2a\u65b9\u6cd5\u90fd\u4f1a",(0,r.kt)("strong",{parentName:"p"},"\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684Promise"),","),(0,r.kt)("p",null,"\u200b            ",(0,r.kt)("strong",{parentName:"p"},"Promise\u4e2d\u4f1a\u5b58\u50a8\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c")),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"finally")),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"finally\u7684\u8fd4\u56de\u503c\uff0c\u4e0d\u4f1a\u5b58\u50a8\u5230\u65b0\u7684Promise\u4e2d")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const promise = new Promise((resolve, reject) => {\n    reject("\u5468\u4e00\u5230\u5468\u4e9419\u70b9\uff0c\u4e0d\u89c1\u4e0d\u6563") \n})\n\npromise\n    .then(r => console.log("\u7b2c\u4e00\u4e2athen", r))\n    .catch(r => {\n        throw new Error("\u62a5\u4e2a\u9519\u73a9")\n        console.log("\u51fa\u9519\u4e86")\n        return "\u563b\u563b"\n    })\n    .then(r => console.log("\u7b2c\u4e8c\u4e2athen", r))\n    .catch(r => {\n        console.log("\u51fa\u9519\u4e86")\n    })\n\n\n// promise\n//     .then(result => {\n//         console.log("\u56de\u8c03\u51fd\u6570", result)\n//         return "\u9504\u79be\u65e5\u5f53\u5348"\n//     })\n//     .then(result => {\n//         console.log("\u7b2c\u4e8c\u4e2athen", result)\n//         return "\u8d85\u54e5\u771f\u5feb\u4e50"\n//     })\n//     .then(result => {\n//         console.log(result)\n//     })\n\n\n\n// \u94fe\u5f0f\u8c03\u7528\uff0c\u6bcf\u4e00\u4e2athen\u90fd\u8fd4\u56de\u4e00\u4e2aPromise\n\n// promise.then(result => {\n//     console.log(result)\n// }, reason => {\n//     console.log("\u51fa\u9519\u4e86", reason)\n// })\n\n// function sum(a, b, cb) {\n//     setTimeout(() => {\n//         cb(a + b)\n//     }, 1000);\n// }\n\nfunction sum(a, b) {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            resolve(a + b)\n        }, 1000)\n    })\n}\n\n// sum(123, 456).then(result => {\n//     sum(result, 7).then(result =>{\n//         sum(result, 8).then(result => {\n//             console.log(result)\n//         })\n//     })\n// })\n\n// sum(123, 456)\n//     .then(result => result + 7)\n//     .then(result => result + 8)\n//     .then(result => console.log(result))\n')),(0,r.kt)("h3",{id:"\u9759\u6001\u65b9\u6cd5"},"\u9759\u6001\u65b9\u6cd5"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u65b9\u6cd5"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8bed\u6cd5"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"resolve"),"()"),(0,r.kt)("td",{parentName:"tr",align:null},"\u521b\u5efa\u4e00\u4e2a\u7acb\u5373\u5b8c\u6210\u7684Promise")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"reject"),"()"),(0,r.kt)("td",{parentName:"tr",align:null},"\u521b\u5efa\u4e00\u4e2a\u7acb\u5373\u62d2\u7edd\u7684Promise")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"all"),"(","[...]",")"),(0,r.kt)("td",{parentName:"tr",align:null},"\u540c\u65f6\u8fd4\u56de\u591a\u4e2aPromise\u7684\u6267\u884c\u7ed3\u679c                                                                                                          ",(0,r.kt)("strong",{parentName:"td"},"\u5176\u4e2d\u6709\u4e00\u4e2a\u62a5\u9519\uff0c\u5c31\u8fd4\u56de\u9519\u8bef"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"allSettled"),"(","[...]",")"),(0,r.kt)("td",{parentName:"tr",align:null},"\u540c\u65f6",(0,r.kt)("strong",{parentName:"td"},"\u8fd4\u56de\u591a\u4e2aPromise\u7684\u6267\u884c\u7ed3\u679c(\u65e0\u8bba\u6210\u529f\u6216\u5931\u8d25)"),"\t                                                   {",(0,r.kt)("strong",{parentName:"td"},"status"),": 'fulfilled', ",(0,r.kt)("strong",{parentName:"td"},"value"),": 579},{",(0,r.kt)("strong",{parentName:"td"},"status"),": 'rejected', ",(0,r.kt)("strong",{parentName:"td"},"reason"),": '\u54c8\u54c8'}")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"race"),"(","[...]",")"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"\u8fd4\u56de\u6267\u884c\u6700\u5feb\u7684Promise\uff08\u4e0d\u8003\u8651\u5bf9\u9519\uff09"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"any"),"(","[...]",")"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"\u8fd4\u56de\u6267\u884c\u6700\u5feb\u7684\u5b8c\u6210\u7684Promise"))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Promise.resolve(10).then(r => console.log(r))\n\n// Promise.reject("\u9519\u8bef")\n\n// new Promise((resolve, reject) => {\n//     resolve(10)\n// })\n\nfunction sum(a, b) {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            resolve(a + b)\n        }, 1000)\n    })\n}\n\n\n\n// Promise.all([\n//     sum(123, 456),\n//     sum(5, 6),\n//     Promise.reject("\u54c8\u54c8"),\n//     sum(33, 44)\n// ]).then(r => {\n//     console.log(r)\n// })\n\n// Promise.allSettled([\n//     sum(123, 456),\n//     sum(5, 6),\n//     Promise.reject("\u54c8\u54c8"),\n//     sum(33, 44)\n// ]).then(r => {\n//     console.log(r)\n// })\n\n// Promise.race([\n//     Promise.reject(1111),\n//     sum(123, 456),\n//     sum(5, 6),\n//     sum(33, 44)\n// ]).then(r => {\n//     console.log(r)\n// }).catch(r => {\n//     console.log("\u9519\u8bef")\n// })\n\n// Promise.any([\n//     Promise.reject(1111),\n//     Promise.reject(2222),\n//     Promise.reject(3333),\n// ]).then(r => {\n//     console.log(r)\n// }).catch(r => {\n//     console.log("\u9519\u8bef", r)\n// })\n\nsetTimeout(()=>{\n    console.log(1111)\n})\n\nPromise.resolve()\n    .then(() => {\n        console.log(2222)\n    })\n\n\n// console.log(22222)\n')),(0,r.kt)("h2",{id:"\u5b8f\u4efb\u52a1\u5fae\u4efb\u52a1"},"\u5b8f\u4efb\u52a1\u5fae\u4efb\u52a1"),(0,r.kt)("p",null,"\u5f00\u542f\u4e86\u4e00\u4e2a\u5b9a\u65f6\u5668\n\u5b9a\u65f6\u5668\u7684\u4f5c\u7528\u662f\u95f4\u9694\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5c06\u51fd\u6570\u653e\u5165\u5230\u4efb\u52a1\u961f\u5217\u4e2d"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"setTimeout(() => {\n    console.log(1)\n}, 0)\n")),(0,r.kt)("h3",{id:"promise\u7684\u6267\u884c\u539f\u7406"},(0,r.kt)("strong",{parentName:"h3"},"Promise\u7684\u6267\u884c\u539f\u7406")),(0,r.kt)("p",null,"\u200b        ","-"," Promise\u5728\u6267\u884c\uff0cthen\u5c31\u76f8\u5f53\u4e8e\u7ed9Promise\u4e86\u56de\u8c03\u51fd\u6570"),(0,r.kt)("p",null,"\u200b            \u5f53Promise\u7684",(0,r.kt)("strong",{parentName:"p"},"\u72b6\u6001\u4ecepending \u53d8\u4e3a fulfilled\u65f6"),"\uff0c"),(0,r.kt)("p",null,"\u200b                ",(0,r.kt)("strong",{parentName:"p"},"then\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u88ab\u653e\u5165\u5230\u4efb\u52a1\u961f\u5217\u4e2d")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// Promise.resolve(1).then(() => {\n//     console.log(2)\n// })\n\n/* \n    queueMicrotask() \u7528\u6765\u5411\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u4efb\u52a1\n*/\n\n// setTimeout(() => {\n//     console.log(1)\n// })\n\n// Promise.resolve().then(() => {\n//     setTimeout(()=>{\n//         console.log(1)\n//     })\n// })\n\nPromise.resolve().then(() => {\n    Promise.resolve().then(()=>{\n        console.log(1)\n    })\n})\n\nqueueMicrotask(() => {\n    console.log(2)\n})\n\nconsole.log(3)\n")),(0,r.kt)("p",null,"\u73b0\u5728\u6709\u8fd9\u6837\u4e00\u6bb5\u4ee3\u7801\uff0c\u4f60\u80fd\u8bf4\u51fa\u5b83\u5728\u63a7\u5236\u53f0\u4e2d\u7684\u8f93\u51fa\u7ed3\u679c\u5417\uff1f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"console.log(1)\n\nPromise.resolve().then(() => {\n    console.log(2)\n})\n\nconsole.log(3)\n")),(0,r.kt)("p",null,"\u8981\u771f\u6b63\u7684\u7406\u89e3\u8fd9\u4e00\u6bb5\u4ee3\u7801\uff0c\u6211\u4eec\u5fc5\u987b\u8981\u5148\u641e\u61c2Promise\u4e2d\u7684\u5b9e\u4f8b\u65b9\u6cd5then\u5230\u5e95\u662f\u5728\u505a\u4ec0\u4e48\uff1f\u4e4b\u524d\u5728\u5b66\u4e60Promise\u65f6\uff0c\u6211\u4eec\u5c31\u5df2\u7ecf\u8bf4\u8fc7\u4e86\uff0cthen\u76f8\u5f53\u4e8e\u4e3aPromise\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5f53Promise\u4e2d\u7684\u6570\u636e\u5904\u7406\u5b8c\u6bd5\u65f6\uff0c\u4fbf\u4f1a\u8c03\u7528then\u6240\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u6765\u7ee7\u7eed\u540e\u7eed\u4efb\u52a1\u3002"),(0,r.kt)("p",null,"\u4e0a\u4f8b\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7Promise.resolve()\u521b\u5efa\u4e86\u4e00\u4e2a\u7406\u89e3\u5b8c\u6210\u7684Promise\uff0c\u90a3\u4e48\u6309\u9053\u7406\u8bb2then\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u5e94\u8be5\u7acb\u523b\u6267\u884c\u554a\uff1f\u56e0\u4e3aPromise\u5df2\u7ecf\u5b8c\u6210\u4e86\u554a\uff1f\u6240\u4ee5\u6253\u5370\u7684\u987a\u5e8f\u4e0d\u5e94\u8be5\u662f\u201c1 2 3\u201d\u5417\uff1f\u5982\u679c\u80fd\u60f3\u5230\u8fd9\u4e9b\u90a3\u4e48\u8bc1\u660e\u4e4b\u524d\u8bb2\u89e3\u7684Promise\u4f60\u5df2\u7ecf\u7406\u89e3\u7684\u5dee\u4e0d\u591a\u4e86\uff0c\u4f46\u662f\u8fd8\u4e0d\u591f\u51c6\u786e\uff01"),(0,r.kt)("p",null,"then\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728Promise\u5b8c\u6210\u540e\u88ab\u8c03\u7528\uff0c\u4f46\u662f\u6ce8\u610f\u5e76\u4e0d\u662f\u7acb\u523b\u5c31\u8c03\u7528\uff0c\u800c\u662f\u91c7\u7528\u4e00\u79cd\u548c\u5b9a\u65f6\u5668\u7c7b\u4f3c\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u8bb2\u51fd\u6570\u653e\u5165\u5230\u4e00\u4e2a\u4efb\u52a1\u961f\u5217\u4e2d\uff0c\u800c\u961f\u5217\u4e2d\u7684\u4ee3\u7801\u4f1a\u5728\u8c03\u7528\u6808\u4e2d\u7684\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5\u540e\u624d\u4f1a\u6267\u884c\u3002\u4e5f\u5c31\u662f\u8bf4then\u4e2d\u7684\u4ee3\u7801\u603b\u662f\u5728\u5f53\u524d\u8c03\u7528\u6808\u4e2d\u7684\u4ee3\u7801\u6267\u884c\u5b8c\u540e\u624d\u6267\u884c\u3002\u6240\u4ee5\u4e0a\u8fb9\u4ee3\u7801\u7684\u8f93\u51fa\u7ed3\u679c\u5e94\u8be5\u4e3a\uff1a\u201c1 3 2\u201d"),(0,r.kt)("p",null,"\u90a3\u4e48\u95ee\u9898\u53c8\u6765\u4e86\uff0c\u5982\u679c\u662f\u8fd9\u6837\u7684\u4ee3\u7801\u5462\uff1f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"setTimeout(()=>{\n    console.log(1)\n})\n\nPromise.resolve().then(() => {\n    console.log(2)\n})\n")),(0,r.kt)("p",null,"\u9519\u8bef\u7684\u5206\u6790\uff1asetTimeout\u662f\u5b9a\u65f6\u5668\uff0c\u5b83\u4f1a\u5728\u4e00\u6bb5\u65f6\u95f4\u540e\u5c06\u51fd\u6570\u653e\u5165\u5230\u4efb\u52a1\u961f\u5217\u4e2d\uff0c\u800c\u6211\u4eec\u6ca1\u6709\u6307\u5b9a\u65f6\u95f4\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u51fd\u6570\u4f1a\u7acb\u523b\u653e\u5165\u5230\u4efb\u52a1\u961f\u5217\u4e2d\u3002then\u540c\u6837\u4e5f\u662f\u5c06\u51fd\u6570\u653e\u5165\u5230\u4efb\u52a1\u961f\u5217\u4e2d\uff0c\u5e76\u4e14\u8fd9\u4e2aPromise\u662f\u4e00\u4e2a\u7acb\u5373\u5b8c\u6210\u7684Promise\u6240\u4ee5\u51fd\u6570\u4e5f\u662f\u7acb\u523b\u8fdb\u5165\u4efb\u52a1\u961f\u5217\u3002\u90a3\u4e48\u6309\u7167\u6267\u884c\u987a\u5e8f\u6765\u8bb2\uff0c\u5b9a\u65f6\u5668\u5728\u524d\uff0cthen\u5728\u540e\uff0c\u6240\u4ee5\u5b9a\u65f6\u5668\u4e2d\u7684\u51fd\u6570\u5e94\u8be5\u5148\u8fdb\u5165\u961f\u5217\uff0c\u961f\u5217\u53c8\u662f\u5148\u8fdb\u5148\u51fa\u7684\uff0c\u6240\u4ee5\u5e94\u8be5\u51481\u540e2\u3002"),(0,r.kt)("p",null,"\u4e0a\u8fb9\u7684\u5206\u6790\u770b\u4f3c\u5408\u7406\uff0c\u5b9e\u9645\u4e0a\u662f\u4e0d\u5bf9\u7684\u3002\u56e0\u4e3asetTimeout\u548cthen\u867d\u7136\u90fd\u5c06\u51fd\u6570\u653e\u5165\u5230\u961f\u5217\u4e2d\uff0c\u4f46\u662f\u5374\u4e0d\u662f\u540c\u4e00\u4e2a\u961f\u5217\u3002\u4e3a\u4e86\u66f4\u5408\u7406\u7684\u5904\u7406\u5f02\u6b65\u4efb\u52a1\uff0cES\u6807\u51c6\u89c4\u5b9a\u4e86\u4e00\u4e2a\u5185\u90e8\u7684\u961f\u5217\u201cPromiseJobs\u201d\uff0c\u8fd9\u4e2a\u961f\u5217\u662f\u4e13\u95e8\u7528\u6765\u653e\u7f6e\u7531Promise\u4ea7\u751f\u7684\u56de\u8c03\u51fd\u6570\u7684\uff08then\u3001catch\u3001finally\uff09\uff0c\u8fd9\u4e2a\u961f\u5217\u6211\u4eec\u901a\u5e38\u88ab\u79f0\u4e3a\u201c\u5fae\u4efb\u52a1\u961f\u5217\uff08microtask queue\uff09\u201d\u3002\u76f8\u5bf9\u7684\uff0csetTimeout\u8fd9\u4e9b\u65b9\u6cd5\u662f\u5c06\u51fd\u6570\u653e\u5165\u5230\u4e86\u201c\u5b8f\u4efb\u52a1\u961f\u5217\uff08macrotask queue\uff09\u201d\u3002"),(0,r.kt)("p",null,"\u7b80\u5355\u6765\u8bf4\uff0c\u4efb\u52a1\u961f\u5217\u6709\u4e24\u4e2a\uff0c\u5b8f\u4efb\u52a1\u961f\u5217\u548c\u5fae\u4efb\u52a1\u961f\u5217\u3002\u4ee3\u7801\u6267\u884c\u65f6\uff0c\u5b8f\u4efb\u52a1\u8fdb\u5165\u5230\u5b8f\u4efb\u52a1\u961f\u5217\uff0c\u5fae\u4efb\u52a1\u8fdb\u5165\u5230\u5fae\u4efb\u52a1\u961f\u5217\u3002\u90a3\u4e48\u54ea\u4e9b\u4efb\u52a1\u65f6\u5fae\u4efb\u52a1\uff0c\u54ea\u4e9b\u4efb\u52a1\u662f\u5b8f\u4efb\u52a1\u5462\uff1f\u5176\u5b9e\u5927\u90e8\u5206\u7684\u4efb\u52a1\u90fd\u5c5e\u4e8e\u5b8f\u4efb\u52a1\u3002\u800c\u5fae\u4efb\u52a1\u901a\u5e38\u5728\u4ee3\u7801\u8fd0\u884c\u65f6\u4ea7\u751f\uff0c\u901a\u5e38\u662f\u7531Promise\u6240\u521b\u5efa\u7684\uff0cPromise\u7684then\u3001catch\u3001finally\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u4f5c\u4e3a\u5fae\u4efb\u52a1\u8fdb\u5165\u5230\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u3002"),(0,r.kt)("p",null,"JS\u4ee3\u7801\u6267\u884c\u65f6\uff0c\u6bcf\u4e00\u4e2a\u5b8f\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\u540e\uff0cJS\u5f15\u64ce\u4f1a\u7acb\u5373\u6267\u884c\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u6240\u6709\u4efb\u52a1\uff0c\u7136\u540e\u624d\u662f\u6267\u884c\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u4efb\u52a1\u3002\u6362\u53e5\u8bdd\u4e2dthen\u4e2d\u7684\u56de\u8c03\u51fd\u6570\uff08\u5fae\u4efb\u52a1\uff09\u4f1a\u5148\u4e8e\u5b9a\u65f6\u5668\u4e2d\u7684\u56de\u8c03\u51fd\u6570\uff08\u5b8f\u4efb\u52a1\uff09\u6267\u884c\u3002\u6240\u4ee5\u4e0a\u4f8b\u4e2d\u4ee3\u7801\u7684\u6267\u884c\u7ed3\u679c\u5e94\u8be5\u4e3a\uff1a\u201c2 1\u201d\u3002"),(0,r.kt)("p",null,"\u5982\u679c\u4e0a\u8fb9\u7684\u5185\u5bb9\u4f60\u7406\u89e3\u4e86\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u5206\u6790\u4e00\u4e0b\u8fd9\u6bb5\u4ee3\u7801\uff1a"),(0,r.kt)("h3",{id:"\u7ec3\u4e60"},"\u7ec3\u4e60"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"    // \u9605\u8bfb\u4e0b\u5217\u4ee3\u7801\uff0c\u5e76\u8bf4\u51fa\u6267\u884c\u7ed3\u679c\uff1a\n    \n    console.log(1);\n\n    setTimeout(() => console.log(2));\n\n    Promise.resolve().then(() => console.log(3));\n\n    Promise.resolve().then(() => setTimeout(() => console.log(4)));\n\n    Promise.resolve().then(() => console.log(5));\n\n    setTimeout(() => console.log(6));\n\n    console.log(7);\n")),(0,r.kt)("h3",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,r.kt)("p",null,"\u200b    ",(0,r.kt)("strong",{parentName:"p"},"JS\u662f\u5355\u7ebf\u7a0b"),"\u7684\uff0c\u5b83\u7684\u8fd0\u884c\u65f6\u57fa\u4e8e",(0,r.kt)("strong",{parentName:"p"},"\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\uff08event loop\uff09")),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u8c03\u7528\u6808")),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u6808")),(0,r.kt)("p",null,"\u200b                \u6808\u662f\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u540e\u8fdb\u5148\u51fa")),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u8c03\u7528\u6808"),"\u4e2d\uff0c\u653e\u7684\u662f",(0,r.kt)("strong",{parentName:"p"},"\u8981\u6267\u884c\u7684\u4ee3\u7801")),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u4efb\u52a1\u961f\u5217")),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u961f\u5217")),(0,r.kt)("p",null,"\u200b                ","-"," \u961f\u5217\u662f\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u5148\u8fdb\u5148\u51fa")),(0,r.kt)("p",null,"\u200b            ","-"," \u4efb\u52a1\u961f\u5217\u7684\u662f",(0,r.kt)("strong",{parentName:"p"},"\u5c06\u8981\u6267\u884c\u7684\u4ee3\u7801")),(0,r.kt)("p",null,"\u200b            ","-"," \u5f53\u8c03\u7528\u6808\u4e2d\u7684\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u961f\u5217\u4e2d\u7684\u4ee3\u7801\u624d\u4f1a\u6309\u7167\u987a\u5e8f\u4f9d\u6b21\u8fdb\u5165\u5230\u6808\u4e2d\u6267\u884c"),(0,r.kt)("p",null,"\u200b            ","-"," \u5728JS\u4e2d\u4efb\u52a1\u961f\u5217\u6709\u4e24\u79cd"),(0,r.kt)("p",null,"\u200b                ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u5b8f\u4efb\u52a1\u961f\u5217")," \uff08\u5927\u90e8\u5206\u4ee3\u7801\u90fd\u53bb\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u53bb\u6392\u961f\uff09"),(0,r.kt)("p",null,"\u200b                ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u5fae\u4efb\u52a1\u961f\u5217")," \uff08",(0,r.kt)("strong",{parentName:"p"},"Promise\u7684\u56de\u8c03\u51fd\u6570\uff08then\u3001catch\u3001finally"),"\uff09\uff09"),(0,r.kt)("p",null,"\u200b            ","-"," \u6574\u4e2a\u6d41\u7a0b"),(0,r.kt)("p",null,"\u200b                \u2460 ",(0,r.kt)("strong",{parentName:"p"},"\u6267\u884c\u8c03\u7528\u6808\u4e2d\u7684\u4ee3\u7801")),(0,r.kt)("p",null,"\u200b                \u2461 ",(0,r.kt)("strong",{parentName:"p"},"\u6267\u884c\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u6240\u6709\u4efb\u52a1")),(0,r.kt)("p",null,"\u200b                \u2462 ",(0,r.kt)("strong",{parentName:"p"},"\u6267\u884c\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u6240\u6709\u4efb\u52a1")),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(6692).Z,width:"1920",height:"1030"})),(0,r.kt)("h2",{id:"\u624b\u5199promise"},"\u624b\u5199Promise"),(0,r.kt)("h3",{id:"\u6ce8\u610f"},"\u6ce8\u610f"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"this\u6307\u5411\u95ee\u9898\uff0cresolve\u662f\u51fd\u6570\u8c03\u7528\uff0cnode\u6ca1\u6709\u5168\u5c40window\uff0c\u6240\u6709this\u662fundefined",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7",(0,r.kt)("strong",{parentName:"li"},"\u7bad\u5934\u51fd\u6570\u58f0\u660e\u79c1\u6709\u65b9\u6cd5"),"\uff0c\u6216\u8005",(0,r.kt)("strong",{parentName:"li"},"bind\u9501\u6b7bthis"))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'/* \n    \u5b9a\u4e49\u7c7b\u7684\u601d\u8def\n        1. \u5148\u628a\u529f\u80fd\u90fd\u5206\u6790\u6e05\u695a\u4e86\uff0c\u5728\u52a8\u624b\n        2. \u5199\u4e00\u70b9\u60f3\u4e00\u70b9\uff0c\u8d70\u4e00\u6b65\u770b\u4e00\u6b65\n*/\n\nconst PROMISE_STATE = {\n    PENDING: 0,\n    FULFILLED: 1,\n    REJECTED: 2\n}\n\nclass MyPromise {\n\n    // \u521b\u5efa\u4e00\u4e2a\u53d8\u91cf\u7528\u6765\u5b58\u50a8Promise\u7684\u7ed3\u679c\n    #result\n    // \u521b\u5efa\u4e00\u4e2a\u53d8\u91cf\u6765\u8bb0\u5f55Promise\u7684\u72b6\u6001\n    #state = PROMISE_STATE.PENDING //pending 0 fulfilled 1 rejected 2\n\n    // \u521b\u5efa\u4e00\u4e2a\u53d8\u91cf\u6765\u5b58\u50a8\u56de\u8c03\u51fd\u6570\n    // \u7531\u4e8e\u56de\u8c03\u51fd\u6570\u53ef\u80fd\u6709\u591a\u4e2a\uff0c\u6240\u4ee5\u6211\u4eec\u4f7f\u7528\u6570\u7ec4\u6765\u5b58\u50a8\u56de\u8c03\u51fd\u6570\n    #callbacks = []\n\n    constructor(executor) {\n        // \u63a5\u6536\u4e00\u4e2a \u6267\u884c\u5668 \u4f5c\u4e3a\u53c2\u6570\n        executor(this.#resolve.bind(this), this.#reject.bind(this)) // \u8c03\u7528\u56de\u8c03\u51fd\u6570\n    }\n\n    // \u79c1\u6709\u7684resolve() \u7528\u6765\u5b58\u50a8\u6210\u529f\u7684\u6570\u636e\n    #resolve(value) {\n        // \u7981\u6b62\u503c\u88ab\u91cd\u590d\u4fee\u6539\n        // \u5982\u679cstate\u4e0d\u7b49\u4e8e0\uff0c\u8bf4\u660e\u503c\u5df2\u7ecf\u88ab\u4fee\u6539 \u51fd\u6570\u76f4\u63a5\u8fd4\u56de\n        if (this.#state !== PROMISE_STATE.PENDING) return\n\n        this.#result = value\n        this.#state = PROMISE_STATE.FULFILLED // \u6570\u636e\u586b\u5145\u6210\u529f\n\n        // \u5f53resolve\u6267\u884c\u65f6\uff0c\u8bf4\u660e\u6570\u636e\u5df2\u7ecf\u8fdb\u6765\u4e86\uff0c\u9700\u8981\u8c03\u7528then\u7684\u56de\u8c03\u51fd\u6570\n        queueMicrotask(() => {\n            // \u8c03\u7528callbacks\u4e2d\u7684\u6240\u6709\u51fd\u6570\n            this.#callbacks.forEach(cb => {\n                cb()\n            })\n        })\n    }\n\n    // #resolve = () => {\n    //     console.log(this)\n    // }\n\n    // \u79c1\u6709\u7684reject() \u7528\u6765\u5b58\u50a8\u62d2\u7edd\u7684\u6570\u636e\n    #reject(reason) { }\n\n\n    // \u6dfb\u52a0\u4e00\u4e2a\u7528\u6765\u8bfb\u53d6\u6570\u636e\u7684then\u65b9\u6cd5\n    then(onFulfilled, onRejected) {\n\n        /* \n            \u8c01\u5c06\u6210\u4e3athen\u8fd4\u56de\u7684\u65b0Promise\u4e2d\u7684\u6570\u636e\uff1f\uff1f\uff1f\n                then\u4e2d\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u4f1a\u6210\u4e3a\u65b0\u7684Promise\u4e2d\u7684\u6570\u636e\n        */\n\n        return new MyPromise((resolve, reject) => {\n            if (this.#state === PROMISE_STATE.PENDING) {\n                // \u8fdb\u5165\u5224\u65ad\u8bf4\u660e\u6570\u636e\u8fd8\u6ca1\u6709\u8fdb\u5165Promise\uff0c\u5c06\u56de\u8c03\u51fd\u6570\u8bbe\u7f6e\u4e3acallback\u7684\u503c\n                // this.#callback = onFulfilled\n                \n                // \u7bad\u5934\u51fd\u6570\u662f\u4e3a\u4e86onFulfilled\u8fd4\u56de\u503c\u76f4\u63a5\u7ed9resolve\n                this.#callbacks.push(() => {\n                    resolve(onFulfilled(this.#result))\n                    \n                })\n            } else if (this.#state === PROMISE_STATE.FULFILLED) {\n                /* \n                    \u76ee\u524d\u6765\u8bb2\uff0cthen\u53ea\u80fd\u8bfb\u53d6\u5df2\u7ecf\u5b58\u50a8\u8fdbPromise\u7684\u6570\u636e\uff0c\n                        \u800c\u4e0d\u80fd\u8bfb\u53d6\u5f02\u6b65\u5b58\u50a8\u7684\u6570\u636e\n                */\n                // onFulfilled(this.#result)\n\n                /* \n                    then\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5e94\u8be5\u653e\u5165\u5230\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u6267\u884c\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u8c03\u7528\n                */\n                queueMicrotask(() => {\n                    resolve(onFulfilled(this.#result))\n                })\n            }\n\n        })\n    }\n\n\n}\n\nconst mp = new MyPromise((resolve, reject) => {\n    setTimeout(() => {\n        resolve("\u5b59\u609f\u7a7a")\n    }, 1000)\n})\n\nmp.then((result) => {\n    console.log("\u8bfb\u53d6\u6570\u636e1", result)\n    return "\u732a\u516b\u6212"\n}).then(r => {\n    console.log("\u8bfb\u53d6\u6570\u636e2", r)\n    return "\u6c99\u548c\u5c1a"\n}).then(r => {\n    console.log("\u8bfb\u53d6\u6570\u636e3", r)\n})\n\n\n\n\n// const p = Promise.resolve(\'\u5b59\u609f\u7a7a\')\n\n// p.then(r => console.log("\u7b2c\u4e00\u6b21\u8bfb", r))\n// p.then(r => console.log("\u7b2c\u4e8c\u6b21\u8bfb", r))\n')),(0,r.kt)("h2",{id:"\u7b54\u7591"},"\u7b54\u7591"),(0,r.kt)("p",null,"\u200b    js\u4e2d\u7684\u53d8\u91cf"),(0,r.kt)("p",null,"\u200b        ","-"," \u65e9\u671f\u6211\u7684\u7406\u89e3\uff08\u9519\u8bef\u7684\uff09"),(0,r.kt)("p",null,"\u200b            \u57fa\u672c\u6570\u636e\u7c7b\u578b\uff08\u5b58\u503c\uff09"),(0,r.kt)("p",null,"\u200b            \u5f15\u7528\u6570\u636e\u7c7b\u578b\uff08\u5b58\u5730\u5740\uff09"),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u5b9e\u9645\u60c5\u51b5\uff08v8\u5f15\u64ce chrome\uff09")),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u6240\u6709\u7684\u503c\u5728\u53d8\u91cf\u4e2d\u5b58\u50a8\u7684\u90fd\u662f\u5185\u5b58\u5730\u5740")),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"JS\u4e2d\u5168\u90fd\u662f\u5f15\u7528\u6570\u636e\u7c7b\u578b")),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"JS\u4e2d\u7684\u6570\u636e\u7c7b\u578b")),(0,r.kt)("p",null,"\u200b                ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u539f\u59cb\u503c"),"\uff08",(0,r.kt)("strong",{parentName:"p"},"\u4e0d\u53ef\u53d8\u7c7b\u578b"),"\uff09"),(0,r.kt)("p",null,"\u200b                ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u5bf9\u8c61"),"\uff08",(0,r.kt)("strong",{parentName:"p"},"\u53ef\u53d8\u7c7b\u578b"),"\uff09"),(0,r.kt)("p",null,"\u200b        "),(0,r.kt)("p",null,"\u200b        ","-"," \u4e3a\u4ec0\u4e48\uff1f"),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"JS\u662f\u4e00\u95e8\u52a8\u6001\u7c7b\u578b\u8bed\u8a00\uff0c\u53d8\u91cf\u662f\u6ca1\u6709\u7c7b\u578b\u7684")),(0,r.kt)("p",null,"\u200b            ","-"," \u8981\u5982\u4f55\u4e3a\u53d8\u91cf\u5206\u914d\u5185\u5b58\u7a7a\u95f4\u5462\uff1f"),(0,r.kt)("p",null,"\u200b            ","-"," JS\u7684\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u53d8\u91cf\u4e2d\u53ea\u5b58\u5730\u5740"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'        ```js\n    let a = 10\n    a = "hello"\n    a = {}\n    a = function(){}\n        ```\n')),(0,r.kt)("h2",{id:"asyncawait"},"async\u3001await"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'/* \n    \u901a\u8fc7async\u53ef\u4ee5\u5feb\u901f\u7684\u521b\u5efa\u5f02\u6b65\u51fd\u6570\n*/\nfunction fn() {\n    return Promise.resolve(10)\n}\n\n/* \n    \u901a\u8fc7async\u53ef\u4ee5\u6765\u521b\u5efa\u4e00\u4e2a\u5f02\u6b65\u51fd\u6570\n        \u5f02\u6b65\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4f1a\u81ea\u52a8\u5c01\u88c5\u5230\u4e00\u4e2aPromise\u4e2d\u8fd4\u56de\n    \n    \u5728async\u58f0\u660e\u7684\u5f02\u6b65\u51fd\u6570\u4e2d\u53ef\u4ee5\u4f7f\u7528await\u5173\u952e\u5b57\u6765\u8c03\u7528\u5f02\u6b65\u51fd\u6570\n*/\nasync function fn2() {\n    return 10\n}\n\n// fn().then(r => {\n//     console.log(r)\n// })\n\n// fn2().then(r => {\n//     console.log(r)\n// })\n\nfunction sum(a, b) {\n    return new Promise(resolve => {\n        setTimeout(() => {\n            resolve(a + b)\n        }, 2000);\n    })\n}\n\n/* \n    Promise\u89e3\u51b3\u4e86\u5f02\u6b65\u8c03\u7528\u4e2d\u56de\u8c03\u51fd\u6570\u95ee\u9898\uff0c\n        \u867d\u7136\u901a\u8fc7\u94fe\u5f0f\u8c03\u7528\u89e3\u51b3\u4e86\u56de\u8c03\u5730\u72f1\uff0c\u4f46\u662f\u94fe\u5f0f\u8c03\u7528\u592a\u591a\u4ee5\u540e\u8fd8\u662f\u4e0d\u597d\u770b\n        \u6211\u591a\u60f3\u4ee5\u540c\u6b65\u7684\u65b9\u5f0f\u53bb\u8c03\u7528\u5f02\u6b65\u7684\u4ee3\u7801\n*/\n\nasync function fn3() {\n    // sum(123, 456)\n    //     .then(r => sum(r, 8))\n    //     .then(r => sum(r, 9))\n    //     .then(r => console.log(r))\n\n    // \u5f53\u6211\u4eec\u901a\u8fc7await\u53bb\u8c03\u7528\u5f02\u6b65\u51fd\u6570\u65f6\uff0c\u5b83\u4f1a\u6682\u505c\u4ee3\u7801\u7684\u8fd0\u884c\n    //  \u76f4\u5230\u5f02\u6b65\u4ee3\u7801\u6267\u884c\u6709\u7ed3\u679c\u65f6\uff0c\u624d\u4f1a\u5c06\u7ed3\u679c\u8fd4\u56de\n    // \u6ce8\u610f await\u53ea\u80fd\u7528\u4e8e async\u58f0\u660e\u7684\u5f02\u6b65\u51fd\u6570\u4e2d\uff0c\u6216es\u6a21\u5757\u7684\u9876\u7ea7\u4f5c\u7528\u57df\u4e2d\n    // await\u963b\u585e\u7684\u53ea\u662f\u5f02\u6b65\u51fd\u6570\u5185\u90e8\u7684\u4ee3\u7801\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5916\u90e8\u4ee3\u7801\n    // \u901a\u8fc7await\u8c03\u7528\u5f02\u6b65\u4ee3\u7801\u65f6\uff0c\u9700\u8981\u901a\u8fc7try-catch\u6765\u5904\u7406\u5f02\u5e38\n\n    try {\n        let result = await sum(123, 456)\n        result = await sum(result, 8)\n        result = await sum(result, 9)\n        console.log(result)\n    } catch (e) {\n        console.log("\u51fa\u9519\u4e86~~")\n    }\n\n}\n\n// fn3()\n// console.log("\u5168\u5c40\u4e2d\u7684\u8f93\u51fa~~")\n\n// \u5982\u679casync\u58f0\u660e\u7684\u51fd\u6570\u4e2d\u6ca1\u6709\u5199await\uff0c\u90a3\u4e48\u5b83\u91cc\u8fb9\u5c31\u4f1a\u4f9d\u6b21\u6267\u884c\n/* \nasync function fn4(){\n    console.log(1)\n    console.log(2)\n    console.log(3)\n}\n\nfunction fn5(){\n    return new Promise(resolve => {\n        console.log(1)\n        console.log(2)\n        console.log(3)\n        resolve()\n    })\n} \n\n*/\n\n\nasync function fn4() {\n    console.log(1)\n    /* \n        \u5f53\u6211\u4eec\u4f7f\u7528await\u8c03\u7528\u51fd\u6570\u540e\uff0c\u5f53\u524d\u51fd\u6570\u540e\u8fb9\u7684\u6240\u6709\u4ee3\u7801\n            \u4f1a\u5728\u5f53\u524d\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u88ab\u653e\u5165\u5230\u5fae\u4efb\u52a1\u961f\u91cc\u4e2d\n    */\n    await console.log(2)\n\n    // await\u540e\u8fb9\u7684\u6240\u6709\u4ee3\u7801\uff0c\u90fd\u4f1a\u653e\u5165\u5230\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u6267\u884c\n    // \u7b49\u540c\u4e8ethen\u7684\u56de\u8c03\u51fd\u6570\u91cc\u7684queueMicrotask\u653e\u8fdb\u5fae\u4efb\u52a1\u961f\u5217\u91cc\n    console.log(3)\n}\n\nfunction fn5() {\n    return new Promise(resolve => {\n        console.log(1)\n        // \u52a0\u4e86await\n        console.log(2)\n\n        resolve()\n    }).then(r => {\n        console.log(3)\n    })\n}\nfn5()\n\n    // console.log(4)\n\n\n    // async function fn6(){\n    //     await console.log("\u54c8\u54c8")\n    // }\n    // fn6()\n\n;(async () => {\n    await console.log("\u54c8\u54c8")\n})()\n')),(0,r.kt)("h1",{id:"\u6a21\u5757\u5316"},"\u6a21\u5757\u5316"),(0,r.kt)("h2",{id:"\u4ecb\u7ecd-1"},"\u4ecb\u7ecd"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.lilichao.com/index.php/2022/10/18/%e6%a8%a1%e5%9d%97%e5%8c%96/"},"\u6a21\u5757\u5316\u8be6\u7ec6\u6587\u6863")),(0,r.kt)("p",null,"\u200b    \u65e9\u671f\u7684\u7f51\u9875\u4e2d\uff0c\u662f\u6ca1\u6709\u4e00\u4e2a\u5b9e\u8d28\u7684\u6a21\u5757\u89c4\u8303\u7684"),(0,r.kt)("p",null,"\u200b        \u6211\u4eec\u5b9e\u73b0\u6a21\u5757\u5316\u7684\u65b9\u5f0f\uff0c\u5c31\u662f\u6700\u539f\u59cb\u7684\u901a\u8fc7script\u6807\u7b7e\u6765\u5f15\u5165\u591a\u4e2ajs\u6587\u4ef6"),(0,r.kt)("p",null,"\u200b        \u95ee\u9898\uff1a"),(0,r.kt)("p",null,"\u200b            \\1. \u65e0\u6cd5\u9009\u62e9\u8981\u5f15\u5165\u6a21\u5757\u7684\u54ea\u4e9b\u5185\u5bb9"),(0,r.kt)("p",null,"\u200b            \\2. \u5728\u590d\u6742\u7684\u6a21\u5757\u573a\u666f\u4e0b\u975e\u5e38\u5bb9\u6613\u51fa\u9519"),(0,r.kt)("p",null,"\u200b            ......"),(0,r.kt)("p",null,"\u200b        \u4e8e\u662f\uff0c\u6211\u4eec\u5c31\u7ee7\u7eed\u5728js\u4e2d\u5f15\u5165\u4e00\u4e2a\u6a21\u5757\u5316\u7684\u89e3\u51b3\u65b9\u6848"),(0,r.kt)("p",null,"\u200b    ",(0,r.kt)("strong",{parentName:"p"},"\u5728node\u4e2d\uff0c\u9ed8\u8ba4\u652f\u6301\u7684\u6a21\u5757\u5316\u89c4\u8303\u53eb\u505aCommonJS\uff0c")),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"\u5728CommonJS\u4e2d\uff0c\u4e00\u4e2ajs\u6587\u4ef6\u5c31\u662f\u4e00\u4e2a\u6a21\u5757")),(0,r.kt)("h2",{id:"commonjs\u89c4\u8303"},"CommonJS\u89c4\u8303"),(0,r.kt)("h3",{id:"--\u5f15\u5165\u6a21\u5757"},"-"," \u5f15\u5165\u6a21\u5757"),(0,r.kt)("p",null,"\u200b            ","-"," \u4f7f\u7528",(0,r.kt)("strong",{parentName:"p"},'require("\u6a21\u5757\u7684\u8def\u5f84")'),"\u51fd\u6570\u6765\u5f15\u5165\u6a21\u5757"),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u5f15\u5165\u81ea\u5b9a\u4e49\u6a21\u5757\u65f6")),(0,r.kt)("p",null,"\u200b                ","-"," \u6a21\u5757\u540d\u8981\u4ee5",(0,r.kt)("strong",{parentName:"p"},"./ \u6216 ../"),"\u5f00\u5934"),(0,r.kt)("p",null,"\u200b                ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u6269\u5c55\u540d\u53ef\u4ee5\u7701\u7565")),(0,r.kt)("p",null,"\u200b                    ","-"," \u5728CommonJS\u4e2d\uff0c\u5982\u679c\u7701\u7565\u7684js\u6587\u4ef6\u7684\u6269\u5c55\u540d"),(0,r.kt)("p",null,"\u200b                        node\uff0c\u4f1a\u81ea\u52a8\u4e3a\u6587\u4ef6\u8865\u5168\u6269\u5c55\u540d"),(0,r.kt)("p",null,"\u200b                            ./m1.js \u5982\u679c\u6ca1\u6709js \u5b83\u4f1a\u5bfb\u627e ./m1.json"),(0,r.kt)("p",null,"\u200b                            ",(0,r.kt)("strong",{parentName:"p"},"js --\x3e json --\x3e node\uff08\u7279\u6b8a\uff09")),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u5f15\u5165\u6838\u5fc3\u6a21\u5757\u65f6")),(0,r.kt)("p",null,"\u200b                ","-"," \u76f4\u63a5\u5199\u6838\u5fc3\u6a21\u5757\u7684\u540d\u5b57\u5373\u53ef"),(0,r.kt)("p",null,"\u200b                ","-"," \u4e5f\u53ef\u4ee5\u5728\u6838\u5fc3\u6a21\u5757\u524d\u6dfb\u52a0 ",(0,r.kt)("strong",{parentName:"p"},"node:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const m1 = require("./m1")\n// const path = require("path")\nconst path = require("node:path")\n\nconst m2 = require("./m2.cjs")\n\n// \u5982\u679c\u6587\u4ef6\u5939\uff0c\u9ed8\u8ba4index.js\u4e3a\u4e3b\u6a21\u5757\nconst hello = require("./hello") // ./hello/index.js\n\n// console.log(m1)\n// m1.c()\n\nconsole.log(hello)\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u89e3\u6784\u8d4b\u503c\u5f15\u5165")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// const obj = require("./m3")\n\n// const name = require("./m3").name\n\nconst {name, age, gender} = require("./m3")\n\nconsole.log(name, age, gender)\n')),(0,r.kt)("h3",{id:"\u66b4\u9732\u6a21\u5757\u5185\u5bb9"},"\u66b4\u9732\u6a21\u5757\u5185\u5bb9"),(0,r.kt)("p",null,"\u5728\u5b9a\u4e49\u6a21\u5757\u65f6\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u6a21\u5757\u4e2d\u7684\u5185\u5bb9\u9ed8\u8ba4\u662f\u4e0d\u80fd\u88ab\u5916\u90e8\u770b\u5230\u7684")),(0,r.kt)("p",null,"\u200b        \u53ef\u4ee5\u901a\u8fc7",(0,r.kt)("strong",{parentName:"p"},"exports\u6765\u8bbe\u7f6e\u8981\u5411\u5916\u90e8\u66b4\u9732\u7684\u5185\u5bb9")),(0,r.kt)("p",null,"\u200b    \u8bbf\u95eeexports\u7684\u65b9\u5f0f\u6709\u4e24\u79cd\uff1a"),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"exports")),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"module.exports")),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u5f53\u6211\u4eec\u5728\u5176\u4ed6\u6a21\u5757\u4e2d\u5f15\u5165\u5f53\u524d\u6a21\u5757\u65f6\uff0crequire\u51fd\u6570\u8fd4\u56de\u7684\u5c31\u662fexports")),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u53ef\u4ee5\u5c06\u5e0c\u671b\u66b4\u9732\u7ed9\u5916\u90e8\u6a21\u5757\u7684\u5185\u5bb9\u8bbe\u7f6e\u4e3aexports\u7684\u5c5e\u6027")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'/* m1.js */\n\n// console.log(exports)\n// console.log(module.exports)\n\n// \u968f\u610f\u7684\u7f16\u5199\u4ee3\u7801\n\n\n// \u53ef\u4ee5\u901a\u8fc7exports \u4e00\u4e2a\u4e00\u4e2a\u7684\u5bfc\u51fa\u503c\n// exports.a = "\u5b59\u609f\u7a7a"\n// exports.b = {name:"\u767d\u9aa8\u7cbe"}\n// exports.c = function fn(){\n//     console.log("\u54c8\u54c8")\n// }\n\n// \u4e5f\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7module.exports\u540c\u65f6\u5bfc\u51fa\u591a\u4e2a\u503c\nmodule.exports = {\n    a: "\u54c8\u54c8",\n    b: [1, 3, 5, 7],\n    c: () =>{\n        console.log(111)\n    }\n}\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"cjs\u4e3a\u6269\u5c55\u540d\uff0c\u8868\u793a\u662f\u4e00\u4e2aCommonJS\u6807\u51c6\u7684\u6a21\u5757")),(0,r.kt)("p",null,"node\u4e2d\u9ed8\u8ba4.js\u662fcommonjs\u6807\u51c6\u7684\u6a21\u5757\u5316"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'/* m2.cjs */\n\nexports.a = "\u54c8\u54c8"\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6240\u6709\u7684CommonJS\u7684\u6a21\u5757\u90fd\u4f1a\u88ab\u5305\u88c5\u5230\u4e00\u4e2a\u51fd\u6570\u4e2d")),(0,r.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528console.log(arguments);\u68c0\u9a8c\u662f\u5426\u662f\u5728\u51fd\u6570\u4e2d"),(0,r.kt)("p",null,"commonjs\u5b9e\u8d28\u5c31\u662f\u95ed\u5305"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"/*\n    (function(exports, require, module, __filename, __dirname) {\n        // \u6a21\u5757\u4ee3\u7801\u4f1a\u88ab\u653e\u5230\u8fd9\u91cc\n    });\n*/\n\nlet a = 10\nlet b = 20\n\n// console.log(__filename) // __filename\u8868\u793a\u5f53\u524d\u6a21\u5757\u7684\u7edd\u5bf9\u8def\u5f84\n\nconsole.log(__dirname) // \u5f53\u6a21\u5757\u6240\u5728\u76ee\u5f55\u7684\u8def\u5f84\n")),(0,r.kt)("h2",{id:"es6\u6a21\u5757\u5316\u89c4\u8303"},"ES6\u6a21\u5757\u5316\u89c4\u8303"),(0,r.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cnode\u4e2d\u7684\u6a21\u5757\u5316\u6807\u51c6\u662fCommonJS"),(0,r.kt)("p",null,"\u200b        \u8981\u60f3\u4f7f\u7528ES\u7684\u6a21\u5757\u5316\uff0c\u53ef\u4ee5\u91c7\u7528\u4ee5\u4e0b\u4e24\u79cd\u65b9\u6848"),(0,r.kt)("p",null,"\u200b            \\1. \u4f7f\u7528mjs\u4f5c\u4e3a\u6269\u5c55\u540d"),(0,r.kt)("p",null,"\u200b            \\2. \u4fee\u6539package.json\u5c06\u6a21\u5757\u5316\u89c4\u8303\u8bbe\u7f6e\u4e3aES\u6a21\u5757"),(0,r.kt)("p",null,'\u200b                \u5f53\u6211\u4eec\u8bbe\u7f6e "type": "module" \u5f53\u524d\u9879\u76ee\u4e0b\u6240\u6709\u7684js\u6587\u4ef6\u90fd\u9ed8\u8ba4\u4e3aes module'),(0,r.kt)("h3",{id:"\u5bfc\u51fa"},"\u5bfc\u51fa"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'/* \n    m4.mjs\n    ES \u6a21\u5757\u5316\n*/\n\n// \u5411\u5916\u90e8\u5bfc\u51fa\u5185\u5bb9\nexport let a = 10\nexport const b = "\u5b59\u609f\u7a7a"\nexport const c = { name: "\u732a\u516b\u6212" }\n\n// \u8bbe\u7f6e\u9ed8\u8ba4\u5bfc\u51fa\uff0c \u4e00\u4e2a\u6a21\u5757\u4e2d\u53ea\u6709\u4e00\u4e2a\u9ed8\u8ba4\u5bfc\u51fa\n// export default function sum(a, b) {\n//     return a + b\n// }\nlet d = 20\nexport default d \n')),(0,r.kt)("h3",{id:"\u5bfc\u5165"},"\u5bfc\u5165"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'/* \n    index.mjs\n*/\n\n// console.log(module)\n\n\n// \u5bfc\u5165m4\u6a21\u5757\uff0ces\u6a21\u5757\u4e0d\u80fd\u7701\u7565\u6269\u5c55\u540d\uff08\u5b98\u65b9\u6807\u51c6\uff09\n// import { a, b, c } from "./m4.mjs"\n\n// \u901a\u8fc7as\u6765\u6307\u5b9a\u522b\u540d\n// import { a as hello, b, c } from "./m4.mjs"\n\n// \u5f00\u53d1\u65f6\u8981\u5c3d\u91cf\u907f\u514dimport * \u60c5\u51b5\n// import * as m4 from "./m4.mjs"\n\n// console.log(m4.c)\n\n// \u5bfc\u5165\u6a21\u5757\u7684\u9ed8\u8ba4\u5bfc\u51fa\n// \u9ed8\u8ba4\u5bfc\u51fa\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u968f\u610f\u547d\u540d\n// import sum, { a } from "./m4.mjs"\n\n// console.log(sum, a)\n\nimport { a, b, c } from "./m4.mjs"\n\n// \u901a\u8fc7ES\u6a21\u5757\u5316\uff0c\u5bfc\u5165\u7684\u5185\u5bb9\u90fd\u662f\u5e38\u91cf\n// es\u6a21\u5757\u90fd\u662f\u8fd0\u884c\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\u7684\n// ES\u6a21\u5757\u5316\uff0c\u5728\u6d4f\u89c8\u5668\u4e2d\u540c\u6837\u652f\u6301\uff0c\u4f46\u662f\u901a\u5e38\u6211\u4eec\u4e0d\u4f1a\u76f4\u63a5\u4f7f\u7528\n//          \u901a\u5e38\u90fd\u4f1a\u7ed3\u5408\u6253\u5305\u5de5\u5177\u4f7f\u7528\nconsole.log(c)\n\nc.name = "\u6c99\u548c\u5c1a"\n\nconsole.log(c)\n')),(0,r.kt)("h2",{id:"es6-\u6a21\u5757\u4e0e-commonjs-\u6a21\u5757\u7684\u5dee\u5f02"},(0,r.kt)("a",{parentName:"h2",href:"https://juejin.cn/post/7002007274877091870"},"ES6 \u6a21\u5757\u4e0e CommonJS \u6a21\u5757\u7684\u5dee\u5f02")),(0,r.kt)("p",null,"\u8ba8\u8bba Node.js \u52a0\u8f7d ES6 \u6a21\u5757\u4e4b\u524d\uff0c\u5fc5\u987b\u4e86\u89e3 ES6 \u6a21\u5757\u4e0e CommonJS \u6a21\u5757\u5b8c\u5168\u4e0d\u540c\u3002"),(0,r.kt)("p",null,"\u5b83\u4eec\u6709\u4e09\u4e2a\u91cd\u5927\u5dee\u5f02\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"CommonJS \u6a21\u5757\u8f93\u51fa\u7684\u662f\u4e00\u4e2a\u503c\u7684\u62f7\u8d1d\uff0cES6 \u6a21\u5757\u8f93\u51fa\u7684\u662f\u503c\u7684\u5f15\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"CommonJS \u6a21\u5757\u662f\u8fd0\u884c\u65f6\u52a0\u8f7d\uff0cES6 \u6a21\u5757\u662f\u7f16\u8bd1\u65f6\u8f93\u51fa\u63a5\u53e3\u3002"),(0,r.kt)("li",{parentName:"ul"},"CommonJS \u6a21\u5757\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"require()"),"\u662f\u540c\u6b65\u52a0\u8f7d\u6a21\u5757\uff0cES6 \u6a21\u5757\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"import"),"\u547d\u4ee4\u662f\u5f02\u6b65\u52a0\u8f7d\uff0c\u6709\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5757\u4f9d\u8d56\u7684\u89e3\u6790\u9636\u6bb5\u3002")),(0,r.kt)("p",null,"\u7b2c\u4e8c\u4e2a\u5dee\u5f02\u662f\u56e0\u4e3a CommonJS \u52a0\u8f7d\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u5373",(0,r.kt)("inlineCode",{parentName:"p"},"module.exports"),"\u5c5e\u6027\uff09\uff0c\u8be5\u5bf9\u8c61\u53ea\u6709\u5728\u811a\u672c\u8fd0\u884c\u5b8c\u624d\u4f1a\u751f\u6210\u3002\u800c ES6 \u6a21\u5757\u4e0d\u662f\u5bf9\u8c61\uff0c\u5b83\u7684\u5bf9\u5916\u63a5\u53e3\u53ea\u662f\u4e00\u79cd\u9759\u6001\u5b9a\u4e49\uff0c\u5728\u4ee3\u7801\u9759\u6001\u89e3\u6790\u9636\u6bb5\u5c31\u4f1a\u751f\u6210\u3002"),(0,r.kt)("p",null,"\u4e0b\u9762\u91cd\u70b9\u89e3\u91ca\u7b2c\u4e00\u4e2a\u5dee\u5f02\u3002"),(0,r.kt)("p",null,"CommonJS \u6a21\u5757\u8f93\u51fa\u7684\u662f\u503c\u7684\u62f7\u8d1d\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u65e6\u8f93\u51fa\u4e00\u4e2a\u503c\uff0c\u6a21\u5757\u5185\u90e8\u7684\u53d8\u5316\u5c31\u5f71\u54cd\u4e0d\u5230\u8fd9\u4e2a\u503c\u3002\u8bf7\u770b\u4e0b\u9762\u8fd9\u4e2a\u6a21\u5757\u6587\u4ef6",(0,r.kt)("inlineCode",{parentName:"p"},"lib.js"),"\u7684\u4f8b\u5b50\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// lib.js\nvar counter = 3;\nfunction incCounter() {\n  counter++;\n}\nmodule.exports = {\n  counter: counter,\n  incCounter: incCounter,\n};\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u8f93\u51fa\u5185\u90e8\u53d8\u91cf",(0,r.kt)("inlineCode",{parentName:"p"},"counter"),"\u548c\u6539\u5199\u8fd9\u4e2a\u53d8\u91cf\u7684\u5185\u90e8\u65b9\u6cd5",(0,r.kt)("inlineCode",{parentName:"p"},"incCounter"),"\u3002\u7136\u540e\uff0c\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"main.js"),"\u91cc\u9762\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// main.js\nvar mod = require('./lib');\n\nconsole.log(mod.counter);  // 3\nmod.incCounter();\nconsole.log(mod.counter); // 3\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"lib.js"),"\u6a21\u5757\u52a0\u8f7d\u4ee5\u540e\uff0c\u5b83\u7684\u5185\u90e8\u53d8\u5316\u5c31\u5f71\u54cd\u4e0d\u5230\u8f93\u51fa\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"mod.counter"),"\u4e86\u3002\u8fd9\u662f\u56e0\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"mod.counter"),"\u662f\u4e00\u4e2a\u539f\u59cb\u7c7b\u578b\u7684\u503c\uff0c\u4f1a\u88ab\u7f13\u5b58\u3002\u9664\u975e\u5199\u6210\u4e00\u4e2a\u51fd\u6570\uff0c\u624d\u80fd\u5f97\u5230\u5185\u90e8\u53d8\u52a8\u540e\u7684\u503c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// lib.js\nvar counter = 3;\nfunction incCounter() {\n  counter++;\n}\nmodule.exports = {\n  get counter() {\n    return counter\n  },\n  incCounter: incCounter,\n};\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8f93\u51fa\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"counter"),"\u5c5e\u6027\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u53d6\u503c\u5668\u51fd\u6570\u3002\u73b0\u5728\u518d\u6267\u884c",(0,r.kt)("inlineCode",{parentName:"p"},"main.js"),"\uff0c\u5c31\u53ef\u4ee5\u6b63\u786e\u8bfb\u53d6\u5185\u90e8\u53d8\u91cf",(0,r.kt)("inlineCode",{parentName:"p"},"counter"),"\u7684\u53d8\u52a8\u4e86\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ node main.js\n3\n4\n")),(0,r.kt)("p",null,"ES6 \u6a21\u5757\u7684\u8fd0\u884c\u673a\u5236\u4e0e CommonJS \u4e0d\u4e00\u6837\u3002JS \u5f15\u64ce\u5bf9\u811a\u672c\u9759\u6001\u5206\u6790\u7684\u65f6\u5019\uff0c\u9047\u5230\u6a21\u5757\u52a0\u8f7d\u547d\u4ee4",(0,r.kt)("inlineCode",{parentName:"p"},"import"),"\uff0c\u5c31\u4f1a\u751f\u6210\u4e00\u4e2a\u53ea\u8bfb\u5f15\u7528\u3002\u7b49\u5230\u811a\u672c\u771f\u6b63\u6267\u884c\u65f6\uff0c\u518d\u6839\u636e\u8fd9\u4e2a\u53ea\u8bfb\u5f15\u7528\uff0c\u5230\u88ab\u52a0\u8f7d\u7684\u90a3\u4e2a\u6a21\u5757\u91cc\u9762\u53bb\u53d6\u503c\u3002\u6362\u53e5\u8bdd\u8bf4\uff0cES6 \u7684",(0,r.kt)("inlineCode",{parentName:"p"},"import"),"\u6709\u70b9\u50cf Unix \u7cfb\u7edf\u7684\u201c\u7b26\u53f7\u8fde\u63a5\u201d\uff0c\u539f\u59cb\u503c\u53d8\u4e86\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"import"),"\u52a0\u8f7d\u7684\u503c\u4e5f\u4f1a\u8ddf\u7740\u53d8\u3002\u56e0\u6b64\uff0cES6 \u6a21\u5757\u662f\u52a8\u6001\u5f15\u7528\uff0c\u5e76\u4e14\u4e0d\u4f1a\u7f13\u5b58\u503c\uff0c\u6a21\u5757\u91cc\u9762\u7684\u53d8\u91cf\u7ed1\u5b9a\u5176\u6240\u5728\u7684\u6a21\u5757\u3002"),(0,r.kt)("p",null,"\u8fd8\u662f\u4e3e\u4e0a\u9762\u7684\u4f8b\u5b50\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// lib.js\nexport let counter = 3;\nexport function incCounter() {\n  counter++;\n}\n\n// main.js\nimport { counter, incCounter } from './lib';\nconsole.log(counter); // 3\nincCounter();\nconsole.log(counter); // 4\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0cES6 \u6a21\u5757\u8f93\u5165\u7684\u53d8\u91cf",(0,r.kt)("inlineCode",{parentName:"p"},"counter"),"\u662f\u6d3b\u7684\uff0c\u5b8c\u5168\u53cd\u5e94\u5176\u6240\u5728\u6a21\u5757",(0,r.kt)("inlineCode",{parentName:"p"},"lib.js"),"\u5185\u90e8\u7684\u53d8\u5316\u3002"),(0,r.kt)("p",null,"\u518d\u4e3e\u4e00\u4e2a\u51fa\u73b0\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"export"),"\u4e00\u8282\u4e2d\u7684\u4f8b\u5b50\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// m1.js\nexport var foo = 'bar';\nsetTimeout(() => foo = 'baz', 500);\n\n// m2.js\nimport {foo} from './m1.js';\nconsole.log(foo);\nsetTimeout(() => console.log(foo), 500);\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"m1.js"),"\u7684\u53d8\u91cf",(0,r.kt)("inlineCode",{parentName:"p"},"foo"),"\uff0c\u5728\u521a\u52a0\u8f7d\u65f6\u7b49\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"bar"),"\uff0c\u8fc7\u4e86 500 \u6beb\u79d2\uff0c\u53c8\u53d8\u4e3a\u7b49\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"baz"),"\u3002"),(0,r.kt)("p",null,"\u8ba9\u6211\u4eec\u770b\u770b\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"m2.js"),"\u80fd\u5426\u6b63\u786e\u8bfb\u53d6\u8fd9\u4e2a\u53d8\u5316\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ babel-node m2.js\n\nbar\nbaz\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u8868\u660e\uff0cES6 \u6a21\u5757\u4e0d\u4f1a\u7f13\u5b58\u8fd0\u884c\u7ed3\u679c\uff0c\u800c\u662f\u52a8\u6001\u5730\u53bb\u88ab\u52a0\u8f7d\u7684\u6a21\u5757\u53d6\u503c\uff0c\u5e76\u4e14\u53d8\u91cf\u603b\u662f\u7ed1\u5b9a\u5176\u6240\u5728\u7684\u6a21\u5757\u3002"),(0,r.kt)("p",null,"\u7531\u4e8e ES6 \u8f93\u5165\u7684\u6a21\u5757\u53d8\u91cf\uff0c\u53ea\u662f\u4e00\u4e2a\u201c\u7b26\u53f7\u8fde\u63a5\u201d\uff0c\u6240\u4ee5\u8fd9\u4e2a\u53d8\u91cf\u662f\u53ea\u8bfb\u7684\uff0c\u5bf9\u5b83\u8fdb\u884c\u91cd\u65b0\u8d4b\u503c\u4f1a\u62a5\u9519\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// lib.js\nexport let obj = {};\n\n// main.js\nimport { obj } from './lib';\n\nobj.prop = 123; // OK\nobj = {}; // TypeError\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"main.js"),"\u4ece",(0,r.kt)("inlineCode",{parentName:"p"},"lib.js"),"\u8f93\u5165\u53d8\u91cf",(0,r.kt)("inlineCode",{parentName:"p"},"obj"),"\uff0c\u53ef\u4ee5\u5bf9",(0,r.kt)("inlineCode",{parentName:"p"},"obj"),"\u6dfb\u52a0\u5c5e\u6027\uff0c\u4f46\u662f\u91cd\u65b0\u8d4b\u503c\u5c31\u4f1a\u62a5\u9519\u3002\u56e0\u4e3a\u53d8\u91cf",(0,r.kt)("inlineCode",{parentName:"p"},"obj"),"\u6307\u5411\u7684\u5730\u5740\u662f\u53ea\u8bfb\u7684\uff0c\u4e0d\u80fd\u91cd\u65b0\u8d4b\u503c\uff0c\u8fd9\u5c31\u597d\u6bd4",(0,r.kt)("inlineCode",{parentName:"p"},"main.js"),"\u521b\u9020\u4e86\u4e00\u4e2a\u540d\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"obj"),"\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"const"),"\u53d8\u91cf\u3002"),(0,r.kt)("p",null,"\u6700\u540e\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"export"),"\u901a\u8fc7\u63a5\u53e3\uff0c\u8f93\u51fa\u7684\u662f\u540c\u4e00\u4e2a\u503c\u3002\u4e0d\u540c\u7684\u811a\u672c\u52a0\u8f7d\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5f97\u5230\u7684\u90fd\u662f\u540c\u6837\u7684\u5b9e\u4f8b\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// mod.js\nfunction C() {\n  this.sum = 0;\n  this.add = function () {\n    this.sum += 1;\n  };\n  this.show = function () {\n    console.log(this.sum);\n  };\n}\n\nexport let c = new C();\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u7684\u811a\u672c",(0,r.kt)("inlineCode",{parentName:"p"},"mod.js"),"\uff0c\u8f93\u51fa\u7684\u662f\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"C"),"\u7684\u5b9e\u4f8b\u3002\u4e0d\u540c\u7684\u811a\u672c\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\uff0c\u5f97\u5230\u7684\u90fd\u662f\u540c\u4e00\u4e2a\u5b9e\u4f8b\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// x.js\nimport {c} from './mod';\nc.add();\n\n// y.js\nimport {c} from './mod';\nc.show();\n\n// main.js\nimport './x';\nimport './y';\n")),(0,r.kt)("p",null,"\u73b0\u5728\u6267\u884c",(0,r.kt)("inlineCode",{parentName:"p"},"main.js"),"\uff0c\u8f93\u51fa\u7684\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"1"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ babel-node main.js\n1\n")),(0,r.kt)("p",null,"\u8fd9\u5c31\u8bc1\u660e\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"x.js"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"y.js"),"\u52a0\u8f7d\u7684\u90fd\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"C"),"\u7684\u540c\u4e00\u4e2a\u5b9e\u4f8b\u3002"),(0,r.kt)("p",null,"\u4f5c\u8005\uff1aartist\n\u94fe\u63a5\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7002007274877091870"},"https://juejin.cn/post/7002007274877091870"),"\n\u6765\u6e90\uff1a\u7a00\u571f\u6398\u91d1\n\u8457\u4f5c\u6743\u5f52\u4f5c\u8005\u6240\u6709\u3002\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u4f5c\u8005\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002"),(0,r.kt)("h2",{id:"\u6838\u5fc3\u6a21\u5757"},"\u6838\u5fc3\u6a21\u5757"),(0,r.kt)("p",null,"\u6838\u5fc3\u6a21\u5757\uff0c\u662fnode\u4e2d\u81ea\u5e26\u7684\u6a21\u5757\uff0c\u53ef\u4ee5\u5728node\u4e2d\u76f4\u63a5\u4f7f\u7528"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"window \u662f\u6d4f\u89c8\u5668\u7684\u5bbf\u4e3b\u5bf9\u8c61")," node\u4e2d\u662f\u6ca1\u6709\u7684"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"global \u662fnode\u4e2d\u7684\u5168\u5c40\u5bf9\u8c61"),"\uff0c\u4f5c\u7528\u7c7b\u4f3c\u4e8ewindow"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"ES\u6807\u51c6\u4e0b\uff0c\u5168\u5c40\u5bf9\u8c61\u7684\u6807\u51c6\u540d\u5e94\u8be5\u662f globalThis")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"console.log(globalThis)\n")),(0,r.kt)("h3",{id:"process"},"process"),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u8868\u793a\u5f53\u524d\u7684node\u8fdb\u7a0b")),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u901a\u8fc7\u8be5\u5bf9\u8c61\u53ef\u4ee5\u83b7\u53d6\u8fdb\u7a0b\u7684\u4fe1\u606f\uff0c\u6216\u8005\u5bf9\u8fdb\u7a0b\u505a\u5404\u79cd\u64cd\u4f5c")),(0,r.kt)("p",null,"\u200b            ","-"," \u5982\u4f55\u4f7f\u7528"),(0,r.kt)("p",null,"\u200b                \\1. process\u662f\u4e00\u4e2a",(0,r.kt)("strong",{parentName:"p"},"\u5168\u5c40\u53d8\u91cf"),"\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528"),(0,r.kt)("p",null,"\u200b                \\2. \u6709\u54ea\u4e9b\u5c5e\u6027\u548c\u65b9\u6cd5\uff1a"),(0,r.kt)("p",null,"\u200b                    ",(0,r.kt)("strong",{parentName:"p"},"process.exit()")),(0,r.kt)("p",null,"\u200b                        ","-"," \u7ed3\u675f\u5f53\u524d\u8fdb\u7a0b\uff0c\u7ec8\u6b62node"),(0,r.kt)("p",null,"\u200b                    ",(0,r.kt)("strong",{parentName:"p"},"process.nextTick(callback","[, \u2026args]",")")),(0,r.kt)("p",null,"\u200b                        ","-"," \u5c06\u51fd\u6570\u63d2\u5165\u5230 tick\u961f\u5217\u4e2d"),(0,r.kt)("p",null,"\u200b                        ","-"," tick\u961f\u5217\u4e2d\u7684\u4ee3\u7801\uff0c\u4f1a\u5728\u4e0b\u4e00\u6b21\u4e8b\u4ef6\u5faa\u73af\u4e4b\u524d\u6267\u884c"),(0,r.kt)("p",null,"\u200b                            \u4f1a\u5728\u5fae\u4efb\u52a1\u961f\u5217\u548c\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u4efb\u52a1\u4e4b\u524d\u6267\u884c"),(0,r.kt)("p",null,"\u200b            \u4e8b\u4ef6\u987a\u5e8f\uff1a"),(0,r.kt)("p",null,"\u200b                ",(0,r.kt)("strong",{parentName:"p"},"\u8c03\u7528\u6808")),(0,r.kt)("p",null,"\u200b                ",(0,r.kt)("strong",{parentName:"p"},"tick\u961f\u5217")),(0,r.kt)("p",null,"\u200b                ",(0,r.kt)("strong",{parentName:"p"},"\u5fae\u4efb\u52a1\u961f\u5217")),(0,r.kt)("p",null,"\u200b                ",(0,r.kt)("strong",{parentName:"p"},"\u5b8f\u4efb\u52a1\u961f\u5217")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// console.log(11111)\n// process.exit(0)\n// console.log(22222)\n// console.log(33333)\n\nsetTimeout(() => {\n    console.log(1) // \u5b8f\u4efb\u52a1\u961f\u5217\n})\n\nqueueMicrotask(() => {\n    console.log(2)\n}) // \u5fae\u4efb\u52a1\u961f\u5217\n\nprocess.nextTick(() => {\n    console.log(3) // tick\u961f\u5217\n})\n\nconsole.log(4) // \u8c03\u7528\u6808\n")),(0,r.kt)("h3",{id:"path"},"path"),(0,r.kt)("p",null,"\u200b    ",(0,r.kt)("strong",{parentName:"p"},"path")),(0,r.kt)("p",null,"\u200b        ","-"," \u8868\u793a\u7684\u8def\u5f84"),(0,r.kt)("p",null,"\u200b        ","-"," \u901a\u8fc7path\u53ef\u4ee5\u7528\u6765\u83b7\u53d6\u5404\u79cd\u8def\u5f84"),(0,r.kt)("p",null,"\u200b        ","-"," \u8981\u4f7f\u7528path\uff0c\u9700\u8981\u5148\u5bf9\u5176\u8fdb\u884c\u5f15\u5165"),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u65b9\u6cd5"),"\uff1a"),(0,r.kt)("p",null,"\u200b            ",(0,r.kt)("strong",{parentName:"p"},"path.resolve(","[\u2026paths]",")")," "),(0,r.kt)("p",null,"\u200b                ","-"," \u7528\u6765\u751f\u6210\u4e00\u4e2a",(0,r.kt)("strong",{parentName:"p"},"\u7edd\u5bf9\u8def\u5f84")),(0,r.kt)("p",null,"\u200b                    \u76f8\u5bf9\u8def\u5f84\uff1a./xxx  ../xxx  xxx"),(0,r.kt)("p",null,"\u200b                    \u7edd\u5bf9\u8def\u5f84\uff1a"),(0,r.kt)("p",null,"\u200b                        ","-"," \u5728\u8ba1\u7b97\u673a\u672c\u5730"),(0,r.kt)("p",null,"\u200b                            c:\\xxx"),(0,r.kt)("p",null,"\u200b                            /User/xxxx"),(0,r.kt)("p",null,"\u200b                        ","-"," \u5728\u7f51\u7edc\u4e2d"),(0,r.kt)("p",null,"\u200b                            ",(0,r.kt)("a",{parentName:"p",href:"http://www.xxxxx/"},"http://www.xxxxx/"),"..."),(0,r.kt)("p",null,"\u200b                            ",(0,r.kt)("a",{parentName:"p",href:"https://www.xxx/"},"https://www.xxx/"),"..."),(0,r.kt)("p",null,"\u200b                    ","-"," \u5982\u679c",(0,r.kt)("strong",{parentName:"p"},"\u76f4\u63a5\u8c03\u7528resolve\uff0c\u5219\u8fd4\u56de\u5f53\u524d\u7684\u5de5\u4f5c\u76ee\u5f55")),(0,r.kt)("p",null,"\u200b                        C:\\Program Files\\nodejs\\node.exe .\\03_\u5305\u7ba1\u7406\u5668\\01_path.js"),(0,r.kt)("p",null,"\u200b                        c:\\Users\\lilichao\\Desktop\\Node-Course"),(0,r.kt)("p",null,"\u200b                        node .\\01_path.js"),(0,r.kt)("p",null,"\u200b                        C:\\Users\\lilichao\\Desktop\\Node-Course\\03_\u5305\u7ba1\u7406\u5668"),(0,r.kt)("p",null,"\u200b                        ","-"," \u6ce8\u610f\uff0c\u6211\u4eec",(0,r.kt)("strong",{parentName:"p"},"\u901a\u8fc7\u4e0d\u540c\u7684\u65b9\u5f0f\u6267\u884c\u4ee3\u7801\u65f6\uff0c\u5b83\u7684\u5de5\u4f5c\u76ee\u5f55\u662f\u6709\u53ef\u80fd\u53d1\u751f\u53d8\u5316\u7684")),(0,r.kt)("p",null,"\u200b                ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u5982\u679c\u5c06\u4e00\u4e2a\u76f8\u5bf9\u8def\u5f84\u4f5c\u4e3a\u53c2\u6570"),"\uff0c"),(0,r.kt)("p",null,"\u200b                    ",(0,r.kt)("strong",{parentName:"p"},"\u5219resolve\u4f1a\u81ea\u52a8\u5c06\u5176\u8f6c\u6362\u4e3a\u7edd\u5bf9\u8def\u5f84")),(0,r.kt)("p",null,"\u200b                    ",(0,r.kt)("strong",{parentName:"p"},"\u6b64\u65f6\u6839\u636e\u5de5\u4f5c\u76ee\u5f55\u7684\u4e0d\u540c\uff0c\u5b83\u6240\u4ea7\u751f\u7684\u7edd\u5bf9\u8def\u5f84\u4e5f\u4e0d\u540c")),(0,r.kt)("p",null,"\u200b                ","-"," \u4e00\u822c\u4f1a\u5c06\u4e00\u4e2a",(0,r.kt)("strong",{parentName:"p"},"\u7edd\u5bf9\u8def\u5f84\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570"),"\uff0c"),(0,r.kt)("p",null,"\u200b                    \u4e00\u4e2a",(0,r.kt)("strong",{parentName:"p"},"\u76f8\u5bf9\u8def\u5f84\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570")),(0,r.kt)("p",null,"\u200b                    \u8fd9\u6837\u5b83",(0,r.kt)("strong",{parentName:"p"},"\u4f1a\u81ea\u52a8\u8ba1\u7b97\u51fa\u6700\u7ec8\u7684\u8def\u5f84")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const path = require("node:path")\nconst result = path.resolve()\n\n\n// c:\\Users\\lilichao\\Desktop\\Node-Course\\hello.js\nconst result = path.resolve("./hello.js")\nconst result = path.resolve(\n    "C:\\\\Users\\\\lilichao\\\\Desktop\\\\Node-Course\\\\03_\u5305\u7ba1\u7406\u5668",\n    "../../hello.js")\n\n\n// \u6700\u7ec8\u5f62\u6001\n// \u4ee5\u540e\u5728\u4f7f\u7528\u8def\u5f84\u65f6\uff0c\u5c3d\u91cf\u901a\u8fc7path.resolve()\u6765\u751f\u6210\u8def\u5f84\nconst result = path.resolve(__dirname, "./hello.js")\nconsole.log(result)\n')),(0,r.kt)("h3",{id:"fs"},"fs"),(0,r.kt)("p",null,"\u200b    ",(0,r.kt)("strong",{parentName:"p"},"fs \uff08File System\uff09")),(0,r.kt)("p",null,"\u200b        ","-"," fs\u7528\u6765\u5e2e\u52a9node\u6765\u64cd\u4f5c\u78c1\u76d8\u4e2d\u7684\u6587\u4ef6"),(0,r.kt)("p",null,"\u200b        ","-"," \u6587\u4ef6\u64cd\u4f5c\u4e5f\u5c31\u662f\u6240\u8c13\u7684",(0,r.kt)("strong",{parentName:"p"},"I/O\uff0cinput output")),(0,r.kt)("p",null,"\u200b        ","-"," \u4f7f\u7528fs\u6a21\u5757\uff0c\u540c\u6837\u9700\u8981\u5f15\u5165"),(0,r.kt)("h4",{id:"\u540c\u6b65\u548c\u5f02\u6b65\u8bfb\u53d6\u7248fs"},"\u540c\u6b65\u548c\u5f02\u6b65\u8bfb\u53d6\u7248fs"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const path = require("node:path")\nconst fs = require("node:fs")\n// \u628a\u786c\u76d8\u7684\u6570\u636e\u8bfb\u5230\u5185\u5b58\u5f53\u4e2d\n/*  \n    readFileSync() \u540c\u6b65\u7684\u8bfb\u53d6\u6587\u4ef6\u7684\u65b9\u6cd5\uff0c\u4f1a\u963b\u585e\u540e\u8fb9\u4ee3\u7801\u7684\u6267\u884c\n    \u5f53\u6211\u4eec\u901a\u8fc7fs\u6a21\u5757\u8bfb\u53d6\u78c1\u76d8\u4e2d\u7684\u6570\u636e\u65f6\uff0c\u8bfb\u53d6\u5230\u7684\u6570\u636e\u603b\u4f1a\u4ee5Buffer\u5bf9\u8c61\u7684\u5f62\u5f0f\u8fd4\u56de\n    Buffer\u662f\u4e00\u4e2a\u4e34\u65f6\u7528\u6765\u5b58\u50a8\u6570\u636e\u7684\u7f13\u51b2\u533a\n */\n// const buf = fs.readFileSync(path.resolve(__dirname, "./hello.txt"))\n// console.log(buf.toString())\n\n// readFile() \u5f02\u6b65\u7684\u8bfb\u53d6\u6587\u4ef6\u7684\u65b9\u6cd5\nfs.readFile(\n     path.resolve(__dirname, "./hello.txt"),\n     (err, buffer) => {\n\n         if (err) {\n             console.log("\u51fa\u9519\u4e86~")\n         } else {\n             console.log(buffer.toString())\n         }\n     }\n)\n')),(0,r.kt)("h4",{id:"promise\u7248fs"},"promise\u7248fs"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require(\"node:fs/promises\")  // \u5bfc\u5165promise\u7248\u7684fs\u6a21\u5757\n\nfs.readFile(path.resolve(__dirname, './hello123.txt'))\n    .then(res => {\n        console.log(res.toString());\n    })\n    .catch(err => {\n        console.log('err');\n    });\n")),(0,r.kt)("h4",{id:"asyncawiat\u8bed\u6cd5\u7cd6\u7248fs"},"async\u3001awiat\u8bed\u6cd5\u7cd6\u7248fs"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const fs = require("node:fs/promises")\n;(async ()=>{\n    try{\n        const buf=await fs.readFile(path.resolve(__dirname, \'./hello123.txt\'))\n        console.log(buf.toString());\n    }catch (e){\n        console.log("e",e);\n    }\n})()\n')),(0,r.kt)("h4",{id:"fs\u7684\u5b9e\u4f8b\u65b9\u6cd5"},"fs\u7684\u5b9e\u4f8b\u65b9\u6cd5"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u65b9\u6cd5"),(0,r.kt)("th",{parentName:"tr",align:null},"\u4f5c\u7528"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"readFile()"),(0,r.kt)("td",{parentName:"tr",align:null},"\u8bfb\u53d6\u6587\u4ef6")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"appendFile()"),(0,r.kt)("td",{parentName:"tr",align:null},"\u521b\u5efa\u65b0\u6587\u4ef6\uff0c\u6216\u5c06\u6570\u636e\u6dfb\u52a0\u5230\u5df2\u6709\u6587\u4ef6\u4e2d")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mkdir()"),(0,r.kt)("td",{parentName:"tr",align:null},"\u521b\u5efa\u76ee\u5f55")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"rmdir()"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5220\u9664\u76ee\u5f55")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"rm()"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5220\u9664\u6587\u4ef6")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"rename()"),(0,r.kt)("td",{parentName:"tr",align:null},"\u91cd\u547d\u540d ",(0,r.kt)("strong",{parentName:"td"},"(\u526a\u5207)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"copyFile()"),(0,r.kt)("td",{parentName:"tr",align:null},"\u590d\u5236\u6587\u4ef6",(0,r.kt)("strong",{parentName:"td"},"\uff08\u590d\u5236\uff09"))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const fs = require("node:fs/promises")\nconst path = require("node:path")\n\n// fs.appendFile(\n//     path.resolve(__dirname, "./hello123.txt"),\n//     "\u8d85\u54e5\u8bb2\u7684\u771f\u4e0d\u9519"\n// ).then(r => {\n//     console.log("\u6dfb\u52a0\u6210\u529f")\n// })\n\n// \u590d\u5236\u4e00\u4e2a\u6587\u4ef6\n// C:\\Users\\lilichao\\Desktop\\\u56fe\u7247\\jpg\\an.jpg\n\nfs.readFile(\'C:\\\\Users\\\\mm2001\\\\Pictures\\\\Snipaste_2021-04-11_01-28-45.jpg\')\n    .then(buffer => {\n         return fs.appendFile(\n             // \u751f\u6210\u4e00\u4e2a\u7edd\u5bf9\u8def\u5f84\n            path.resolve(__dirname, \'./ss.jpg\'),\n             // \u4f20\u5165buffer\u6570\u636e\n            buffer);\n    })\n    .then(e => {\n        console.log(\'\u64cd\u4f5c\u7ed3\u675f\',e);\n    });\n\n\nfs.mkdir()\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'/*\n    mkdir\u53ef\u4ee5\u63a5\u6536\u4e00\u4e2a \u914d\u7f6e\u5bf9\u8c61\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\n        \u901a\u8fc7\u8be5\u5bf9\u8c61\u53ef\u4ee5\u5bf9\u65b9\u6cd5\u7684\u529f\u80fd\u8fdb\u884c\u914d\u7f6e\n            recursive \u9ed8\u8ba4\u503c\u4e3afalse\n                - \u8bbe\u7f6etrue\u4ee5\u540e\uff0c\u4f1a\u81ea\u52a8\u521b\u5efa\u4e0d\u5b58\u5728\u7684\u4e0a\u4e00\u7ea7\u76ee\u5f55\n*/\n// fs.mkdir(path.resolve(__dirname, "./hello/abc"), { recursive: true })\n//     .then(r => {\n//         console.log("\u64cd\u4f5c\u6210\u529f~")\n//     })\n//     .catch(err => {\n//         console.log("\u521b\u5efa\u5931\u8d25", err)\n//     })\n\n// fs.rmdir(path.resolve(__dirname, "./hello"), { recursive: true })\n//     .then(r => {\n//         console.log("\u5220\u9664\u6210\u529f")\n//     })\n\nfs.rename(\n    path.resolve(__dirname, "../an.jpg"),\n    path.resolve(__dirname, "./an.jpg")\n).then(r => {\n    console.log("\u91cd\u547d\u540d\u6210\u529f")\n})\n')),(0,r.kt)("h1",{id:"\u5305\u7ba1\u7406\u5668"},"\u5305\u7ba1\u7406\u5668"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/cli/v8/commands/"},"npm\u4ed3\u5e93")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.lilichao.com/index.php/2022/10/21/%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/"},"\u5305\u7ba1\u7406\u5668 \u2013 \u674e\u7acb\u8d85 | lilichao.com")),(0,r.kt)("h2",{id:"npm"},"npm"),(0,r.kt)("h3",{id:"packagejson"},(0,r.kt)("strong",{parentName:"h3"},"package.json")),(0,r.kt)("p",null,"\u200b        ","-"," package.json",(0,r.kt)("strong",{parentName:"p"},"\u662f\u5305\u7684\u63cf\u8ff0\u6587\u4ef6")),(0,r.kt)("p",null,"\u200b        ","-"," node\u4e2d",(0,r.kt)("strong",{parentName:"p"},"\u901a\u8fc7\u8be5\u6587\u4ef6\u5bf9\u9879\u76ee\u8fdb\u884c\u63cf\u8ff0")),(0,r.kt)("p",null,"\u200b        ","-"," \u6bcf\u4e00\u4e2anode\u9879\u76ee\u5fc5\u987b\u6709package.json"),(0,r.kt)("p",null,"name\uff08\u5fc5\u5907\uff09"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5305\u7684\u540d\u79f0\uff0c\u53ef\u4ee5\u5305\u542b\u5c0f\u5199\u5b57\u6bcd\u3001_\u548c-")),(0,r.kt)("p",null,"version\uff08\u5fc5\u5907\uff09"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5305\u7684\u7248\u672c\uff0c\u9700\u8981\u9075\u4ecex.x.x\u7684\u683c\u5f0f"),(0,r.kt)("li",{parentName:"ul"},"\u89c4\u5219\uff1a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u7248\u672c\u4ece1.0.0\u5f00\u59cb"),(0,r.kt)("li",{parentName:"ul"},"\u4fee\u590d\u9519\u8bef\uff0c\u517c\u5bb9\u65e7\u7248\uff08\u8865\u4e01\uff091.0.1\u30011.0.2"),(0,r.kt)("li",{parentName:"ul"},"\u6dfb\u52a0\u529f\u80fd\uff0c\u517c\u5bb9\u65e7\u7248\uff08\u5c0f\u66f4\u65b0\uff091.1.0"),(0,r.kt)("li",{parentName:"ul"},"\u66f4\u65b0\u529f\u80fd\uff0c\u5f71\u54cd\u517c\u5bb9\uff08\u5927\u66f4\u65b0\uff092.0.0")))),(0,r.kt)("p",null,"author"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5305\u7684\u4f5c\u8005\uff0c\u683c\u5f0f\uff1aYour Name ",(0,r.kt)("a",{parentName:"li",href:"mailto:email@example.com"},"email@example.com"))),(0,r.kt)("p",null,"description"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5305\u7684\u63cf\u8ff0")),(0,r.kt)("p",null,"repository"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4ed3\u5e93\u5730\u5740\uff08git\uff09")),(0,r.kt)("p",null,"scripts"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u81ea\u52a8\u811a\u672c")),(0,r.kt)("p",null,"\u200b            ","-"," \u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e9b\u547d\u4ee4"),(0,r.kt)("p",null,"\u200b            ","-"," \u5b9a\u4e49\u4ee5\u540e\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7npm\u6765\u6267\u884c\u8fd9\u4e9b\u547d\u4ee4"),(0,r.kt)("p",null,"\u200b            ","-"," start \u548c test \u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 npm start npm test\u6267\u884c"),(0,r.kt)("p",null,"\u200b            ","-"," \u5176\u4ed6\u547d\u4ee4\u9700\u8981\u901a\u8fc7npm run xxx \u6267\u884c"),(0,r.kt)("p",null,"\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u81ea\u5df1\u521b\u5efa\u7684\u6bcf\u4e00\u4e2anode\u9879\u76ee\uff0c\u90fd\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u5305\u3002\u90fd\u5e94\u8be5\u4e3a\u5176\u521b\u5efapackage.json\u63cf\u8ff0\u6587\u4ef6\u3002\u540c\u65f6\uff0cnpm\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5feb\u901f\u7684\u521b\u5efapackage.json\u6587\u4ef6\u3002\u53ea\u9700\u8981\u8fdb\u5165\u9879\u76ee\u5e76\u8f93\u5165",(0,r.kt)("inlineCode",{parentName:"p"},"npm init"),"\u5373\u53ef\u8fdb\u5165npm\u7684\u4ea4\u4e92\u754c\u9762\uff0c\u53ea\u9700\u6839\u636e\u63d0\u793a\u8f93\u5165\u76f8\u5e94\u4fe1\u606f\u5373\u53ef\u3002"),(0,r.kt)("h3",{id:"\u547d\u4ee4"},(0,r.kt)("strong",{parentName:"h3"},"\u547d\u4ee4")),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"npm init \u521d\u59cb\u5316\u9879\u76ee"),"\uff0c\u521b\u5efapackage.json\u6587\u4ef6\uff08\u9700\u8981\u56de\u7b54\u95ee\u9898\uff09"),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"npm init -y \u521d\u59cb\u5316\u9879\u76ee"),"\uff0c\u521b\u5efapackage.json\u6587\u4ef6\uff08\u6240\u6709\u503c\u90fd\u91c7\u7528\u9ed8\u8ba4\u503c\uff09"),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"npm install")," \u5305\u540d \u5c06\u6307\u5b9a\u5305\u4e0b\u8f7d\u5230\u5f53\u524d\u9879\u76ee\u4e2d"),(0,r.kt)("p",null,"\u200b            install\u65f6\u53d1\u751f\u4e86\u4ec0\u4e48\uff1f"),(0,r.kt)("p",null,"\u200b                \u2460 \u5c06\u5305\u4e0b\u8f7d\u5f53\u524d\u9879\u76ee\u7684",(0,r.kt)("strong",{parentName:"p"},"node_modules\u76ee\u5f55"),"\u4e0b"),(0,r.kt)("p",null,"\u200b                \u2461 \u4f1a\u5728package.json\u7684",(0,r.kt)("strong",{parentName:"p"},"dependencies"),"\u5c5e\u6027\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u65b0\u5c5e\u6027"),(0,r.kt)("p",null,'\u200b                    "lodash": "^4.17.21"'),(0,r.kt)("p",null,"\u200b\t\t\t\t\t\t",(0,r.kt)("strong",{parentName:"p"},"^"),"\u662f\u81ea\u52a8\u5339\u914d\u6700\u65b04.\u51e0\u7684\u5c0f\u66f4\u65b0\u7248\u672c\u3002"),(0,r.kt)("p",null,"\u200b\t\t\t\t\t\t",(0,r.kt)("strong",{parentName:"p"},"~"),"\u81ea\u52a8\u5339\u914d4.17.\u51e0\u7684\u6700\u65b0\u8865\u4e01\uff08bug\u4fee\u590d\uff09\u7248\u672c"),(0,r.kt)("p",null,"\u200b\t\t\t\t\t\t",(0,r.kt)("strong",{parentName:"p"},"*"),"\uff0c\u6700\u65b0\u7248\u672c\u5305\u62ec\u5927\u66f4\u65b0"),(0,r.kt)("p",null,"\u200b\t\t\t\t\t\t\u6ca1\u6709\u524d\u7f00\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u56fa\u5b9a\u7248\u672c")),(0,r.kt)("p",null,"\u200b                \u2462 \u4f1a\u81ea\u52a8\u6dfb\u52a0package-lock.json\u6587\u4ef6"),(0,r.kt)("p",null,"\u200b                    \u5e2e\u52a9\u52a0\u901fnpm\u4e0b\u8f7d\u7684\uff0c\u4e0d\u7528\u52a8\u4ed6"),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"npm install")," \u81ea\u52a8\u5b89\u88c5\u6240\u6709\u4f9d\u8d56"),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"npm install \u5305\u540d -g")," \u5168\u5c40\u5b89\u88c5"),(0,r.kt)("p",null,"\u200b            ","-"," \u5168\u5c40\u5b89\u88c5\u662f\u5c06\u5305\u5b89\u88c5\u5230\u8ba1\u7b97\u673a\u4e2d"),(0,r.kt)("p",null,"\u200b            ","-"," \u5168\u5c40\u5b89\u88c5\u7684\u901a\u5e38\u90fd\u662f\u4e00\u4e9b\u5de5\u5177"),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"npm uninstall")," \u5305\u540d \u5378\u8f7d   "),(0,r.kt)("p",null,"\u200b        "),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/cli/v8/commands"},"https://docs.npmjs.com/cli/v8/commands")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'/* \n    \u5f15\u5165\u4ecenpm\u4e0b\u8f7d\u7684\u5305\u65f6\uff0c\u4e0d\u9700\u8981\u4e66\u5199\u8def\u5f84\uff0c\u76f4\u63a5\u5199\u5305\u540d\u5373\u53ef\n*/\nconst _ = require("lodash")\n// console.log(_)\n')),(0,r.kt)("h3",{id:"npm\u955c\u50cf"},"npm\u955c\u50cf"),(0,r.kt)("p",null,"\u200b        ","-"," npm\u7684\u4ed3\u7ba1\u7684\u670d\u52a1\u5668\u4f4d\u4e8e\u56fd\u5916\uff0c\u6709\u65f6\u5019\u5e76\u4e0d\u662f\u90a3\u4e48\u7684\u597d\u4f7f"),(0,r.kt)("p",null,"\u200b        ","-"," \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u5728npm\u4e2d\u914d\u7f6e\u4e00\u4e2a\u955c\u50cf\u670d\u52a1\u5668"),(0,r.kt)("p",null,"\u200b        ","-"," \u955c\u50cf\u7684\u914d\u7f6e\uff1a"),(0,r.kt)("p",null,"\u200b            \u2460 \u5728\u7cfb\u7edf\u4e2d\u5b89\u88c5cnpm\uff08\u6211\u81ea\u5df1\u4e0d\u592a\u63a8\u8350\u5927\u5bb6\u4f7f\u7528\uff09"),(0,r.kt)("p",null,"\u200b                npm install -g cnpm --registry=",(0,r.kt)("a",{parentName:"p",href:"https://registry.npmmirror.com"},"https://registry.npmmirror.com")),(0,r.kt)("p",null,"\u200b            \u2461 \u5f7b\u5e95\u4fee\u6539npm\u4ed3\u5e93\u5730\u5740\uff08\u6211\u4e2a\u4eba\u4e60\u60ef\u7684\u4f7f\u7528\u65b9\u5f0f\uff09"),(0,r.kt)("p",null,"\u200b                npm set registry ",(0,r.kt)("a",{parentName:"p",href:"https://registry.npmmirror.com"},"https://registry.npmmirror.com")),(0,r.kt)("p",null,"\u200b                ","-"," \u8fd8\u539f\u5230\u539f\u7248\u4ed3\u5e93"),(0,r.kt)("p",null,"\u200b                npm config delete registry"),(0,r.kt)("p",null,"\u200b\t\t\t\u67e5\u770b\u5f53\u524d\u4ed3\u5e93\u6ce8\u518c\u5730\u5740"),(0,r.kt)("p",null,"\u200b\t\t\t\tnpm config get registry"),(0,r.kt)("h2",{id:"yarn-pnpm"},"yarn pnpm"),(0,r.kt)("p",null,"\u200b    \u65e9\u671f\u7684npm\u5b58\u5728\u6709\u5f88\u591a\u7684\u95ee\u9898\uff0c"),(0,r.kt)("p",null,"\u200b        \u6240\u4ee5\u6709\u5f88\u591a\u7684\u5382\u5546\u5c1d\u8bd5\u7740\u5f00\u53d1\u4e86\u4e00\u4e9b\u4ee3\u66ffnpm\u7684\u5de5\u5177"),(0,r.kt)("p",null,"\u200b        \u6bd4\u5982 yarn pnpm"),(0,r.kt)("p",null,"\u200b        "),(0,r.kt)("p",null,"\u200b        \u5728\u4e4b\u524d\uff0c\u8fd9\u4e9b\u7b2c\u4e09\u65b9\u7684\u5de5\u5177\u76f8\u8f83\u4e8enpm\u5177\u6709\u7684\u5f88\u591a\u7684\u4f18\u52bf"),(0,r.kt)("p",null,"\u200b            \u4f46\u662f\u968f\u7740\u65f6\u95f4\u7684\u63a8\u8fdb\uff0cnpm\u4e5f\u5728\u8fdb\u884c\u4e0d\u65ad\u7684\u8fed\u4ee3\uff0c\u6240\u4ee5\u5230\u4eca\u5929"),(0,r.kt)("p",null,"\u200b            npm\u548c\u5176\u4ed6\u5de5\u5177\u7684\u5dee\u8ddd\u5e76\u4e0d\u662f\u975e\u5e38\u7684\u5927"),(0,r.kt)("p",null,"\u200b        "),(0,r.kt)("p",null,"\u200b        \u548cnpm\u76f8\u6bd4\uff0cyarn\u4e0b\u8f7d\u5305\u7684\u901f\u5ea6\u4f1a\u5feb\u4e00\u4e9b"),(0,r.kt)("h3",{id:"yarn\u4e2a\u4eba\u4e60\u60ef\u7528yarn"},"yarn\uff08\u4e2a\u4eba\u4e60\u60ef\u7528yarn\uff09"),(0,r.kt)("p",null,"\u200b            ",(0,r.kt)("strong",{parentName:"p"},"\u5b89\u88c5")),(0,r.kt)("p",null,"\u200b                corepack enable"),(0,r.kt)("p",null,"\u200b\t\t\t\u5207\u6362\u52303\u7248\u672c\uff0c\u5f53\u524d\u9879\u76ee\u4e3a3\uff0c\u5168\u5c40\u8fd8\u662f\u7248\u672c1"),(0,r.kt)("p",null,"\u200b                yarn init -2"),(0,r.kt)("p",null,"\u200b            ",(0,r.kt)("strong",{parentName:"p"},"\u955c\u50cf\u914d\u7f6e")),(0,r.kt)("p",null,"\u200b                yarn config set registry ",(0,r.kt)("a",{parentName:"p",href:"https://registry.npmmirror.com"},"https://registry.npmmirror.com")),(0,r.kt)("p",null,"\u200b                \u5220\u9664\u914d\u7f6e\uff1a"),(0,r.kt)("p",null,"\u200b                    yarn config delete registry"),(0,r.kt)("p",null,"\u200b\t\t\t",(0,r.kt)("strong",{parentName:"p"},"\u6ce8\u610f"),"\uff1a"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"v1.22.19\u662fnpm\u4e0a\u7684\u6700\u65b0\u7248\uff0cyarn3\u8ddfnpm\u4e0d\u517c\u5bb9"),(0,r.kt)("p",{parentName:"blockquote"},"\u8fd0\u884cnode\uff0c\u9700\u8981\u524d\u9762\u52a0\t",(0,r.kt)("strong",{parentName:"p"},"yarn\tnode\tindex.js"))),(0,r.kt)("h4",{id:"\u547d\u4ee4-1"},"\u547d\u4ee4"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"yarn init \uff08\u521d\u59cb\u5316\uff0c\u521b\u5efapackage.json\uff09\n\nyarn add xxx\uff08\u6dfb\u52a0\u4f9d\u8d56\uff09\n\nyarn add xxx -D\uff08\u6dfb\u52a0\u5f00\u53d1\u4f9d\u8d56\uff09\n\nyarn remove xxx\uff08\u79fb\u9664\u5305\uff09\n\nyarn\uff08\u81ea\u52a8\u5b89\u88c5\u4f9d\u8d56\uff09\n\nyarn run\uff08\u6267\u884c\u81ea\u5b9a\u4e49\u811a\u672c\uff09\n\nyarn <\u6307\u4ee4>\uff08\u6267\u884c\u81ea\u5b9a\u4e49\u811a\u672c\uff09\n\nyarn global add\uff08\u5168\u5c40\u5b89\u88c5\uff09\n\nyarn global remove\uff08\u5168\u5c40\u79fb\u9664\uff09\n\nyarn global bin\uff08\u5168\u5c40\u5b89\u88c5\u76ee\u5f55\uff09\n")),(0,r.kt)("h3",{id:"pnpm"},"pnpm"),(0,r.kt)("p",null,"\u200b            ","-"," \u5b89\u88c5"),(0,r.kt)("p",null,"\u200b                npm install -g pnpm"),(0,r.kt)("p",null,"\u200b            "),(0,r.kt)("p",null,"\u200b            ","-"," \u955c\u50cf"),(0,r.kt)("p",null,"\u200b                pnpm config set registry ",(0,r.kt)("a",{parentName:"p",href:"https://registry.npmmirror.com"},"https://registry.npmmirror.com")),(0,r.kt)("p",null,"\u200b                ","-"," \u53d6\u6d88"),(0,r.kt)("p",null,"\u200b                pnpm config delete registry"),(0,r.kt)("h1",{id:"http\u534f\u8bae"},"http\u534f\u8bae"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"HTTP\u534f\u8bae"),"\n","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u7f51\u7edc\u57fa\u7840"),"\n","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u7f51\u7edc\u7684\u670d\u52a1\u5668\u57fa\u4e8e\u8bf7\u6c42\u548c\u54cd\u5e94\u7684")),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(1697).Z,width:"1920",height:"1080"})),(0,r.kt)("p",null,"\u200b        https:// ",(0,r.kt)("strong",{parentName:"p"},"\u534f\u8bae\u540d"),"  http ftp ..."),(0,r.kt)("p",null,"\u200b        lilichao.com ",(0,r.kt)("strong",{parentName:"p"},"\u57df\u540d")," domain\n\u200b            \u6574\u4e2a\u7f51\u7edc\u4e2d\u5b58\u5728\u7740\u65e0\u6570\u4e2a\u670d\u52a1\u5668\uff0c\u6bcf\u4e00\u4e2a\u6211\u670d\u52a1\u5668\u90fd\u6709\u5b83\u81ea\u5df1\u7684\u552f\u4e00\u6807\u8bc6\n\u200b                \u8fd9\u4e2a\u6807\u8bc6\u88ab\u79f0\u4e3a ",(0,r.kt)("strong",{parentName:"p"},"ip"),"\u5730\u5740 192.168.1.17\uff0c\u4f46\u662fip\u5730\u5740\u4e0d\u65b9\u4fbf\u8bb0\u5fc6\n\u200b                ",(0,r.kt)("strong",{parentName:"p"},"\u57df\u540d\u5c31\u76f8\u5f53\u4e8e\u662fip\u5730\u5740\u7684\u522b\u540d")),(0,r.kt)("p",null,"\u200b        /hello/index.html\n\u200b            ",(0,r.kt)("strong",{parentName:"p"},"\u7f51\u7ad9\u8d44\u6e90\u8def\u5f84")),(0,r.kt)("h2",{id:"http\u662f\u65e0\u72b6\u6001\u8bf7\u6c42"},(0,r.kt)("a",{parentName:"h2",href:"https://www.cnblogs.com/lingyejun/p/9282169.html"},"http\u662f\u65e0\u72b6\u6001\u8bf7\u6c42")),(0,r.kt)("p",null,"\u200b\t\t\u65e0\u72b6\u6001\u6307\u7684\u662f",(0,r.kt)("strong",{parentName:"p"},"\u5bf9\u4e8e\u8bf7\u6c42\u65b9\u7684\u6bcf\u4e2a\u8bf7\u6c42\uff0c\u63a5\u6536\u65b9\u90fd\u5f53\u8fd9\u6b21\u8bf7\u6c42\u662f\u7b2c\u4e00\u6b21\u8bf7\u6c42"),"\u3002\u4e3a\u4ec0\u4e48\u53eb\u505a\u65e0\u72b6\u6001\u5462\uff1f\u56e0\u4e3a\u5bf9\u4e8e\u8bf7\u6c42\u65b9\u800c\u8a00\uff0c\u6bcf\u6b21\u8bf7\u6c42\u65f6\uff0c\u63a5\u6536\u65b9\u5c31\u50cf\u662f\u5931\u5fc6\u4e86\u4e00\u6837\uff0c\u5e76\u4e0d\u4f1a\u4f9d\u8d56\u8bf7\u6c42\u65b9\u4ee5\u5f80\u7684\u8bf7\u6c42\u6240\u751f\u6210\u7684\u6570\u636e\u4f5c\u56de\u5e94\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5c31\u50cf\u662f",(0,r.kt)("strong",{parentName:"p"},"\u63a5\u6536\u65b9\u6ca1\u6709\u4fdd\u5b58\u8bf7\u6c42\u65b9\u7684\u72b6\u6001\uff08\u6570\u636e\uff09"),"\u4e00\u6837\uff0c\u6240\u4ee5\u53eb\u65e0\u72b6\u6001\u3002"),(0,r.kt)("p",null,"\u200b\t\t\u65e0\u72b6\u6001\u5e76\u4e0d\u4ee3\u8868\u63a5\u6536\u65b9\u4e0d\u4f1a\u4fdd\u5b58\u8bf7\u6c42\u65b9\u7684\u4efb\u4f55\u6570\u636e\uff0c\u5b83",(0,r.kt)("strong",{parentName:"p"},"\u53ea\u662f\u4e0d\u4fdd\u5b58\u4e0e\u63a5\u6536\u65b9\u53ef\u80fd\u7684\u4e0b\u6b21\u8bf7\u6c42\u76f8\u5173\u7684\u6570\u636e"),"\u3002\u6240\u4ee5\u65e0\u72b6\u6001\u8981\u6c42\u8bf7\u6c42\u65b9\u6bcf\u6b21\u8bf7\u6c42\u65f6\uff0c\u4e00\u6b21\u6027\u63d0\u4f9b\u4e0e\u8bf7\u6c42\u76f8\u5173\u7684\u5168\u90e8\u6570\u636e\uff0c\u800c\u4e0d\u80fd\u56e0\u4e3a\u67d0\u4e9b\u6570\u636e\u5728\u4ee5\u524d\u7684\u8bf7\u6c42\u4e2d\u63d0\u4f9b\u4e86\uff0c\u8fd9\u6b21\u8bf7\u6c42\u5c31\u4e0d\u63d0\u4f9b\u4e86\u3002\u90a3\u4e48\uff0c\u63a5\u6536\u65b9\u4e3a\u4ec0\u4e48\u4e0d\u4fdd\u5b58\u8fd9\u4e9b\u6570\u636e\u5462\uff1f\u539f\u56e0\u6709\u5f88\u591a\u3002\u4e00\u65b9\u9762\uff0c\u4fdd\u5b58\u8fd9\u4e9b\u6570\u636e\u9700\u8981\u7a7a\u95f4\u6d88\u8017\uff0c\u53e6\u4e00\u65b9\u9762\uff0c\u8fd9\u4f1a\u5e26\u6765\u7f16\u7a0b\u7684\u8d1f\u62c5\u3002"),(0,r.kt)("p",null,"\u200b\t\t\u65e0\u72b6\u6001\u8981\u4ece\u8bf7\u6c42\u65b9\u9488\u5bf9\u540c\u4e00\u64cd\u4f5c\u7684\u4e0d\u540c\u6b21\u8bf7\u6c42\u7684\u8bf7\u6c42\u6570\u636e\u6765\u8861\u91cf\u3002\u5982\u679c\u6bcf\u6b21\u8bf7\u6c42\u90fd\u5fc5\u987b\u643a\u5e26\u5b8c\u6574\u7684\u6570\u636e\uff0c\u90a3\u624d\u80fd\u7b97\u4f5c\u662f\u65e0\u72b6\u6001\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u3010\u6ce8\u610f\u3011")),(0,r.kt)("p",null,"\u201c\u6bcf\u6b21\u8bf7\u6c42\u90fd\u4e0d\u4f1a\u4fee\u6539\u63a5\u6536\u65b9\u7684\u6570\u636e\u201d\uff0c\u8fd9\u6307\u7684\u5e76\u4e0d\u662f\u65e0\u72b6\u6001\uff0c\u800c\u5e94\u8be5\u79f0\u4e4b\u4e3a\u53ea\u8bfb\u3002\u53ea\u8bfb\u7684\u8bf7\u6c42\u4e5f\u4e00\u822c\u4e5f\u662f\u65e0\u72b6\u6001\u7684\uff0c\u4e0d\u8fc7\u5b83\u4eec\u5728\u6982\u5ff5\u4e0a\u7684\u4fa7\u91cd\u70b9\u4e0d\u540c\u3002\u65e0\u72b6\u6001\u53ea\u662f\u4ee3\u8868\u63a5\u6536\u65b9\u4e0d\u4f1a\u5c06\u6570\u636e\u7a7a\u95f4\u6765\u4fdd\u5b58\u8bf7\u6c42\u65b9\u7684\u6bcf\u6b21\u8bf7\u6c42\u6570\u636e\uff0c\u4f46\u5982\u679c\u8bf7\u6c42\u6d89\u53ca\u5bf9\u63a5\u6536\u65b9\u6570\u636e\u5e93\u7684\u66f4\u65b0\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8bf7\u6c42\u5e76\u4e0d\u662f\u53ea\u8bfb\u7684\u3002\u63a5\u6536\u65b9\u53ea\u662f\u4e0d\u80fd\u76f4\u63a5\u8bc6\u522b\u8fd9\u662f\u54ea\u6b21\u8bf7\u6c42\u800c\u5df2\uff0c\u8fd9\u4e0d\u4ee3\u8868\u63a5\u6536\u65b9\u7684\u6570\u636e\u5e93\u4e0d\u4f1a\u53d7\u5230\u6bcf\u6b21\u8bf7\u6c42\u7684\u5f71\u54cd\u3002"),(0,r.kt)("h2",{id:"\u4e24\u9053\u9762\u8bd5\u9898"},"\u4e24\u9053\u9762\u8bd5\u9898"),(0,r.kt)("h3",{id:"1\u5f53\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u5730\u5740\u4ee5\u540e\u53d1\u751f\u4e86\u4ec0\u4e48"},"1.\u5f53\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u5730\u5740\u4ee5\u540e\u53d1\u751f\u4e86\u4ec0\u4e48\uff1f"),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("a",{parentName:"p",href:"https://lilichao.com/hello/index.html"},"https://lilichao.com/hello/index.html")),(0,r.kt)("p",null,"\u200b        \u2460 ",(0,r.kt)("strong",{parentName:"p"},"DNS\u89e3\u6790\uff0c\u83b7\u53d6\u7f51\u7ad9\u7684ip\u5730\u5740"),"\n\u200b        \u2461 ",(0,r.kt)("strong",{parentName:"p"},"\u6d4f\u89c8\u5668\u9700\u8981\u548c\u670d\u52a1\u5668\u5efa\u7acb\u8fde\u63a5\uff08tcp/ip\uff09\uff08\u4e09\u6b21\u63e1\u624b\uff09"),"\n\u200b        \u2462 ",(0,r.kt)("strong",{parentName:"p"},"\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff08http\u534f\u8bae\uff09"),"\n\u200b        \u2463 ",(0,r.kt)("strong",{parentName:"p"},"\u670d\u52a1\u5668\u5904\u7406\u8bf7\u6c42\uff0c\u5e76\u8fd4\u56de\u54cd\u5e94\uff08http\u534f\u8bae\uff09"),"\n\u200b        \u2464 ",(0,r.kt)("strong",{parentName:"p"},"\u6d4f\u89c8\u5668\u5c06\u54cd\u5e94\u7684\u9875\u9762\u6e32\u67d3"),"\n\u200b        \u2465 ",(0,r.kt)("strong",{parentName:"p"},"\u65ad\u5f00\u548c\u670d\u52a1\u5668\u7684\u8fde\u63a5\uff08\u56db\u6b21\u6325\u624b\uff09")),(0,r.kt)("h3",{id:"2\u5ba2\u6237\u7aef\u5982\u4f55\u548c\u670d\u52a1\u5668\u5efa\u7acb\u65ad\u5f00\u8fde\u63a5"},"2.\u5ba2\u6237\u7aef\u5982\u4f55\u548c\u670d\u52a1\u5668\u5efa\u7acb\uff08\u65ad\u5f00\uff09\u8fde\u63a5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"        - \u901a\u8fc7\u4e09\u6b21\u63e1\u624b\u548c\u56db\u6b21\u6325\u624b\n            - \u4e09\u6b21\u63e1\u624b\uff08\u5efa\u7acb\u8fde\u63a5\uff09\n                - \u4e09\u6b21\u63e1\u624b\u662f\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u5efa\u7acb\u8fde\u63a5\u7684\u8fc7\u7a0b\n                    1. \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u8fde\u63a5\u8bf7\u6c42\n                                    SYN\n                    2. \u670d\u52a1\u5668\u6536\u5230\u8fde\u63a5\u8bf7\u6c42\uff0c\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u6d88\u606f\n                                    SYN ACK \n                    3. \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u540c\u610f\u8fde\u63a5\u7684\u4fe1\u606f\n                                    ACK\n\n            - \u56db\u6b21\u6325\u624b\uff08\u65ad\u5f00\u8fde\u63a5\uff09\n                    1. \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\u901a\u77e5\u670d\u52a1\u5668\u6570\u636e\u53d1\u9001\u5b8c\u6bd5\uff0c\u8bf7\u6c42\u65ad\u5f00\u6765\u63a5\n                                    FIN\n                    2. \u670d\u52a1\u5668\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u6570\u636e\uff0c\u77e5\u9053\u4e86\n                                    ACK\n                    3. \u670d\u52a1\u5668\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u6570\u636e\uff0c\u6536\u5b8c\u4e86\uff0c\u53ef\u4ee5\u65ad\u5f00\u8fde\u63a5\n                                    FIN ACK\n                    4. \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u6570\u636e\uff0c\u53ef\u4ee5\u65ad\u5f00\u4e86\n                                    ACK\n")),(0,r.kt)("p",null,"\u8bf7\u6c42\u548c\u54cd\u5e94\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u6bb5\u6570\u636e\uff0c\u53ea\u662f\u8fd9\u6bb5\u6570\u636e\u9700\u8981\u9075\u5faa\u4e00\u4e2a\u7279\u6b8a\u7684\u683c\u5f0f\uff0c\n\u8fd9\u4e2a\u7279\u6b8a\u7684\u683c\u5f0f\u7531HTTP\u534f\u8bae\u6765\u89c4\u5b9a"),(0,r.kt)("h2",{id:"tcpip-\u534f\u8bae\u65cf\u4e86\u89e3-\u7f51\u7edc\u901a\u4fe1"},"TCP/IP \u534f\u8bae\u65cf\uff08\u4e86\u89e3\uff09\u2014\u2014 \u7f51\u7edc\u901a\u4fe1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"- TCP/IP\u534f\u8bae\u65cf\u4e2d\u5305\u542b\u4e86\u4e00\u7ec4\u534f\u8bae\n    \u8fd9\u7ec4\u534f\u8bae\u89c4\u5b9a\u4e86\u4e92\u8054\u7f51\u4e2d\u6240\u6709\u7684\u901a\u4fe1\u7684\u7ec6\u8282\n    - \u7f51\u7edc\u901a\u4fe1\u7684\u8fc7\u7a0b\u7531**\u56db\u5c42**\u7ec4\u6210\n    **\u5e94\u7528\u5c42**\n            - \u8f6f\u4ef6\u7684\u5c42\u9762\uff0c\u6d4f\u89c8\u5668 \u670d\u52a1\u5668\u90fd\u5c5e\u4e8e\u5e94\u7528\u5c42\n    \u4f20\u8f93\u5c42\n            - \u8d1f\u8d23\u5bf9\u6570\u636e\u8fdb\u884c\u62c6\u5206\uff0c\u628a\u5927\u6570\u636e\u62c6\u5206\u4e3a\u4e00\u4e2a\u4e00\u4e2a\u5c0f\u5305\n    \u7f51\u7edc\u5c42\n            - \u8d1f\u8d23\u7ed9\u6570\u636e\u5305\uff0c\u6dfb\u52a0\u4fe1\u606f\n    \u6570\u636e\u94fe\u8def\u5c42\n            - \u4f20\u8f93\u4fe1\u606f\n")),(0,r.kt)("h2",{id:"http\u534f\u8bae-1"},"http\u534f\u8bae"),(0,r.kt)("p",null,"-"," ",(0,r.kt)("strong",{parentName:"p"},"HTTP\u534f\u8bae\u5c31\u662f\u5e94\u7528\u5c42\u7684\u534f\u8bae"),"\uff0c\n\u7528\u6765\u89c4\u5b9a\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u95f4\u901a\u4fe1\u7684\u62a5\u6587\u683c\u5f0f\u7684"),(0,r.kt)("h3",{id:"\u62a5\u6587"},"\u62a5\u6587"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"- \u62a5\u6587\uff08message\uff09\n    - \u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u901a\u4fe1\u662f\u57fa\u4e8e\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\n        - \u6d4f\u89c8\u5668\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff08request\uff09\n        - \u670d\u52a1\u5668\u5411\u6d4f\u89c8\u5668\u8fd4\u56de\u54cd\u5e94\uff08response\uff09\n        - \u6d4f\u89c8\u5668\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\u76f8\u5f53\u4e8e\u6d4f\u89c8\u5668\u7ed9\u670d\u52a1\u5668\u5199\u4fe1\n            \u670d\u52a1\u5668\u5411\u6d4f\u89c8\u5668\u8fd4\u56de\u54cd\u5e94\uff0c\u76f8\u5f53\u4e8e\u670d\u52a1\u5668\u7ed9\u6d4f\u89c8\u5668\u56de\u4fe1\n            \u8fd9\u4e2a\u4fe1\u5728HTTP\u534f\u8bae\u4e2d\u5c31\u88ab\u79f0\u4e3a\u62a5\u6587\n        - \u800cHTTP\u534f\u8bae\u5c31\u662f\u5bf9\u8fd9\u4e2a\u62a5\u6587\u7684\u683c\u5f0f\u8fdb\u884c\u89c4\u5b9a\n\n    - \u670d\u52a1\u5668\n        - \u4e00\u4e2a\u670d\u52a1\u5668\u7684\u4e3b\u8981\u529f\u80fd\uff1a\n            1.\u53ef\u4ee5\u63a5\u6536\u5230\u6d4f\u89c8\u5668\u53d1\u9001\u7684\u8bf7\u6c42\u62a5\u6587\n            2.\u53ef\u4ee5\u5411\u6d4f\u89c8\u5668\u8fd4\u56de\u54cd\u5e94\u62a5\u6587\n")),(0,r.kt)("h3",{id:"\u8bf7\u6c42\u62a5\u6587"},"\u8bf7\u6c42\u62a5\u6587"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"    - \u8bf7\u6c42\u62a5\u6587\uff08request\uff09\n        - \u5ba2\u6237\u7aef\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7684\u62a5\u6587\u79f0\u4e3a\u8bf7\u6c42\u62a5\u6587\n        - \u8bf7\u6c42\u62a5\u6587\u7684\u683c\u5f0f\u5982\u4e0b\uff1a\n            \u8bf7\u6c42\u9996\u884c\n            \u8bf7\u6c42\u5934\n            \u7a7a\u884c\n            \u8bf7\u6c42\u4f53\n\n            \u8bf7\u6c42\u9996\u884c\n                - \u8bf7\u6c42\u9996\u884c\u5c31\u662f\u8bf7\u6c42\u62a5\u6587\u7684\u7b2c\u4e00\u884c\n                    GET /index.html?username=sunwukong HTTP/1.1\n                    \u7b2c\u4e00\u90e8\u5206 get \u8868\u793a\u8bf7\u6c42\u7684\u65b9\u5f0f\uff0cget\u8868\u793a\u53d1\u9001\u7684\u662fget\u8bf7\u6c42\n                        \u73b0\u5728\u5e38\u7528\u7684\u65b9\u5f0f\u5c31\u662fget\u548cpost\u8bf7\u6c42\n                        get\u8bf7\u6c42\u4e3b\u8981\u7528\u6765\u5411\u670d\u52a1\u5668\u8bf7\u6c42\u8d44\u6e90\n                        post\u8bf7\u6c42\u4e3b\u8981\u7528\u6765\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e\n\n                    \u7b2c\u4e8c\u90e8\u5206 /index.html?username=sunwukong\n                        \u8868\u793a\u8bf7\u6c42\u8d44\u6e90\u7684\u8def\u5f84\uff0c\n                            ? \u540e\u8fb9\u7684\u5185\u5bb9\u53eb\u505a\u67e5\u8be2\u5b57\u7b26\u4e32\n                            \u67e5\u8be2\u5b57\u7b26\u4e32\u662f\u4e00\u4e2a\u540d\u503c\u5bf9\u7ed3\u6784\uff0c\u4e00\u4e2a\u540d\u5b57\u5bf9\u5e94\u4e00\u4e2a\u503c\n                                \u4f7f\u7528=\u8fde\u63a5\uff0c\u591a\u4e2a\u540d\u503c\u5bf9\u4e4b\u95f4\u4f7f\u7528&\u5206\u5272\n                                username=admin&password=123123\n                            get\u8bf7\u6c42\u901a\u8fc7\u67e5\u8be2\u5b57\u7b26\u4e32\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u670d\u52a1\u5668\n                                \u7531\u4e8e\u67e5\u8be2\u5b57\u7b26\u4e32\u4f1a\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u4e2d\u76f4\u63a5\u663e\u793a\n                                    \u6240\u4ee5\uff0c\u5b83\u5b89\u5168\u6027\u8f83\u5dee\n                                    \u540c\u65f6\uff0c\u7531\u4e8eurl\u5730\u5740\u957f\u5ea6\u6709\u9650\u5236\uff0c\u6240\u4ee5get\u8bf7\u6c42\u65e0\u6cd5\u53d1\u9001\u8f83\u5927\u7684\u6570\u636e\n\n                            post\u8bf7\u6c42\u901a\u8fc7\u8bf7\u6c42\u4f53\u6765\u53d1\u9001\u6570\u636e\n                                - \u5728chrome\u4e2d\u901a\u8fc7 \u8f7d\u8377 \u53ef\u4ee5\u67e5\u770b\n                                post\u8bf7\u6c42\u901a\u8fc7\u8bf7\u6c42\u4f53\u53d1\u9001\u6570\u636e\uff0c\u65e0\u6cd5\u5728\u5730\u5740\u680f\u76f4\u63a5\u67e5\u770b\n                                    \u6240\u4ee5\u5b89\u5168\u6027\u8f83\u597d\n                                \u8bf7\u6c42\u4f53\u7684\u5927\u5c0f\u6ca1\u6709\u9650\u5236\uff0c\u53ef\u4ee5\u53d1\u9001\u4efb\u610f\u5927\u5c0f\u7684\u6570\u636e\n\n                            \u5982\u679c\u4f60\u9700\u8981\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e\uff0c\u80fd\u7528post\u5c3d\u91cf\u4f7f\u7528post\n\n                    \u7b2c\u4e09\u90e8\u5206\n                        HTTP/1.1 \u534f\u8bae\u7684\u7248\u672c\n\n            \u8bf7\u6c42\u5934\n                - \u8bf7\u6c42\u5934\u4e5f\u662f\u540d\u503c\u5bf9\u7ed3\u6784\uff0c\u7528\u6765\u544a\u8bc9\u670d\u52a1\u5668\u6211\u4eec\u6d4f\u89c8\u5668\u7684\u4fe1\u606f\n                - \u6bcf\u4e00\u4e2a\u8bf7\u6c42\u5934\u90fd\u6709\u5b83\u7684\u4f5c\u7528\uff1a\n                    Accept \u6d4f\u89c8\u5668\u53ef\u4ee5\u63a5\u53d7\u7684\u6587\u4ef6\u7c7b\u578b\n                    Accept-Encoding \u6d4f\u89c8\u5668\u5141\u8bb8\u7684\u538b\u7f29\u7684\u7f16\u7801\n                    User-Agent \u7528\u6237\u4ee3\u7406\uff0c\u5b83\u662f\u4e00\u6bb5\u7528\u6765\u63cf\u8ff0\u6d4f\u89c8\u5668\u4fe1\u606f\u7684\u5b57\u7b26\u4e32\n\n            \u7a7a\u884c\n                - \u7528\u6765\u5206\u9694\u8bf7\u6c42\u5934\u548c\u8bf7\u6c42\u4f53\n\n            \u8bf7\u6c42\u4f53\n                - post\u8bf7\u6c42\u901a\u8fc7\u8bf7\u6c42\u4f53\u6765\u53d1\u9001\u6570\u636e\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http"},'            \u8bf7\u6c42\u62a5\u6587\uff1a  \n            GET /07_http%E5%8D%8F%E8%AE%AE/01_http%E5%8D%8F%E8%AE%AE.html?username=sunwukong HTTP/1.1\n            Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\n            Accept-Encoding: gzip, deflate, br\n            Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,la;q=0.7\n            Cache-Control: max-age=0\n            Connection: keep-alive\n            Host: 127.0.0.1:5500\n            If-Modified-Since: Thu, 27 Oct 2022 11:10:28 GMT\n            If-None-Match: W/"1b8-1841922e832"\n            Referer: http://127.0.0.1:5500/07_http%E5%8D%8F%E8%AE%AE/01_http%E5%8D%8F%E8%AE%AE.html?username=sunwukong\n            Sec-Fetch-Dest: document\n            Sec-Fetch-Mode: navigate\n            Sec-Fetch-Site: same-origin\n            Upgrade-Insecure-Requests: 1\n            User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36\n            sec-ch-ua: "Chromium";v="106", "Google Chrome";v="106", "Not;A=Brand";v="99"\n            sec-ch-ua-mobile: ?0\n            sec-ch-ua-platform: "Windows"\n')),(0,r.kt)("h3",{id:"\u54cd\u5e94\u62a5\u6587"},"\u54cd\u5e94\u62a5\u6587"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'            \u54cd\u5e94\u62a5\u6587\uff1a\n                \u54cd\u5e94\u9996\u884c\n                \u54cd\u5e94\u5934\n                \u7a7a\u884c\n                \u54cd\u5e94\u4f53\n\n                \u54cd\u5e94\u9996\u884c\n                    HTTP/1.1 200 OK\n                        200 \u54cd\u5e94\u72b6\u6001\u7801\n                        ok \u5bf9\u54cd\u5e94\u72b6\u6001\u7801\u7684\u63cf\u8ff0\n                        - \u54cd\u5e94\u72b6\u6001\u7801\u7684\u89c4\u5219\n                            1xx \u8bf7\u6c42\u5904\u7406\u4e2d\n                            2xx \u8868\u793a\u6210\u529f\n                            3xx \u8868\u793a\u8bf7\u6c42\u7684\u91cd\u5b9a\u5411\n                            4xx \u8868\u793a\u5ba2\u6237\u7aef\u9519\u8bef\n                            5xx \u8868\u793a\u670d\u52a1\u5668\u7684\u9519\u8bef\n\n                \u54cd\u5e94\u5934\n                    - \u54cd\u5e94\u5934\u4e5f\u662f\u4e00\u4e2a\u4e00\u4e2a\u7684\u540d\u503c\u5bf9\u7ed3\u6784\uff0c\u7528\u6765\u544a\u8bc9\u6d4f\u89c8\u5668\u54cd\u5e94\u7684\u4fe1\u606f\n                    - Content-Type \u7528\u6765\u63cf\u8ff0\u54cd\u5e94\u4f53\u7684\u7c7b\u578b\n                    - Content-Length \u7528\u6765\u63cf\u8ff0\u54cd\u5e94\u4f53\u5927\u5c0f\n                    Content-Type: text/html; charset=UTF-8\n                    Content-Length: 2017\n                \u7a7a\u884c\n                    - \u7a7a\u884c\u7528\u6765\u5206\u9694\u54cd\u5e94\u5934\u548c\u54cd\u5e94\u4f53\n\n                \u54cd\u5e94\u4f53\n                    - \u54cd\u5e94\u4f53\u5c31\u662f\u670d\u52a1\u5668\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u7684\u5185\u5bb9\n                <!DOCTYPE html>\n                    <html lang="zh">\n                        <head>\n                            <meta charset="UTF-8" />\n                            <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n                            <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n                            <title>Document</title>\n                        </head>\n                        <body>\n                            <form method="post" action="./02_target.html">\n                                <input type="text" name="username" />\n                                <input type="password" name="password" />\n                                <button>\u63d0\u4ea4</button>\n                            </form>\n                    </body>\n                    </html>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http"},'            \u54cd\u5e94\u62a5\u6587\uff1a\n                HTTP/1.1 200 OK\n                Vary: Origin\n                Access-Control-Allow-Credentials: true\n                Accept-Ranges: bytes\n                Cache-Control: public, max-age=0\n                Last-Modified: Thu, 27 Oct 2022 11:31:54 GMT\n                ETag: W/"20c-18419368696"\n                Content-Type: text/html; charset=UTF-8\n                Content-Length: 2017\n                Date: Thu, 27 Oct 2022 11:52:29 GMT\n                Connection: keep-alive\n                Keep-Alive: timeout=5\n')),(0,r.kt)("h1",{id:"express"},"express"),(0,r.kt)("h2",{id:"\u7b80\u4ecb-1"},"\u7b80\u4ecb"),(0,r.kt)("p",null,"\u200b    express \u662fnode\u4e2d\u7684\u670d\u52a1\u5668\u8f6f\u4ef6"),(0,r.kt)("p",null,"\u200b        \u901a\u8fc7express\u53ef\u4ee5\u5feb\u901f\u7684\u5728node\u4e2d\u642d\u5efa\u4e00\u4e2aweb\u670d\u52a1\u5668"),(0,r.kt)("p",null,"\u200b    ","-"," \u4f7f\u7528\u6b65\u9aa4\uff1a"),(0,r.kt)("p",null,"\u200b        \\1. \u521b\u5efa\u5e76\u521d\u59cb\u5316\u9879\u76ee"),(0,r.kt)("p",null,"\u200b            yarn init -y"),(0,r.kt)("p",null,"\u200b        \\2. \u5b89\u88c5express"),(0,r.kt)("p",null,"\u200b            yarn add express"),(0,r.kt)("p",null,"\u200b        \\3. \u521b\u5efaindex.js \u5e76\u7f16\u5199\u4ee3\u7801"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u5f15\u5165express\nconst express = require("express")\n\n// \u83b7\u53d6\u670d\u52a1\u5668\u7684\u5b9e\u4f8b\uff08\u5bf9\u8c61\uff09\nconst app = express()\n\n// \u542f\u52a8\u670d\u52a1\u5668\n// app.listen(\u7aef\u53e3\u53f7) \u7528\u6765\u542f\u52a8\u670d\u52a1\u5668\n// \u670d\u52a1\u5668\u542f\u52a8\u540e\uff0c\u6211\u4eec\u4fbf\u53ef\u4ee5\u901a\u8fc73000\u7aef\u53e3\u6765\u8bbf\u95ee\u4e86\n// \u534f\u8bae\u540d://ip\u5730\u5740:\u7aef\u53e3\u53f7/\u8def\u5f84\n// http://localhost:3000\n// http://127.0.0.1:3000\napp.listen(3000, () => {\n    console.log("\u670d\u52a1\u5668\u5df2\u7ecf\u542f\u52a8~")\n})\n')),(0,r.kt)("h2",{id:"\u8def\u7531"},"\u8def\u7531"),(0,r.kt)("p",null,"\u5728Express \u4e2d\uff0c\u8def\u7531\u6307\u7684\u662f\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u4e0e\u670d\u52a1\u5668\u5904\u7406\u51fd\u6570\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\uff0c"),(0,r.kt)("p",null,"\u200b\t\u5373\u5ba2\u6237\u7aef\u8bbf\u95ee\u670d\u52a1\u5668\u7684\u7ec8\u70b9\u4e3a\u8def\u7531"),(0,r.kt)("p",null,"\u5982\u679c\u5e0c\u671b\u670d\u52a1\u5668\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\uff0c\u5219\u9700\u8981\u4e3a\u670d\u52a1\u5668\u8bbe\u7f6e\u8def\u7531\uff0c"),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"\u8def\u7531\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u7684\u8bf7\u6c42\u65b9\u5f0f\u548c\u8bf7\u6c42\u5730\u5740\u6765\u5904\u7406\u7528\u6237\u7684\u8bf7\u6c42")),(0,r.kt)("p",null,"\u200b    "),(0,r.kt)("p",null,"\u200b        ",(0,r.kt)("strong",{parentName:"p"},"app.METHOD(...)")),(0,r.kt)("p",null,"\u200b            METHOD \u53ef\u4ee5\u662f get \u6216 post ..."),(0,r.kt)("p",null,"\u5728\u8def\u7531\u4e2d\uff0c\u5e94\u8be5\u505a\u4e24\u4ef6\u4e8b\n",(0,r.kt)("strong",{parentName:"p"},"\u8bfb\u53d6\u7528\u6237\u7684\u8bf7\u6c42\uff08request\uff09"),"\n",(0,r.kt)("strong",{parentName:"p"},"req \u8868\u793a\u7684\u662f\u7528\u6237\u7684\u8bf7\u6c42\u4fe1\u606f"),"\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u901a\u8fc7req\u53ef\u4ee5\u83b7\u53d6\u7528\u6237\u4f20\u9012\u6570\u636e"),"\nconsole.log(",(0,r.kt)("strong",{parentName:"p"},"req.ur"),"l)"),(0,r.kt)("p",null,"\u200b\t",(0,r.kt)("strong",{parentName:"p"},"\u6839\u636e\u7528\u6237\u7684\u8bf7\u6c42\u8fd4\u56de\u54cd\u5e94\uff08response\uff09"),"\n\u200b\t\tres \u8868\u793a\u7684\u670d\u52a1\u5668\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u54cd\u5e94\u4fe1\u606f\n\u53ef\u4ee5",(0,r.kt)("strong",{parentName:"p"},"\u901a\u8fc7res\u6765\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u6570\u636e")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"req.url"),(0,r.kt)("th",{parentName:"tr",align:null},"\u83b7\u53d6url\u8def\u5f84\u4e0e\u53c2\u6570"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"res.sendStatus()"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u54cd\u5e94\u72b6\u6001\u5417")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"res.status()"),(0,r.kt)("td",{parentName:"tr",align:null},"\u7528\u6765\u8bbe\u7f6e\u54cd\u5e94\u72b6\u6001\u5417\uff0c\u4f46\u662f\u5e76\u4e0d\u53d1\u9001")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"res.send()"),(0,r.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e\u5e76\u53d1\u9001\u54cd\u5e94\u4f53")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// http://localhost:3000\n//      / \u8868\u793a\u6839\u76ee\u5f55\n// \u8def\u7531\u7684\u56de\u8c03\u51fd\u6570\u6267\u884c\u65f6\uff0c\u4f1a\u63a5\u6536\u5230\u4e09\u4e2a\u53c2\u6570\n// \u7b2c\u4e00\u4e2a request \u7b2c\u4e8c\u4e2a response\napp.get("/hello", (req, res) => {\n    console.log("\u6709\u4eba\u8bbf\u95ee\u6211\u4e86~")\n\n    // res.sendStatus(404)\n    // res.status(200)\n    res.send("<h1>\u8fd9\u662f\u6211\u7684\u7b2c\u4e00\u4e2a\u670d\u52a1\u5668</h1>")\n})\n')),(0,r.kt)("h2",{id:"\u4e2d\u95f4\u4ef6"},"\u4e2d\u95f4\u4ef6"),(0,r.kt)("h3",{id:"\u4ec0\u4e48\u662fexpress\u4e2d\u95f4\u4ef6"},"\u4ec0\u4e48\u662fExpress\u4e2d\u95f4\u4ef6"),(0,r.kt)("p",null,"\u200b\t",(0,r.kt)("strong",{parentName:"p"},"\u4e2d\u95f4\u4ef6\u7279\u6307\u4e1a\u52a1\u6d41\u7a0b\u7684\u4e2d\u95f4\u5904\u7406\u73af\u8282"),"\u3002"),(0,r.kt)("p",null,"\u200b\t\u5f53\u4e00\u4e2a\u8bf7\u6c42\u5230\u8fbeExpress \u7684\u670d\u52a1\u5668\u4e4b\u540e\uff0c\u53ef\u4ee5\u8fde\u7eed\u8c03\u7528\u591a\u4e2a\u4e2d\u95f4\u4ef6\uff0c\u4ece\u800c\u5bf9\u8fd9\u6b21\u8bf7\u6c42\u8fdb\u884c\u9884\u5904\u7406\u3002"),(0,r.kt)("h3",{id:"\u4e2d\u95f4\u4ef6-1"},"\u4e2d\u95f4\u4ef6"),(0,r.kt)("p",null,"\u200b        ","-"," \u5728express\u6211\u4eec\u4f7f\u7528app.use\u6765\u5b9a\u4e49\u4e00\u4e2a\u4e2d\u95f4\u4ef6"),(0,r.kt)("p",null,"\u200b            \u4e2d\u95f4\u4ef6\u4f5c\u7528\u548c\u8def\u7531\u5f88\u50cf\uff0c\u7528\u6cd5\u5f88\u50cf"),(0,r.kt)("p",null,"\u200b            \u4f46\u662f\u8def\u7531\u4e0d\u533a\u5206\u8bf7\u6c42\u7684\u65b9\u5f0f\uff0c\u53ea\u770b\u8def\u5f84"),(0,r.kt)("p",null,"\u200b        ","-"," \u548c\u8def\u7531\u7684\u533a\u522b"),(0,r.kt)("p",null,"\u200b            1.",(0,r.kt)("strong",{parentName:"p"},"\u4f1a\u5339\u914d\u6240\u6709\u8bf7\u6c42")),(0,r.kt)("p",null,"\u200b            2.",(0,r.kt)("strong",{parentName:"p"},"\u8def\u5f84\u8bbe\u7f6e\u7236\u76ee\u5f55")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u53ef\u4ee5\u7701\u7565\u8def\u5f84\uff0c\u4f1a\u9ed8\u8ba4\u4e3a\u6839\u76ee\u5f55\napp.use((req, res, next) => {\n    console.log("111", Date.now())\n    res.send("<h1>111</h1>")\n})\n')),(0,r.kt)("h3",{id:"next"},"next"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// next() \u662f\u56de\u8c03\u51fd\u6570\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0c\u5b83\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u8c03\u7528\u51fd\u6570\u540e\uff0c\u53ef\u4ee5\u89e6\u53d1\u540e\u7eed\u7684\u4e2d\u95f4\u4ef6\n// next() \u4e0d\u80fd\u5728\u54cd\u5e94\u5904\u7406\u5b8c\u6bd5\u540e\u8c03\u7528\napp.use((req, res, next) => {\n    console.log("111", Date.now())\n    // res.send("<h1>111</h1>")\n\n    next() // \u653e\u884c\uff0c\u6211\u4e0d\u7ba1\u4e86~~\n})\n\napp.use((req, res, next) => {\n    console.log("222", Date.now())\n    // res.send("<h1>222</h1>")\n    next()\n})\n\napp.use((req, res) => {\n    console.log("333", Date.now())\n    res.send("<h1>333</h1>")\n})\n')),(0,r.kt)("h2",{id:"nodemon"},"nodemon"),(0,r.kt)("p",null,"\u76ee\u524d\uff0c\u670d\u52a1\u5668\u4ee3\u7801\u4fee\u6539\u540e\u5fc5\u987b\u8981\u91cd\u542f\uff0c"),(0,r.kt)("p",null,"\u200b        \u6211\u4eec\u5e0c\u671b\u6709\u4e00\u79cd\u65b9\u5f0f\uff0c\u53ef\u4ee5\u81ea\u52a8\u76d1\u89c6\u4ee3\u7801\u7684\u4fee\u6539"),(0,r.kt)("p",null,"\u200b        \u4ee3\u7801\u4fee\u6539\u4ee5\u540e\u53ef\u4ee5\u81ea\u52a8\u91cd\u542f\u670d\u52a1\u5668"),(0,r.kt)("p",null,"\u200b    \u8981\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\uff0c\u6211\u4eec\u9700\u8981\u5b89\u88c5\u4e00\u4e2a\u6a21\u5757 nodemon"),(0,r.kt)("p",null,"\u200b        \u4f7f\u7528\u65b9\u5f0f\uff1a"),(0,r.kt)("p",null,"\u200b            \\1. ",(0,r.kt)("strong",{parentName:"p"},"\u5168\u5c40\u5b89\u88c5")),(0,r.kt)("p",null,"\u200b                npm i nodemon -g"),(0,r.kt)("p",null,"\u200b                yarn global add nodemon"),(0,r.kt)("p",null,"\u200b                    ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u540cyarn\u8fdb\u884c\u5168\u5c40\u5b89\u88c5\u65f6"),"\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u9ed8\u8ba4yarn\u7684\u76ee\u5f55\u5e76\u4e0d\u5728\u73af\u5883\u53d8\u91cf\u4e2d")),(0,r.kt)("p",null,"\u200b                    ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u9700\u8981\u624b\u52a8\u5c06\u8def\u5f84\u6dfb\u52a0\u5230\u73af\u5883\u53d8\u91cf\u4e2d")),(0,r.kt)("p",null,"\u200b                ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u542f\u52a8"),"\uff1a"),(0,r.kt)("p",null,"\u200b                    nodemon  // \u8fd0\u884cindex.js"),(0,r.kt)("p",null,"\u200b                    nodemon xxx // \u8fd0\u884c\u6307\u5b9a\u7684js"),(0,r.kt)("p",null,"\u200b            \\2. ",(0,r.kt)("strong",{parentName:"p"},"\u5728\u9879\u76ee\u4e2d\u5b89\u88c5")),(0,r.kt)("p",null,"\u200b                npm i nodemon -D"),(0,r.kt)("p",null,"\u200b                yarn add nodemon -D"),(0,r.kt)("p",null,"\u200b                ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u542f\u52a8")),(0,r.kt)("p",null,"\u200b                    npx nodemon"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'  // \u4f9d\u8d56\uff1a\u9879\u76ee\u8fd0\u884c\u6240\u5fc5\u987b\u7684\u4f9d\u8d56\n  "dependencies": {\n    "express": "^4.18.2"\n  },\n  // \u5f00\u53d1\u4f9d\u8d56\uff1a\u9879\u76ee\u5f00\u53d1\uff0c\u8c03\u8bd5\u65f6\u6240\u9700\u8981\u7684\u4f9d\u8d56   -D\n  "devDependencies": {\n    "nodemon": "^2.0.20"\n  },\n  // \u811a\u672c\uff1a\u7b80\u5199\u957f\u547d\u4ee4\uff0c\u53ef\u4ee5\u8ddf\u8be6\u7ec6\u6587\u4ef6 ./index.js\n  // yarn start | npm start\n  "scripts": {\n    "start": "npx nodemon"\n  }\n')),(0,r.kt)("h2",{id:"\u9759\u6001\u8d44\u6e90"},"\u9759\u6001\u8d44\u6e90"),(0,r.kt)("p",null,"\u200b    \u670d\u52a1\u5668\u4e2d\u7684\u4ee3\u7801\uff0c\u5bf9\u4e8e\u5916\u90e8\u6765\u8bf4\u90fd\u662f\u4e0d\u53ef\u89c1\u7684\uff0c"),(0,r.kt)("p",null,"\u200b        \u6240\u4ee5\u6211\u4eec\u5199\u7684html\u9875\u9762\uff0c\u6d4f\u89c8\u5668\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee"),(0,r.kt)("p",null,"\u200b        \u5982\u679c\u5e0c\u671b\u6d4f\u89c8\u5668\u53ef\u4ee5\u8bbf\u95ee\uff0c\u5219\u9700\u8981\u5c06\u9875\u9762\u6240\u5728\u7684\u76ee\u5f55\u8bbe\u7f6e\u9759\u6001\u8d44\u6e90\u76ee\u5f55"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u8bbe\u7f6estatic\u4e2d\u95f4\u4ef6\u540e\uff0c\u6d4f\u89c8\u5668\u8bbf\u95ee\u65f6\uff0c\u4f1a\u81ea\u52a8\u53bbpublic\u76ee\u5f55\u5bfb\u627e\u662f\u5426\u6709\u5339\u914d\u7684\u9759\u6001\u8d44\u6e90\n// \u914d\u7f6e\u9759\u6001\u8d44\u6e90\u7684\u8def\u5f84\n// public http://localhost:3000/\napp.use(express.static(path.resolve(__dirname, "./public")))\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'    <body>\n        <h2>\u767b\u5f55</h2>\n        <form action="/login" method="get">\n            <div>\u7528\u6237\u540d <input name="username" type="text" /></div>\n            <div>\u5bc6\u7801 <input name="password" type="password" /></div>\n            <div>\n                <input type="submit" value="\u767b\u5f55" />\n            </div>\n        </form>\n        <hr />\n\n        <h1>\u6211\u662f\u4e00\u4e2a\u7f51\u9875\uff0c\u4e00\u4e2a\u9759\u6001\u7f51\u9875</h1>\n        <img src="./an.jpg" />\n    </body>\n')),(0,r.kt)("h2",{id:"query\u67e5\u8be2\u5b57\u7b26\u4e32"},"query\u67e5\u8be2\u5b57\u7b26\u4e32"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u6dfb\u52a0\u4e00\u4e2a\u8def\u7531\uff0c\u53ef\u4ee5\u8bfb\u53d6get\u8bf7\u6c42\u7684\u53c2\u6570\n// /login --\x3e  http://localhost:3000/login\napp.get("/login", (req, res) => {\n    // \u83b7\u53d6\u5230\u7528\u6237\u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\n    // req.query \u8868\u793a\u67e5\u8be2\u5b57\u7b26\u4e32\u4e2d\u7684\u8bf7\u6c42\u53c2\u6570\n    // console.log(req.query.username)\n    // console.log(req.query.password)\n    console.log("\u8bf7\u6c42\u5df2\u7ecf\u6536\u5230~~")\n\n    // \u9a8c\u8bc1\u7528\u6237\u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u662f\u5426\u6b63\u786e\n    if(req.query.username === "sunwukong" && req.query.password === "123123"){\n        res.send("<h1>\u767b\u5f55\u6210\u529f\uff01</h1>")\n    }else{\n        res.send("<h1>\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\uff01</h1>")\n    }\n\n})\n')),(0,r.kt)("h2",{id:"params"},"params"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// get\u8bf7\u6c42\u53d1\u9001\u53c2\u6570\u7684\u7b2c\u4e8c\u79cd\u65b9\u5f0f\n// /hello/:id \u8868\u793a\u5f53\u7528\u6237\u8bbf\u95ee /hello/xxx \u65f6\u5c31\u4f1a\u89e6\u53d1\n// \u5728\u8def\u5f84\u4e2d\u4ee5\u5192\u53f7\u547d\u540d\u7684\u90e8\u5206\u6211\u4eec\u79f0\u4e3aparam\uff0c\u5728get\u8bf7\u6c42\u5b83\u53ef\u4ee5\u88ab\u89e3\u6790\u4e3a\u8bf7\u6c42\u53c2\u6570\n// param\u4f20\u53c2\u4e00\u822c\u4e0d\u4f1a\u4f20\u9012\u7279\u522b\u590d\u6742\u7684\u53c2\u6570\n// app.get("/hello/:name/:age/:gender", (req, res) => {\napp.get("/hello/:name", (req, res) => {\n    // \u7ea6\u5b9a\u7531\u4e8e\u914d\u7f6e\n\n    // \u53ef\u4ee5\u901a\u8fc7req.params\u5c5e\u6027\u6765\u83b7\u53d6\u8fd9\u4e9b\u53c2\u6570\n    console.log(req.params)\n\n    res.send("<h1>\u8fd9\u662fhello\u8def\u7531</h1>")\n})\n')),(0,r.kt)("h2",{id:"post\u8def\u7531"},"post\u8def\u7531"),(0,r.kt)("h3",{id:"\u89e3\u6790\u8bf7\u6c42\u4f53"},"\u89e3\u6790\u8bf7\u6c42\u4f53"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const app = express();\n// \u89e3\u6790\u8bf7\u6c42\u4f53\napp.use(express.urlencoded({extended:true}))\n")),(0,r.kt)("p",null,"\u9ed8\u8ba4\u53c2\u6570\u4e3ature\uff0c\u4e0d\u5e26\u6709\u63d0\u793a\uff0c\u7ec8\u7aef\u8fd0\u884c\u7684\u60c5\u51b5\u4e0b"),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(6828).Z,width:"1075",height:"97"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const express = require("express")\nconst app = express()\nconst path = require("path")\n\n// \u521b\u5efa\u4e00\u4e2a\u6570\u7ec4\u6765\u5b58\u50a8\u7528\u6237\u4fe1\u606f\nconst USERS = [\n    {\n        username: "admin",\n        password: "123123",\n        nickname: "\u8d85\u7ea7\u7ba1\u7406\u5458"\n    },\n    {\n        username: "sunwukong",\n        password: "123456",\n        nickname: "\u9f50\u5929\u5927\u5723"\n    }\n]\n\n// \u914d\u7f6e\u9759\u6001\u8d44\u6e90\u7684\u8def\u5f84\n// public http://localhost:3000/\napp.use(express.static(path.resolve(__dirname, "public")))\n// \u5f15\u5165\u89e3\u6790\u8bf7\u6c42\u4f53\u7684\u4e2d\u95f4\u4ef6\napp.use(express.urlencoded())\n\napp.post("/login", (req, res) => {\n    const username = req.body.username\n    const password = req.body.password\n\n    // \u83b7\u53d6\u5230\u7528\u6237\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u540e\uff0c\u9700\u8981\u6839\u636e\u7528\u6237\u540d\u53bb\u7528\u6237\u7684\u6570\u7ec4\u4e2d\u67e5\u627e\u7528\u6237\n    // for (const user of USERS) {\n    //     if (user.username === username) {\n    //         // \u7528\u6237\u5b58\u5728\u63a5\u7740\u68c0\u67e5\u7528\u6237\u7684\u5bc6\u7801\n    //         if (user.password === password) {\n    //             // \u4fe1\u606f\u6b63\u786e\uff0c\u767b\u5f55\u6210\u529f\n    //             res.send(`<h1>\u767b\u5f55\u6210\u529f ${user.nickname}</h1>`)\n    //             return\n    //         }\n    //     }\n    // }\n\n    // res.send(`<h1>\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef</h1>`)\n\n    const loginUser = USERS.find((item) => {\n        return item.username === username && item.password === password\n    })\n\n    if (loginUser) {\n        res.send(`<h1>\u767b\u5f55\u6210\u529f ${loginUser.nickname}</h1>`)\n    } else {\n        res.send(`<h1>\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef</h1>`)\n    }\n})\n\napp.post("/register", (req, res) => {\n    // \u83b7\u53d6\u7528\u6237\u8f93\u5165\u7684\u6570\u636e\n    // console.log(req.body)\n    const {username, password, repwd, nickname} = req.body\n\n    // console.log(username, password, repwd, nickname)\n    // \u9a8c\u8bc1\u8fd9\u4e9b\u6570\u636e\u662f\u5426\u6b63\u786e\uff0c\u7565... \n    // \u53ea\u9a8c\u8bc1\u7528\u6237\u540d\u662f\u5426\u5b58\u5728\n    const user = USERS.find(item => {\n        return item.username === username || item.nickname === nickname\n    })\n\n    // console.log(user)\n    if(!user){\n        // \u8fdb\u5165\u5224\u65ad\u8bf4\u660e\u7528\u6237\u4e0d\u5b58\u5728\uff0c\u53ef\u4ee5\u6ce8\u518c\n        USERS.push({\n            username,\n            password,\n            nickname\n        })\n\n        res.send("<h1>\u606d\u559c\u60a8\uff01\u6ce8\u518c\u6210\u529f\uff01</h1>")\n    }else{\n        res.send("<h1>\u7528\u6237\u540d\u5df2\u5b58\u5728\uff01</h1>")\n    }\n\n})\n\napp.listen(3000, () => {\n    console.log("\u670d\u52a1\u5668\u5df2\u7ecf\u542f\u52a8~")\n})\n')),(0,r.kt)("p",null,"post.html"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'    <body>\n        <h2>\u767b\u5f55</h2>\n        <form action="/login" method="post">\n            <div>\u7528\u6237\u540d <input name="username" type="text" /></div>\n            <div>\u5bc6\u7801 <input name="password" type="password" /></div>\n            <div>\n                <input type="submit" value="\u767b\u5f55" />\n            </div>\n        </form>\n        <hr />\n    </body>\n')),(0,r.kt)("p",null,"regist.html"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'    <body>\n        <h2>\u6ce8\u518c</h2>\n        <form action="/register" method="post">\n            <div> <input name="username" type="text" placeholder="\u7528\u6237\u540d" /></div>\n            <div> <input name="password" type="password" placeholder="\u5bc6\u7801" /></div>\n            <div> <input name="repwd" type="password" placeholder="\u786e\u8ba4\u5bc6\u7801" /></div>\n            <div> <input name="nickname" type="text" placeholder="\u6635\u79f0" /></div>\n            <div>\n                <input type="submit" value="\u6ce8\u518c" />\n            </div>\n        </form>\n        <hr />\n    </body>\n')),(0,r.kt)("h2",{id:"\u6a21\u677f\u5f15\u64ce-ejs"},"\u6a21\u677f\u5f15\u64ce-ejs"),(0,r.kt)("p",null,"html\u9875\u9762\u5c5e\u4e8e\u9759\u6001\u9875\u9762\uff0c\u521b\u5efa\u7684\u65f6\u5019\u4ec0\u4e48\u6837\u5b50\uff0c\u7528\u6237\u770b\u5230\u7684\u5c31\u662f\u4ec0\u4e48\u6837\u5b50"),(0,r.kt)("p",null,"\u200b            \u4e0d\u4f1a\u81ea\u52a8\u8ddf\u968f\u670d\u52a1\u5668\u4e2d\u6570\u636e\u7684\u53d8\u5316\u800c\u53d8\u5316"),(0,r.kt)("p",null,"\u200b        \u5e0c\u671b\u6709\u8fd9\u4e48\u4e00\u4e2a\u4e1c\u897f\uff0c\u4ed6\u5462\u957f\u7684\u50cf\u662f\u4e2a\u7f51\u9875\uff0c\u4f46\u662f\u4ed6\u91cc\u8fb9\u53ef\u4ee5\u5d4c\u5165\u53d8\u91cf\uff0c"),(0,r.kt)("p",null,"\u200b            \u8fd9\u4e2a\u4e1c\u897f\u5728node\u4e2d\u88ab\u79f0\u4e3a ",(0,r.kt)("strong",{parentName:"p"},"\u6a21\u677f")),(0,r.kt)("p",null,"\u200b        \u5728node\u4e2d\u5b58\u5728\u6709\u5f88\u591a\u4e2a\u6a21\u677f\u5f15\u64ce\uff0c\u90fd\u5404\u5177\u7279\u8272\uff0c",(0,r.kt)("strong",{parentName:"p"},"ejs")),(0,r.kt)("p",null,"\u200b        ejs\u662fnode\u4e2d\u7684\u4e00\u6b3e\u6a21\u677f\u5f15\u64ce\uff0c\u4f7f\u7528\u6b65\u9aa4\uff1a"),(0,r.kt)("p",null,"\u200b            1.\u5b89\u88c5ejs"),(0,r.kt)("p",null,"\u200b\t\t\t\t",(0,r.kt)("strong",{parentName:"p"},"yarn add ejs")),(0,r.kt)("p",null,"\u200b            2.\u914d\u7f6eexpress\u7684\u6a21\u677f\u5f15\u64ce\u4e3aejs"),(0,r.kt)("p",null,"\u200b                ",(0,r.kt)("strong",{parentName:"p"},'app.set("view engine", "ejs")')),(0,r.kt)("p",null,"\u200b            3.\u914d\u7f6e\u6a21\u677f\u8def\u5f84"),(0,r.kt)("p",null,"\u200b                ",(0,r.kt)("strong",{parentName:"p"},'app.set("views", path.resolve(__dirname, "views"))')),(0,r.kt)("p",null,"\u200b            \u6ce8\u610f\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u6a21\u677f\u5f15\u64ce\u9700\u8981\u88abexpress\u6e32\u67d3\u540e\u624d\u80fd\u4f7f\u7528")),(0,r.kt)("p",null,"\u200b     ",(0,r.kt)("strong",{parentName:"p"},"res.render() \u7528\u6765\u6e32\u67d3\u4e00\u4e2a\u6a21\u677f\u5f15\u64ce\uff0c\u5e76\u5c06\u5176\u8fd4\u56de\u7ed9\u6d4f\u89c8\u5668")),(0,r.kt)("p",null,"\u200b    \u53ef\u4ee5\u5c06\u4e00\u4e2a\u5bf9\u8c61\u4f5c\u4e3arender\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20\u9012\uff0c\u8fd9\u6837\u5728\u6a21\u677f\u4e2d\u53ef\u4ee5\u8bbf\u95ee\u5230\u5bf9\u8c61\u4e2d\u7684\u6570\u636e"),(0,r.kt)("p",null,"\u200b    ",(0,r.kt)("strong",{parentName:"p"},'res.render("students", { name: "\u5b59\u609f\u7a7a", age: 18, gender: "\u7537" })')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"<%= %>"),(0,r.kt)("th",{parentName:"tr",align:null},"\u5b83\u4f1a\u81ea\u52a8\u5bf9\u5b57\u7b26\u4e32\u4e2d\u7684\u7279\u6b8a\u7b26\u53f7\u8fdb\u884c\u8f6c\u4e49  \\","<","\u8fd9\u4e2a\u8bbe\u8ba1\u4e3b\u8981\u662f\u4e3a\u4e86\u907f\u514d xss \u653b\u51fb"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"<%- %>"),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f4\u63a5\u5c06\u5185\u5bb9\u8f93\u51fa")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"<% %>"),(0,r.kt)("td",{parentName:"tr",align:null},"\u53ef\u4ee5\u5728\u5176\u4e2d\u76f4\u63a5\u7f16\u5199js\u4ee3\u7801\uff0cjs\u4ee3\u7801\u4f1a\u5728\u670d\u52a1\u5668\u4e2d\u6267\u884c")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const express = require("express")\nconst path = require("path")\nconst app = express()\n\nconst STUDENT_ARR = [\n    {\n        name: "\u5b59\u609f\u7a7a",\n        age: 18,\n        gender: "\u7537",\n        address: "\u706b\u9505\u5c71"\n    },\n    {\n        name: "\u732a\u516b\u6212",\n        age: 28,\n        gender: "\u7537",\n        address: "\u9ad8\u8001\u5e84"\n    },\n    {\n        name: "\u6c99\u548c\u5c1a",\n        age: 38,\n        gender: "\u7537",\n        address: "\u6d41\u6c99\u6cb3"\n    }\n]\n\nlet name = "\u732a\u516b\u6212"\n\n// \u5c06ejs\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u7684\u6a21\u677f\u5f15\u64ce\napp.set("view engine", "ejs")\n// \u914d\u7f6e\u6a21\u677f\u7684\u8def\u5f84\napp.set("views", path.resolve(__dirname, "views"))\n\napp.get("/hello", (req, res) => {\n    res.send("hello")\n})\n\napp.get("/students", (req, res) => {\n    // \u5e0c\u671b\u7528\u6237\u5728\u8bbf\u95eestudents\u8def\u7531\u65f6\uff0c\u53ef\u4ee5\u7ed9\u7528\u6237\u8fd4\u56de\u4e00\u4e2a\u663e\u793a\u6709\u5b66\u751f\u4fe1\u606f\u7684\u9875\u9762\n\n    res.render("students", { name })\n})\n\napp.get("/set_name", (req, res) => {\n    name = req.query.name\n    res.send("\u4fee\u6539\u6210\u529f")\n})\n\n// \u53ef\u4ee5\u5728\u6240\u6709\u8def\u7531\u7684\u540e\u8fb9\u914d\u7f6e\u9519\u8bef\u8def\u7531\napp.use((req, res) => {\n    // \u53ea\u8981\u8fd9\u4e2a\u4e2d\u95f4\u4ef6\u4e00\u6267\u884c\uff0c\u8bf4\u660e\u4e0a\u8fb9\u7684\u5730\u5740\u90fd\u6ca1\u6709\u5339\u914d\n    res.status(404)\n    res.send("<h1>\u60a8\u8bbf\u95ee\u7684\u5730\u5740\u5df2\u88ab\u5916\u661f\u4eba\u52ab\u6301\uff01</h1>")\n})\n\napp.listen(3000, () => {\n    console.log("\u670d\u52a1\u5668\u5df2\u7ecf\u542f\u52a8\uff01")\n})\n')),(0,r.kt)("h3",{id:"\u914d\u7f6e404\u8def\u7531"},"\u914d\u7f6e404\u8def\u7531"),(0,r.kt)("p",null,"\u5728\u6240\u6709\u8def\u7531\u540e\u9762\u914d\u7f6e"),(0,r.kt)("h2",{id:"\u7ec3\u4e60-\u670d\u52a1\u5668\u8868\u683c\u8bfb\u5199\u5220\u6539"},"\u7ec3\u4e60-\u670d\u52a1\u5668\u8868\u683c\u8bfb\u5199\u5220\u6539"),(0,r.kt)("h3",{id:"indexjs"},"index.js"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const express = require("express")\nconst path = require("path")\nconst app = express()\nconst fs = require("fs/promises")\n\nlet STUDENT_ARR = require("./data/students.json")\n\n// \u5c06ejs\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u7684\u6a21\u677f\u5f15\u64ce\napp.set("view engine", "ejs")\n// \u914d\u7f6e\u6a21\u677f\u7684\u8def\u5f84\napp.set("views", path.resolve(__dirname, "views"))\n\n// \u914d\u7f6e\u9759\u6001\u8d44\u6e90\u8def\u5f84\napp.use(express.static(path.resolve(__dirname, "public")))\n// \u914d\u7f6e\u8bf7\u6c42\u4f53\u89e3\u6790\napp.use(express.urlencoded({ extended: true }))\n\n/* \n    \u5220\u9664\n        - \u70b9\u51fb\u5220\u9664\u94fe\u63a5\u540e\uff0c\u5220\u9664\u5f53\u524d\u6570\u636e\n        - \u70b9\u51fb \u767d\u9aa8\u7cbe \u5220\u9664 --\x3e \u5220\u9664id\u4e3a5\u7684\u5b66\u751f\n        - \u6d41\u7a0b\uff1a\n            1. \u70b9\u51fb\u767d\u9aa8\u7cbe\u7684\u5220\u9664\u94fe\u63a5\n            2. \u5411\u8def\u7531\u53d1\u9001\u8bf7\u6c42\uff08\u5199\u4e00\u4e2a\u8def\u7531\uff09\n            3. \u8def\u7531\u600e\u4e48\u5199\uff1f\n                - \u83b7\u53d6\u5b66\u751f\u7684id n\n                - \u5220\u9664id\u4e3an\u7684\u5b66\u751f\n                - \u5c06\u65b0\u7684\u6570\u7ec4\u5199\u5165\u6587\u4ef6\n                - \u91cd\u5b9a\u5411\u5230\u5b66\u751f\u5217\u8868\u9875\u9762\n\n    \u4fee\u6539\n        - \u70b9\u51fb\u4fee\u6539\u94fe\u63a5\u540e\uff0c\u663e\u793a\u4e00\u4e2a\u8868\u5355\uff0c\u8868\u5355\u4e2d\u5e94\u8be5\u6709\u8981\u4fee\u6539\u7684\u5b66\u751f\u7684\u4fe1\u606f\uff0c\n            \u7528\u6237\u5bf9\u5b66\u751f\u4fe1\u606f\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u4ee5\u540e\u70b9\u51fb\u6309\u94ae\u63d0\u4ea4\u8868\u5355\n        - \u6d41\u7a0b\uff1a\n            1. \u70b9\u51fb\u5b59\u609f\u7a7a\u7684\u4fee\u6539\u94fe\u63a5\n            2. \u8df3\u8f6c\u5230\u4e00\u4e2a\u8def\u7531\n                - \u8fd9\u4e2a\u8def\u7531\u4f1a\u8fd4\u56de\u4e00\u4e2a\u9875\u9762\uff0c\u9875\u9762\u4e2d\u6709\u4e00\u4e2a\u8868\u5355\uff0c\u8868\u5355\u4e2d\u5e94\u8be5\u663e\u793a\u5b59\u609f\u7a7a\u7684\u5404\u79cd\u4fe1\u606f\n            3. \u7528\u6237\u586b\u5199\u8868\u5355\uff0c\u70b9\u51fb\u6309\u94ae\u63d0\u4ea4\u5230\u4e00\u4e2a\u65b0\u7684\u8def\u7531\n                - \u83b7\u53d6\u5b66\u751f\u4fe1\u606f\uff0c\u5e76\u5bf9\u4fe1\u606f\u8fdb\u884c\u4fee\u6539\n*/\napp.post("/update-student", (req, res) => {\n    // \u83b7\u53d6id\n    // const id = req.query.id\n\n    const { id, name, age, gender, address } = req.body\n\n    // \u4fee\u6539\u5b66\u751f\u4fe1\u606f\n    // \u6839\u636e\u5b66\u751fid\u83b7\u53d6\u5b66\u751f\u5bf9\u8c61\n    const student = STUDENT_ARR.find((item) => item.id == id)\n\n    student.name = name\n    student.age = +age\n    student.gender = gender\n    student.address = address\n\n    fs.writeFile(\n        path.resolve(__dirname, "./data/students.json"),\n        JSON.stringify(STUDENT_ARR)\n    )\n        .then(() => {\n            // res.redirect() \u7528\u6765\u53d1\u8d77\u8bf7\u6c42\u91cd\u5b9a\u5411\n            // \u91cd\u5b9a\u5411\u7684\u4f5c\u7528\u662f\u544a\u8bc9\u6d4f\u89c8\u5668\u4f60\u5411\u53e6\u5916\u4e00\u4e2a\u5730\u5740\u518d\u53d1\u8d77\u4e00\u6b21\u8bf7\u6c42\n\n            res.redirect("/students")\n        })\n        .catch(() => {\n            // ....\n        })\n})\n\napp.get("/to-update", (req, res) => {\n    const id = +req.query.id\n    // \u83b7\u53d6\u8981\u4fee\u6539\u7684\u5b66\u751f\u7684\u4fe1\u606f\n    const student = STUDENT_ARR.find((item) => item.id === id)\n\n    res.render("update", { student })\n})\n\napp.get("/delete", (req, res) => {\n    // \u83b7\u53d6\u8981\u5220\u9664\u7684\u5b66\u751f\u7684id\n    const id = +req.query.id\n\n    // \u6839\u636eid\u5220\u9664\u5b66\u751f\n    // console.log(id)\n    STUDENT_ARR = STUDENT_ARR.filter((stu) => stu.id !== id)\n\n    // \u5c06\u65b0\u7684\u6570\u7ec4\u5199\u5165\u5230\u6587\u4ef6\u4e2d\n    // \u5c06\u65b0\u7684\u6570\u636e\u5199\u5165\u5230json\u6587\u4ef6\u4e2d\n    fs.writeFile(\n        path.resolve(__dirname, "./data/students.json"),\n        JSON.stringify(STUDENT_ARR)\n    )\n        .then(() => {\n            // res.redirect() \u7528\u6765\u53d1\u8d77\u8bf7\u6c42\u91cd\u5b9a\u5411\n            // \u91cd\u5b9a\u5411\u7684\u4f5c\u7528\u662f\u544a\u8bc9\u6d4f\u89c8\u5668\u4f60\u5411\u53e6\u5916\u4e00\u4e2a\u5730\u5740\u518d\u53d1\u8d77\u4e00\u6b21\u8bf7\u6c42\n\n            res.redirect("/students")\n        })\n        .catch(() => {\n            // ....\n        })\n})\n\napp.get("/hello", (req, res) => {\n    res.send("hello")\n})\n\napp.get("/students", (req, res) => {\n    res.render("students", { stus: STUDENT_ARR })\n})\n\n// \u521b\u5efa\u4e00\u4e2a\u6dfb\u52a0\u5b66\u751f\u4fe1\u606f\u7684\u8def\u7531\napp.post("/add-student", (req, res) => {\n    // \u8def\u7531\u91cc\u8981\u505a\u4ec0\u4e48\uff1f\n    // \u751f\u6210\u4e00\u4e2aid\n    const id = STUDENT_ARR.at(-1) ? STUDENT_ARR.at(-1).id + 1 : 1\n\n    // 1.\u83b7\u53d6\u7528\u6237\u586b\u5199\u7684\u4fe1\u606f\n    const newUser = {\n        id,\n        name: req.body.name,\n        age: +req.body.age,\n        gender: req.body.gender,\n        address: req.body.address\n    }\n\n    // 2. \u9a8c\u8bc1\u7528\u6237\u4fe1\u606f\uff08\u7565\uff09\n\n    // 3. \u5c06\u7528\u6237\u4fe1\u606f\u6dfb\u52a0\u5230\u6570\u7ec4\u4e2d\n    STUDENT_ARR.push(newUser)\n\n    // 4. \u8fd4\u56de\u54cd\u5e94\n    // res.send("\u6dfb\u52a0\u6210\u529f\uff01")\n    // \u76f4\u63a5\u5728\u6dfb\u52a0\u8def\u7531\u4e2d\u6e32\u67d3ejs\uff0c\u4f1a\u9762\u4e34\u8868\u5355\u91cd\u590d\u63d0\u4ea4\u7684\u95ee\u9898\n    // res.render("students", { stus: STUDENT_ARR })\n\n    // \u5c06\u65b0\u7684\u6570\u636e\u5199\u5165\u5230json\u6587\u4ef6\u4e2d\n    fs.writeFile(\n        path.resolve(__dirname, "./data/students.json"),\n        JSON.stringify(STUDENT_ARR)\n    )\n        .then(() => {\n            // res.redirect() \u7528\u6765\u53d1\u8d77\u8bf7\u6c42\u91cd\u5b9a\u5411\n            // \u91cd\u5b9a\u5411\u7684\u4f5c\u7528\u662f\u544a\u8bc9\u6d4f\u89c8\u5668\u4f60\u5411\u53e6\u5916\u4e00\u4e2a\u5730\u5740\u518d\u53d1\u8d77\u4e00\u6b21\u8bf7\u6c42\n\n            res.redirect("/students")\n        })\n        .catch(() => {\n            // ....\n        })\n})\n\n// \u53ef\u4ee5\u5728\u6240\u6709\u8def\u7531\u7684\u540e\u8fb9\u914d\u7f6e\u9519\u8bef\u8def\u7531\napp.use((req, res) => {\n    // \u53ea\u8981\u8fd9\u4e2a\u4e2d\u95f4\u4ef6\u4e00\u6267\u884c\uff0c\u8bf4\u660e\u4e0a\u8fb9\u7684\u5730\u5740\u90fd\u6ca1\u6709\u5339\u914d\n    res.status(404)\n    res.send("<h1>\u60a8\u8bbf\u95ee\u7684\u5730\u5740\u5df2\u88ab\u5916\u661f\u4eba\u52ab\u6301\uff01</h1>")\n})\n\napp.listen(3000, () => {\n    console.log("\u670d\u52a1\u5668\u5df2\u7ecf\u542f\u52a8\uff01")\n})\n')),(0,r.kt)("h3",{id:"studentejs"},"student.ejs"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ejs"},'        <style>\n            table {\n                border-collapse: collapse;\n            }\n\n            th,\n            td {\n                border: 1px #000 solid;\n                font-size: 20px;\n                padding: 10px;\n                text-align: center;\n            }\n\n            caption {\n                font-size: 25px;\n                font-weight: bold;\n            }\n        </style>\n    </head>\n    <body>\n        <hr />\n        <% if(stus && stus.length > 0) { %>\n        <table>\n            <caption>\n                \u5b66\u751f\u5217\u8868\n            </caption>\n            <thead>\n                <tr>\n                    <th>\u5b66\u53f7</th>\n                    <th>\u59d3\u540d</th>\n                    <th>\u5e74\u9f84</th>\n                    <th>\u6027\u522b</th>\n                    <th>\u5730\u5740</th>\n                    <th>\u64cd\u4f5c</th>\n                </tr>\n            </thead>\n\n            <tbody>\n                <% for(const stu of stus){ %>\n                <tr>\n                    <td><%=stu.id%></td>\n                    <td><%=stu.name %></td>\n                    <td><%=stu.age %></td>\n                    <td><%=stu.gender %></td>\n                    <td><%=stu.address %></td>\n                    <td>\n                        <a\n                            onclick="return confirm(\'\u786e\u8ba4\u5220\u9664\u5417\uff1f\')"\n                            href="/delete?id=<%=stu.id%>"\n                            >\u5220\u9664</a\n                        >\n                        <a href="/to-update?id=<%=stu.id%>">\u4fee\u6539</a>\n                    </td>\n                </tr>\n                <% }%>\n            </tbody>\n        </table>\n        <%}else{%>\n        <p>\u5b66\u751f\u5217\u8868\u4e3a\u7a7a\uff01</p>\n\n        <%}%>\n\n        <hr />\n\n        <form action="/add-student" method="post">\n            <div>\u59d3\u540d\uff1a<input type="text" name="name" /></div>\n            <div>\n                \u5e74\u9f84\uff1a<input type="number" max="150" min="0" name="age" />\n            </div>\n            <div>\n                \u6027\u522b\uff1a<input type="radio" name="gender" value="\u7537" /> \u7537\n                <input type="radio" name="gender" value="\u5973" /> \u5973\n            </div>\n            <div>\u5730\u5740\uff1a<input type="text" name="address" /></div>\n            <div>\n                <button>\u6dfb\u52a0</button>\n            </div>\n        </form>\n    </body>\n')),(0,r.kt)("h3",{id:"updataejs"},"updata.ejs"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ejs"},'    <body>\n        <h1>\u4fee\u6539\u5b66\u751f\u4fe1\u606f</h1>\n        <form action="/update-student" method="post">\n            \x3c!-- hidden\u662f\u4e00\u4e2a\u9690\u85cf\u7684\u8868\u5355\u9879\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b83\u4f20\u9012\u4e00\u4e9b\u4e0d\u5e0c\u671b\u88ab\u7528\u6237\u770b\u89c1\u7684\u6570\u636e --\x3e\n            <input type="hidden" name="id" value="<%=student.id%>" />\n            <div>\n                \u59d3\u540d\uff1a<input\n                    type="text"\n                    name="name"\n                    value="<%=student.name%>"\n                />\n            </div>\n            <div>\n                \u5e74\u9f84\uff1a<input\n                    type="number"\n                    max="150"\n                    min="0"\n                    name="age"\n                    value="<%=student.age%>"\n                />\n            </div>\n\n            <div>\n                \u6027\u522b\uff1a\n                <input type="radio" name="gender" value="\u7537"\n                <%=student.gender === "\u7537" && "checked" %> /> \u7537 \n                <input type="radio" name="gender" value="\u5973" \n                <%=student.gender === "\u5973"\n                && "checked" %> /> \u5973\n            </div>\n            <div>\n                \u5730\u5740\uff1a<input\n                    type="text"\n                    name="address"\n                    value="<%=student.address%>"\n                />\n            </div>\n            <div>\n                <button>\u4fee\u6539</button>\n            </div>\n        </form>\n    </body>\n')),(0,r.kt)("h2",{id:"router"},"router"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.expressjs.com.cn/guide/routing.html"},"express\u5b98\u7f51\u8def\u7531\u6a21\u5757\u5316")),(0,r.kt)("h3",{id:"\u7528\u6cd5"},"\u7528\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"var express = require('express')\nvar router = express.Router()\n\n// middleware that is specific to this router\nrouter.use(function timeLog (req, res, next) {\n  console.log('Time: ', Date.now())\n  next()\n})\n// define the home page route\nrouter.get('/', function (req, res) {\n  res.send('Birds home page')\n})\n// define the about route\nrouter.get('/about', function (req, res) {\n  res.send('About birds')\n})\n\nmodule.exports = router\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"var birds = require('./birds')\n\n// ...\n\napp.use('/birds', birds)\n")),(0,r.kt)("h3",{id:"next-1"},"next"),(0,r.kt)("p",null,"\u53ef\u4ee5\u63d0\u4f9b\u591a\u4e2a\u884c\u4e3a",(0,r.kt)("a",{parentName:"p",href:"https://www.expressjs.com.cn/en/guide/using-middleware.html"},"\u7c7b\u4f3c\u4e8e\u4e2d\u95f4\u4ef6"),"\u7684\u56de\u8c03\u51fd\u6570\u6765\u5904\u7406\u8bf7\u6c42\u3002\u552f\u4e00\u7684\u4f8b\u5916\u662f\u8fd9\u4e9b\u56de\u8c03\u53ef\u80fd\u4f1a\u8c03\u7528\u4ee5\u7ed5\u8fc7\u5176\u4f59\u7684\u8def\u7531\u56de\u8c03\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u673a\u5236\u5bf9\u8def\u7531\u65bd\u52a0\u524d\u63d0\u6761\u4ef6\uff0c\u5982\u679c\u6ca1\u6709\u7406\u7531\u7ee7\u7eed\u4f7f\u7528\u5f53\u524d\u8def\u7531\uff0c\u5219\u5c06\u63a7\u5236\u6743\u4f20\u9012\u7ed9\u540e\u7eed\u8def\u7531\u3002",(0,r.kt)("inlineCode",{parentName:"p"},"next('route')")),(0,r.kt)("p",null,"\u53ef\u4ee5\u591a\u4e2a\u56de\u8c03\u51fd\u6570\u5904\u7406\u540c\u4e00\u8def\u7531\u5bf9\u8c61"),(0,r.kt)("p",null,"\u4f8b\u5982fs\u6a21\u5757\u5199\u5165\u6570\u636e\u653e\u8fdb404\u8def\u7531\uff0c\u9700\u8981\u5904\u7406\u7684\u8def\u7531next\u653e\u884c"),(0,r.kt)("h1",{id:"cookie"},"cookie"),(0,r.kt)("p",null,"\u200b        \u73b0\u5728\u54b1\u4eec\u8fd9\u4e2a\u767b\u5f55\uff0c\u7b80\u76f4\u5f62\u540c\u865a\u8bbe\uff0c"),(0,r.kt)("p",null,"\u200b            ",(0,r.kt)("strong",{parentName:"p"},"HTTP\u534f\u8bae\u662f\u4e00\u4e2a\u65e0\u72b6\u6001\u7684\u534f\u8bae"),"\uff0c"),(0,r.kt)("p",null,"\u200b                ",(0,r.kt)("strong",{parentName:"p"},"\u670d\u52a1\u5668\u65e0\u6cd5\u533a\u5206\u8bf7\u6c42\u662f\u5426\u53d1\u9001\u81ea\u540c\u4e00\u4e2a\u5ba2\u6237\u7aef")),(0,r.kt)("h2",{id:"\u4ecb\u7ecd-2"},"\u4ecb\u7ecd"),(0,r.kt)("p",null,"cookie\u5c31\u662f\u4e00\u4e2a\u5b58\u50a8\u5668\uff0ctoken\u662f\u6570\u636e\u4ee4\u724c"),(0,r.kt)("h3",{id:"cookie-1"},(0,r.kt)("strong",{parentName:"h3"},"cookie")),(0,r.kt)("p",null,"\u200b                ","-"," ",(0,r.kt)("strong",{parentName:"p"},"cookie\u662fHTTP\u534f\u8bae\u4e2d\u7528\u6765\u89e3\u51b3\u65e0\u72b6\u6001\u95ee\u9898\u7684\u6280\u672f")),(0,r.kt)("p",null,"\u200b                ","-"," ",(0,r.kt)("strong",{parentName:"p"},"cookie\u7684\u672c\u8d28\u5c31\u662f\u4e00\u4e2a\u5934")),(0,r.kt)("p",null,"\u200b                    ","-"," \u670d\u52a1\u5668\u4ee5\u54cd\u5e94\u5934\u7684\u5f62\u5f0f\u5c06cookie\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef"),(0,r.kt)("p",null,"\u200b                        \u5ba2\u6237\u7aef\u6536\u5230\u4ee5\u540e\u4f1a\u5c06\u5176\u5b58\u50a8\uff0c\u5e76\u5728\u4e0b\u6b21\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\u65f6\u5c06\u5176\u4f20\u56de"),(0,r.kt)("p",null,"\u200b                        \u8fd9\u6837\u670d\u52a1\u5668\u5c31\u53ef\u4ee5",(0,r.kt)("strong",{parentName:"p"},"\u6839\u636ecookie\u6765\u8bc6\u522b\u51fa\u5ba2\u6237\u7aef"),"\u4e86"),(0,r.kt)("h3",{id:"\u6b65\u9aa4"},(0,r.kt)("strong",{parentName:"h3"},"\u6b65\u9aa4")),(0,r.kt)("p",null,"\u200b        \u9700\u8981\u5b89\u88c5\u4e2d\u95f4\u4ef6\u6765\u4f7f\u5f97express\u53ef\u4ee5\u89e3\u6790cookie"),(0,r.kt)("p",null,"\u200b            1.",(0,r.kt)("strong",{parentName:"p"},"\u5b89\u88c5cookie-parser")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"yarn add cookie-parser\n")),(0,r.kt)("p",null,"\u200b            2.",(0,r.kt)("strong",{parentName:"p"},"\u5f15\u5165")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const cookieParser = require("cookie-parser")\n')),(0,r.kt)("p",null,"\u200b            3.",(0,r.kt)("strong",{parentName:"p"},"\u8bbe\u7f6e\u4e3a\u4e2d\u95f4\u4ef6")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"app.use(cookieParser())\n")),(0,r.kt)("p",null,"\u200b            4.",(0,r.kt)("strong",{parentName:"p"},"\u670d\u52a1\u5668\u53d1\u9001")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'    // \u7ed9\u5ba2\u6237\u7aef\u53d1\u9001\u4e00\u4e2acookie\n    res.cookie("username", "admin")\n')),(0,r.kt)("p",null,"\u200b            5.",(0,r.kt)("strong",{parentName:"p"},"\u670d\u52a1\u5668\u63a5\u6536")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"    // req.cookies \u7528\u6765\u8bfb\u53d6\u5ba2\u6237\u7aef\u53d1\u56de\u7684cookie\n    console.log(req.cookies)\n")),(0,r.kt)("h2",{id:"\u6709\u6548\u671f"},"\u6709\u6548\u671f"),(0,r.kt)("p",null,"\u200b        cookie\u662f\u6709\u6709\u6548\u671f"),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u9ed8\u8ba4\u60c5\u51b5\u4e0bcookie\u7684\u6709\u6548\u671f\u5c31\u662f\u4e00\u6b21\u4f1a\u8bdd\uff08session\uff09")),(0,r.kt)("p",null,"\u200b                \u4f1a\u8bdd\u5c31\u662f\u4e00\u6b21\u4ece\u6253\u5f00\u5230\u5173\u95ed\u6d4f\u89c8\u5668\u7684\u8fc7\u7a0b "),(0,r.kt)("p",null,"\u200b            ","-"," ",(0,r.kt)("strong",{parentName:"p"},"maxAge")," \u7528\u6765\u8bbe\u7f6ecookie\u6709\u6548\u65f6\u95f4\uff0c\u5355\u4f4d\u662f",(0,r.kt)("strong",{parentName:"p"},"\u6beb\u79d2")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.expressjs.com.cn/4x/api.html#res.cookie"},"res.cookie\uff08name\uff0c value [\uff0c options]\uff09")),(0,r.kt)("h3",{id:"set"},"set"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'app.get("/set", (req, res) => {\n    /*\n        cookie\u662f\u6709\u6709\u6548\u671f\n            - \u9ed8\u8ba4\u60c5\u51b5\u4e0bcookie\u7684\u6709\u6548\u671f\u5c31\u662f\u4e00\u6b21\u4f1a\u8bdd\uff08session\uff09\n                \u4f1a\u8bdd\u5c31\u662f\u4e00\u6b21\u4ece\u6253\u5f00\u5230\u5173\u95ed\u6d4f\u89c8\u5668\u7684\u8fc7\u7a0b \n            - maxAge \u7528\u6765\u8bbe\u7f6ecookie\u6709\u6548\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u6beb\u79d2\n    */\n    res.cookie("name", "sunwukong", {\n        // expires:new Date(2022, 11, 7)\n        maxAge: 1000 * 60 * 60 * 24 * 30\n    })\n    res.send("\u8bbe\u7f6ecookie")\n})\n')),(0,r.kt)("h3",{id:"get"},"get"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'app.get("/get", (req, res) => {\n    const name = req.cookies.name\n\n    console.log(name)\n\n    res.send("\u8bfb\u53d6cookie")\n})\n')),(0,r.kt)("h3",{id:"del"},"del"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'app.get("/delete-cookie", (req, res) => {\n    // cookie\u4e00\u65e6\u53d1\u9001\u7ed9\u6d4f\u89c8\u5668\u6211\u4eec\u5c31\u4e0d\u80fd\u5728\u4fee\u6539\u4e86\n    // \u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u65b0\u7684\u540c\u540dcookie\u6765\u66ff\u6362\u65e7cookie\uff0c\u4ece\u800c\u8fbe\u5230\u4fee\u6539\u7684\u76ee\u7684\n\n    res.cookie("name", "", {\n        maxAge: 0\n    })\n\n    res.send("\u5220\u9664Cookie")\n})\n')),(0,r.kt)("h1",{id:"session"},"session"),(0,r.kt)("h2",{id:"cookie\u7684\u4e0d\u8db3"},"cookie\u7684\u4e0d\u8db3"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"cookie\u662f\u7531\u670d\u52a1\u5668\u521b\u5efa\uff0c\u6d4f\u89c8\u5668\u4fdd\u5b58")),(0,r.kt)("p",null,"\u200b\t\t\u6bcf\u6b21\u6d4f\u89c8\u5668\u8bbf\u95ee\u670d\u52a1\u5668\u65f6\u90fd\u9700\u8981\u5c06cookie\u8fd4\u56de"),(0,r.kt)("p",null,"\u200b\t\t\u8fd9\u5c31\u5bfc\u81f4\u6211\u4eec\u4e0d\u80fd\u5728cookie\u5b58\u653e\u8f83\u591a\u7684\u6570\u636e"),(0,r.kt)("p",null,"\u200b\t\t\u5e76\u4e14cookie\u662f\u76f4\u63a5\u5b58\u5728\u5ba2\u6237\u7aef\uff0c\u5bb9\u6613\u88ab\u7be1\u6539\u76d7\u7528"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6ce8\u610f"),"\uff1a"),(0,r.kt)("p",null,"\u200b\t\t\u6211\u4eec\u5728\u4f7f\u7528cookie\u65f6\u4e00\u5b9a\u4e0d\u4f1a\u4f7f\u7528cookie\u5b58\u653e\u654f\u611f\u6570\u636e"),(0,r.kt)("p",null,"\u6240\u4ee5\u4e3a\u4e86cookie\u7684\u4e0d\u8db3\uff0c\u6211\u4eec\u5e0c\u671b\u53ef\u4ee5"),(0,r.kt)("p",null,"\u200b\t\t",(0,r.kt)("strong",{parentName:"p"},"\u5c06\u6bcf\u4e2a\u7528\u6237\u7684\u6570\u636e\u7edf\u4e00\u5b58\u653e\u5230\u670d\u52a1\u5668\u4e2d\uff0c")),(0,r.kt)("p",null,"\u200b\t\t\t\u6bcf\u4e00\u4e2a\u7528\u6237\u7684\u6570\u636e\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684id"),(0,r.kt)("p",null,"\u200b\t\t\t\u6211\u4eec\u53ea\u9700\u8981\u901a\u8fc7cookie\u5c06id\u53d1\u9001\u7ed9\u6d4f\u89c8\u5668"),(0,r.kt)("p",null,"\u200b\t\t\t\u6d4f\u89c8\u5668\u53ea\u9700\u8981\u6bcf\u6b21\u8bbf\u95ee\u65f6\u5c06id\u8fd4\u56de\uff0c\u5373\u53ef\u8bfb\u53d6\u5230\u670d\u52a1\u5668\u4e2d\u5b58\u50a8\u7684\u6570\u636e"),(0,r.kt)("p",null,"\u200b\t\t\u8fd9\u4e2a\u6280\u672f\u6211\u4eec\u79f0\u4e4b\u4e3a\t",(0,r.kt)("strong",{parentName:"p"},"session\uff08\u4f1a\u8bdd\uff09")," "),(0,r.kt)("h2",{id:"\u7b80\u4ecb-2"},"\u7b80\u4ecb"),(0,r.kt)("p",null,"\u200b    session\u662f\u670d\u52a1\u5668\u4e2d\u7684\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u7528\u6765\u5b58\u50a8\u7528\u6237\u7684\u4fe1\u606f"),(0,r.kt)("p",null,"\u200b        \u6bcf\u4e00\u4e2asession\u90fd\u4f1a\u6709\u4e00\u4e2a\u552f\u4e00\u7684id\uff0csession\u521b\u5efa\u540e\uff0c"),(0,r.kt)("p",null,"\u200b            id\u4f1a\u4ee5cookie\u7684\u5f62\u5f0f\u53d1\u9001\u7ed9\u6d4f\u89c8\u5668"),(0,r.kt)("p",null,"\u200b        \u6d4f\u89c8\u5668\u6536\u5230\u4ee5\u540e\uff0c\u6bcf\u6b21\u8bbf\u95ee\u90fd\u4f1a\u5c06id\u53d1\u56de\uff0c\u670d\u52a1\u5668\u4e2d\u5c31\u53ef\u4ee5\u6839\u636eid\u627e\u5230\u5bf9\u5e94\u7684session"),(0,r.kt)("p",null,"\u200b    ",(0,r.kt)("strong",{parentName:"p"},"id\uff08cookie\uff09 ----\x3e session\u5bf9\u8c61")),(0,r.kt)("p",null,"\u200b    "),(0,r.kt)("h2",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,r.kt)("p",null,"\u5728\u6700\u5f00\u59cb\u7684\u4e2d\u95f4\u4ef6\u5904\u7406\u767b\u5f55\uff0c\u5224\u65adsession\u3002\u5b58\u5728\u653e\u884c\uff0c\u6ca1\u6709\u91cd\u5b9a\u5411\u6839\u76ee\u5f55"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'router.use((req, res, next) => {\n    if (req.session.loginUser) {\n        next()\n    } else {\n        res.redirect("/")\n    }\n})\n')),(0,r.kt)("p",null,"session\u7684\u9ed8\u8ba4\u6709\u6548\u671f\u662f\u4e00\u6b21\u4f1a\u8bdd"),(0,r.kt)("h3",{id:"\u6301\u4e45\u5316"},"\u6301\u4e45\u5316"),(0,r.kt)("p",null,"\u200b    ",(0,r.kt)("strong",{parentName:"p"},"session\u4ec0\u4e48\u65f6\u5019\u4f1a\u5931\u6548\uff1f")),(0,r.kt)("p",null,"\u200b        \u7b2c\u4e00\u79cd ",(0,r.kt)("strong",{parentName:"p"},"\u6d4f\u89c8\u5668\u7684cookie\u6ca1\u4e86")),(0,r.kt)("p",null,"\u200b        \u7b2c\u4e8c\u79cd ",(0,r.kt)("strong",{parentName:"p"},"\u670d\u52a1\u5668\u4e2d\u7684session\u5bf9\u8c61\u6ca1\u4e86")),(0,r.kt)("p",null,"\u200b    "),(0,r.kt)("p",null,"\u200b    ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://www.expressjs.com.cn/resources/middleware/session.html"},"express-session"),"\u9ed8\u8ba4\u662f\u5c06session\u5b58\u50a8\u5230\u5185\u5b58\u4e2d\u7684"),"\uff0c\u6240\u4ee5\u670d\u52a1\u5668\u4e00\u65e6\u91cd\u542fsession\u4f1a\u81ea\u52a8\u91cd\u7f6e\uff0c"),(0,r.kt)("p",null,"\u200b        \u6240\u4ee5\u6211\u4eec",(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528session\u901a\u5e38\u4f1a\u5bf9session\u8fdb\u884c\u4e00\u4e2a\u6301\u4e45\u5316\u7684\u64cd\u4f5c\uff08\u5199\u5230\u6587\u4ef6\u6216\u6570\u636e\u5e93\uff09")),(0,r.kt)("p",null,"\u200b    \u5982\u679c\u5c06session\u5b58\u50a8\u5230\u672c\u6587\u4ef6\u4e2d\uff1a"),(0,r.kt)("p",null,"\u200b        ","-"," \u9700\u8981\u5f15\u5165\u4e00\u4e2a\u4e2d\u95f4\u4ef6",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://www.npmjs.com/package/session-file-store"},"session-file-store"))),(0,r.kt)("p",null,"\u200b        ","-"," \u4f7f\u7528\u6b65\u9aa4\uff1a"),(0,r.kt)("p",null,"\u200b            ",(0,r.kt)("strong",{parentName:"p"},"\u2460 \u5b89\u88c5")),(0,r.kt)("p",null,"\u200b                ",(0,r.kt)("strong",{parentName:"p"},"yarn add session-file-store")),(0,r.kt)("p",null,"\u200b            ",(0,r.kt)("strong",{parentName:"p"},"\u2461 \u5f15\u5165")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const session = require("express-session")\nconst FileStore = require("session-file-store")(session) \n')),(0,r.kt)("p",null,"\u200b            ",(0,r.kt)("strong",{parentName:"p"},"\u2462 \u8bbe\u7f6e\u4e3a\u4e2d\u95f4\u4ef6"),"       "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'app.use(\n    session({\n        store: new FileStore({}),\n        secret: "dazhaxie"\n    })\n)\n')),(0,r.kt)("p",null,"\u9ed8\u8ba4\u5b58\u50a8\u4f4d\u7f6e"),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(3976).Z,width:"1920",height:"1030"})),(0,r.kt)("h3",{id:"\u914d\u7f6e\u5bf9\u8c61-session"},"\u914d\u7f6e\u5bf9\u8c61-session"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const session = require("express-session")\nconst FileStore = require("session-file-store")(session)\napp.use(\n    session({\n        store: new FileStore({\n            // path\u7528\u6765\u6307\u5b9asession\u672c\u5730\u6587\u4ef6\u7684\u8def\u5f84\n            path: path.resolve(__dirname, "./sessions"),\n            // \u52a0\u5bc6\n            secret: "\u54c8\u54c8"\n            // session\u7684\u6709\u6548\u65f6\u95f4 \u79d2 \u9ed8\u8ba41\u4e2a\u5c0f\u65f6\n            // ttl: 10,\n            // \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cfileStore\u4f1a\u6bcf\u95f4\u9694\u4e00\u5c0f\u65f6\uff0c\u6e05\u9664\u4e00\u6b21session\u5bf9\u8c61\n            // reapInterval \u7528\u6765\u6307\u5b9a\u6e05\u9664session\u7684\u95f4\u9694\uff0c\u5355\u4f4d\u79d2\uff0c\u9ed8\u8ba4 1\u5c0f\u65f6\n            // reapInterval: 10\n        }),\n        secret: "dazhaxie"\n    })\n)\n')),(0,r.kt)("h3",{id:"\u9500\u6bc1session"},"\u9500\u6bc1session"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'app.get("/logout", (req, res) => {\n    // \u4f7fsession\u5931\u6548\n    req.session.destroy(() => {\n        res.redirect("/")\n    })\n})\n')),(0,r.kt)("h2",{id:"sessionsave\u7acb\u5373\u5b58\u50a8"},"session.save\u7acb\u5373\u5b58\u50a8"),(0,r.kt)("p",null,"session\u5199\u5165\u6587\u4ef6\u9700\u8981\u65f6\u95f4\u5f15\u53d1\u7684\u95ee\u9898"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'router.use((req, res, next) => { \n    // \u767b\u5f55\u4ee5\u540e\uff0creq.session.loginUser\u662fundefined\n    if (req.session.loginUser) {\n        next()\n    } else {\n        res.redirect("/")\n    }\n})\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'app.post("/login", (req, res) => {\n    // \u83b7\u53d6\u7528\u6237\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\n    const { username, password } = req.body\n    if (username === "admin" && password === "123123") {\n        // \u767b\u5f55\u6210\u529f\u540e\uff0c\u5c06\u7528\u6237\u4fe1\u606f\u653e\u5165\u5230session\u4e2d\n        // \u8fd9\u91cc\u4ec5\u4ec5\u662f\u5c06loginUser\u6dfb\u52a0\u5230\u4e86\u5185\u5b58\u4e2d\u7684session\u4e2d\n        //  \u800c\u6ca1\u6709\u5c06\u503c\u5199\u5165\u5230\u6587\u4ef6\u4e2d\n        req.session.loginUser = username\n\n        // \u4e3a\u4e86\u4f7f\u5f97session\u53ef\u4ee5\u7acb\u523b\u5b58\u50a8\uff0c\u9700\u8981\u624b\u52a8\u8c03\u7528save\n        req.session.save(()=>{\n            res.redirect("/students/list")\n        })\n    } else {\n        res.send("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef")\n    }\n})\n')),(0,r.kt)("h1",{id:"csrf\u653b\u51fb"},"csrf\u653b\u51fb"),(0,r.kt)("h2",{id:"\u4ecb\u7ecd-3"},"\u4ecb\u7ecd"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u653b\u51fb\u539f\u7406")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u7528\u6237\u8f93\u5165\u8d26\u53f7\u4fe1\u606f\u8bf7\u6c42\u767b\u5f55A\u7f51\u7ad9\u3002"),(0,r.kt)("li",{parentName:"ol"},"A\u7f51\u7ad9\u9a8c\u8bc1\u7528\u6237\u4fe1\u606f\uff0c\u901a\u8fc7\u9a8c\u8bc1\u540e\u8fd4\u56de\u7ed9\u7528\u6237\u4e00\u4e2acookie"),(0,r.kt)("li",{parentName:"ol"},"\u5728\u672a\u9000\u51fa\u7f51\u7ad9A\u4e4b\u524d\uff0c\u5728\u540c\u4e00\u6d4f\u89c8\u5668\u4e2d\u8bf7\u6c42\u4e86\u9ed1\u5ba2\u6784\u9020\u7684\u6076\u610f\u7f51\u7ad9B"),(0,r.kt)("li",{parentName:"ol"},"B\u7f51\u7ad9\u6536\u5230\u7528\u6237\u8bf7\u6c42\u540e\u8fd4\u56de\u653b\u51fb\u6027\u4ee3\u7801\uff0c\u6784\u9020\u8bbf\u95eeA\u7f51\u7ad9\u7684\u8bed\u53e5"),(0,r.kt)("li",{parentName:"ol"},"\u6d4f\u89c8\u5668\u6536\u5230\u653b\u51fb\u6027\u4ee3\u7801\u540e\uff0c\u5728\u7528\u6237\u4e0d\u77e5\u60c5\u7684\u60c5\u51b5\u4e0b\u643a\u5e26cookie\u4fe1\u606f\u8bf7\u6c42\u4e86A\u7f51\u7ad9\u3002\u6b64\u65f6A\u7f51\u7ad9\u4e0d\u77e5\u9053\u8fd9\u662f\u7531B\u53d1\u8d77\u7684\u3002\u90a3\u4e48\u8fd9\u65f6\u9ed1\u5ba2\u5c31\u53ef\u4ee5\u8fdb\u884c\u4e00\u4e0b\u9a9a\u64cd\u4f5c\u4e86\uff01")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4e24\u4e2a\u6761\u4ef6\uff1aa \u7528\u6237\u8bbf\u95ee\u7ad9\u70b9A\u5e76\u4ea7\u751f\u4e86cookie")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"b \u7528\u6237\u6ca1\u6709\u9000\u51faA\u540c\u65f6\u8bbf\u95ee\u4e86B")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"csrf\u653b\u51fb")),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020")),(0,r.kt)("p",null,"\u200b        http://localhost:3000/students/delete?id=3"),(0,r.kt)("p",null,"\u200b        ","-"," \u73b0\u5728\u5927\u90e8\u5206\u7684\u6d4f\u89c8\u5668\u7684\u90fd\u4e0d\u4f1a\u5728\u8de8\u57df\u7684\u60c5\u51b5\u4e0b\u81ea\u52a8\u53d1\u9001cookie"),(0,r.kt)("p",null,"\u200b            \u8fd9\u4e2a\u8bbe\u8ba1\u5c31\u662f\u4e3a\u4e86\u907f\u514dcsrf\u7684\u653b\u51fb"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<body>\n    <h1>\u8fd9\u4e2a\u7f51\u7ad9\u4e2d\u6709\u5f88\u591a\u4f60\u60f3\u8981\u7684\u4e1c\u897f\uff01</h1>\n\n    <img src="http://localhost:3000/students/delete?id=7">\n\n\n    \x3c!-- <form action="http://localhost:3000/students/add" method="post">\n        <input type="text" name="name" value="\u5927\u95f8\u87f93">\n        <input type="text" name="age" value="77">\n        <input type="text" name="gender" value="\u5973">\n        <input type="text" name="address" value="\u5b81\u6ce2">\n    </form>\n\n    <script>\n        document.forms[0].submit()\n    <\/script> --\x3e\n    \n</body>\n')),(0,r.kt)("h2",{id:"\u5904\u7406csrf\u653b\u51fb"},"\u5904\u7406csrf\u653b\u51fb"),(0,r.kt)("p",null,"\u200b        ","-"," \u5982\u4f55\u89e3\u51b3\uff1f"),(0,r.kt)("p",null,"\u200b            \\1. \u4f7f\u7528",(0,r.kt)("strong",{parentName:"p"},"referer\u5934\u6765\u68c0\u67e5\u8bf7\u6c42\u7684\u6765\u6e90")),(0,r.kt)("p",null,"\u200b            \\2. \u4f7f\u7528",(0,r.kt)("strong",{parentName:"p"},"\u9a8c\u8bc1\u7801")),(0,r.kt)("p",null,"\u200b            \\3. ",(0,r.kt)("strong",{parentName:"p"},"\u5c3d\u91cf\u4f7f\u7528post\u8bf7\u6c42\uff08\u7ed3\u5408token\uff09")),(0,r.kt)("p",null,"\u200b        ","-"," ",(0,r.kt)("strong",{parentName:"p"},"token\uff08\u4ee4\u724c\uff09")),(0,r.kt)("p",null,"\u200b            ","-"," \u53ef\u4ee5\u5728\u521b\u5efa\u8868\u5355\u65f6\u968f\u673a\u751f\u6210\u4e00\u4e2a\u4ee4\u724c"),(0,r.kt)("p",null,"\u200b                \u7136\u540e\u5c06\u4ee4\u724c\u5b58\u50a8\u5230session\u4e2d\uff0c\u5e76\u901a\u8fc7\u6a21\u677f\u53d1\u9001\u7ed9\u7528\u6237"),(0,r.kt)("p",null,"\u200b                \u7528\u6237\u63d0\u4ea4\u8868\u5355\u65f6\uff0c\u5fc5\u987b\u5c06token\u53d1\u56de\uff0c\u624d\u53ef\u4ee5\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c"),(0,r.kt)("p",null,"\u200b                \uff08\u53ef\u4ee5\u4f7f\u7528uuid\u6765\u751f\u6210token\uff09"),(0,r.kt)("h3",{id:"token\u65b9\u5f0f"},"token\u65b9\u5f0f"),(0,r.kt)("p",null,"\u5f15\u5165uuid\uff0c\u751f\u6210\u968f\u673a\u4ee4\u724c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// yarn add uuid\n// \u5f15\u5165uuid\nconst uuid = require("uuid").v4\n')),(0,r.kt)("p",null,"\u751f\u6210token"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u5b66\u751f\u5217\u8868\u7684\u8def\u7531\nrouter.get("/list", (req, res) => {\n    // session\u7684\u9ed8\u8ba4\u6709\u6548\u671f\u662f\u4e00\u6b21\u4f1a\u8bdd\n    // if (req.session.loginUser) {\n    //     res.render("students", { stus: STUDENT_ARR })\n    // } else {\n    //     res.redirect("/")\n    // }\n\n    // \u751f\u6210\u4e00\u4e2atoken\n    const csrfToken = uuid()\n\n    // \u5c06token\u6dfb\u52a0\u5230session\u4e2d\n    req.session.csrfToken = csrfToken\n\n    req.session.save(() => {\n        res.render("students", {\n            stus: STUDENT_ARR,\n            username: req.session.loginUser,\n            csrfToken\n        })\n    })\n})\n')),(0,r.kt)("p",null,"\u9a8c\u8bc1token"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u6dfb\u52a0\u5b66\u751f\u7684\u8def\u7531\nrouter.post("/add", (req, res, next) => {\n    // \u5ba2\u6237\u7aef\u53d1\u9001\u7684token\n    const csrfToken = req.body._csrf\n    const sessionToken = req.session.csrfToken\n    req.session.csrfToken = null\n\n    // \u5c06\u5ba2\u6237\u7aef\u7684token\u548c session\u4e2d\u7684token\u8fdb\u884c\u6bd4\u8f83\n    if (sessionToken=== csrfToken) {\n        const id = STUDENT_ARR.at(-1) ? STUDENT_ARR.at(-1).id + 1 : 1\n\n        const newUser = {\n            id,\n            name: req.body.name,\n            age: +req.body.age,\n            gender: req.body.gender,\n            address: req.body.address\n        }\n\n        STUDENT_ARR.push(newUser)\n\n\n        req.session.save(() => {\n            //\u8c03\u7528next\u4ea4\u7531\u540e\u7eed\u8def\u7531\u7ee7\u7eed\u5904\u7406\n            next()\n        })\n        \n    }else{\n        res.status(403).send("token\u9519\u8bef")\n    }\n})\n')),(0,r.kt)("h3",{id:"\u68c0\u67e5referer\u7684\u65b9\u5f0f"},"\u68c0\u67e5referer\u7684\u65b9\u5f0f"),(0,r.kt)("p",null,"\u5728\u6240\u6709\u8bf7\u6c42\u6bd4\u7ecf\u8fc7\u7684\u4e2d\u95f4\u4ef6\uff08\u76f8\u5f53\u4e8e\u62e6\u622a\u5668\uff09\u5904\u7406\uff0creferer\u68c0\u67e5\u8bf7\u6c42\u5934"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'router.use((req, res, next) => {\n    // \u83b7\u53d6\u4e00\u4e2a\u8bf7\u6c42\u5934referer\n    const referer = req.get("referer")\n    // console.log("\u8bf7\u6c42\u6765\u81ea\uff1a", referer)\n    // if(!referer || !referer.startsWith("http://localhost:3000/")){\n    //     res.status(403).send("\u4f60\u6ca1\u6709\u8fd9\u4e2a\u6743\u9650\uff01")\n    //     return\n    // }\n\n    // \u767b\u5f55\u4ee5\u540e\uff0creq.session.loginUser\u662fundefined\n    if (req.session.loginUser) {\n        next()\n    } else {\n        res.redirect("/")\n    }\n})\n')))}k.isMDXComponent=!0},6692:(n,e,t)=>{t.d(e,{Z:()=>l});const l=t.p+"assets/images/uTools_1675882755476-05db29364ad7ef61a075bf4d3c228d46.png"},6828:(n,e,t)=>{t.d(e,{Z:()=>l});const l=t.p+"assets/images/uTools_1677037642930-9b8c8c16c8aa2cbd245403cbdb45293e.png"},3976:(n,e,t)=>{t.d(e,{Z:()=>l});const l=t.p+"assets/images/uTools_1677509180126-51fc7b9f229c14bbb056d457ebd1a220.png"},1697:(n,e,t)=>{t.d(e,{Z:()=>l});const l=t.p+"assets/images/url\u5730\u5740\u683c\u5f0f-\u4f20\u7edf\u5f62\u5f0f-dd3bfa57970fe34dc26d65d6d251b3f6.jpg"}}]);